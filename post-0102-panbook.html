<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="generator" content="pandoc" />
  <meta name="author" content="TANG ZhiXiong; dvorak4tzx; district10" />
  <meta name="date" content="2016-05-09" />
  <title>PanBook</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="jquery-ui.css" type="text/css" />
  <link rel="stylesheet" href="font-awesome.min.css" type="text/css" />
  <link rel="stylesheet" href="main.css" type="text/css" />
</head>
<body>
<div id="header">
<h1 class="title">PanBook</h1>
<h3 class="date">2016-05-09</h3>
</div>
<div id="tocbox" class="pokerface">
    <div id="tocboxheader">&#xf03b;</div>
    <div id="tocboxbody">
        <ul>
        <li><a href="#panbook">PanBook</a></li>
        </ul>
    </div>
</div>
<div id="navigator" class="pokerface"><a id="gotoindex" href="index.html" title="&#25353;&#19979;&#12304;h&#12305;&#33719;&#21462;&#39029;&#38754;&#24110;&#21161;&#12290;">&#xf015;</a></div>
<h1 id="panbook">PanBook</h1>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;head&gt;</span>
<span class="kw">&lt;link</span><span class="ot"> rel=</span><span class="st">&quot;stylesheet&quot;</span><span class="ot"> href=</span><span class="st">&quot;http://yui.yahooapis.com/pure/0.6.0/pure-min.css&quot;</span><span class="kw">&gt;</span>

<span class="kw">&lt;meta</span><span class="ot"> name=</span><span class="st">&quot;viewport&quot;</span><span class="ot"> content=</span><span class="st">&quot;width=device-width, initial-scale=1&quot;</span><span class="kw">&gt;</span>

<span class="co">&lt;!--[if lte IE 8]&gt;</span>
<span class="co">    &lt;link rel=&quot;stylesheet&quot; href=&quot;http://yui.yahooapis.com/pure/0.6.0/grids-responsive-old-ie-min.css&quot;&gt;</span>
<span class="co">&lt;![endif]--&gt;</span>
<span class="co">&lt;!--[if gt IE 8]&gt;&lt;!--&gt;</span>
    <span class="kw">&lt;link</span><span class="ot"> rel=</span><span class="st">&quot;stylesheet&quot;</span><span class="ot"> href=</span><span class="st">&quot;http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css&quot;</span><span class="kw">&gt;</span>
<span class="co">&lt;!--&lt;![endif]--&gt;</span>
<span class="kw">&lt;/head&gt;</span></code></pre></div>
<ul>
<li>5ths-Based Units, <code>1</code>, <code>1-1</code>, <code>5-5</code>, <code>{1..4}-5</code></li>
</ul>
<p>irresponsive: 33.33%</p>
<pre><code>&lt;div class=&quot;pure-g&quot;&gt;
    &lt;div class=&quot;pure-u-1-3&quot;&gt; ... &lt;/div&gt;
    &lt;div class=&quot;pure-u-1-3&quot;&gt; ... &lt;/div&gt;
    &lt;div class=&quot;pure-u-1-3&quot;&gt; ... &lt;/div&gt;
&lt;/div&gt;</code></pre>
<p>responsive: 100% (small screens) - 33.33% (on medium-sized screens and above)</p>
<pre><code>&lt;div class=&quot;pure-g&quot;&gt;
    &lt;div class=&quot;pure-u-1 pure-u-md-1-3&quot;&gt; ... &lt;/div&gt;
    &lt;div class=&quot;pure-u-1 pure-u-md-1-3&quot;&gt; ... &lt;/div&gt;
    &lt;div class=&quot;pure-u-1 pure-u-md-1-3&quot;&gt; ... &lt;/div&gt;
&lt;/div&gt;</code></pre>
<pre><code>&lt;style&gt;
    .pure-g &gt; div {
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
    }
    .l-box {
        padding: 1em;
    }
&lt;/style&gt;</code></pre>
<p><a href="http://pandoc.org/scripting.html">Pandoc - Scripting with pandoc</a></p>
<p>:</p>
<p>regexp? -&gt; ast -&gt; filter</p>
<p>filter :</p>
<pre class="tzx-bigquote"><code>                         source format
                              &#8595;
                           (pandoc)
                              &#8595;
                      JSON-formatted AST
                              &#8595;
                           (filter)
                              &#8595;
                      JSON-formatted AST
                              &#8595;
                           (pandoc)
                              &#8595;
                        target format</code></pre>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="st">#!/usr/bin/env runhaskell</span>
<span class="co">-- behead2.hs</span>
<span class="kw">import </span><span class="dt">Text.Pandoc.JSON</span>

<span class="ot">main ::</span> <span class="dt">IO</span> ()
main <span class="fu">=</span> toJSONFilter behead
  <span class="kw">where</span> behead (<span class="dt">Header</span> n _ xs) <span class="fu">|</span> n <span class="fu">&gt;=</span> <span class="dv">2</span> <span class="fu">=</span> <span class="dt">Para</span> [<span class="dt">Emph</span> xs]
        behead x <span class="fu">=</span> x</code></pre></div>
<pre><code>```bash
pandoc -f SOURCEFORMAT -t json | runhaskell behead2.hs | \
  pandoc -f json -t TARGETFORMAT

# or
pandoc -f SOURCEFORMAT -t TARGETFORMAT --filter ./behead2.hs # chmod +x behead2.hs

# or, compile it first
ghc --make behead2.hs
pandoc -f SOURCEFORMAT -t TARGETFORMAT --filter ./behead
```

include multiple instances of --filter: the filters will be applied in
sequence.</code></pre>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">cat</span> test.txt
<span class="co">### my header</span>

<span class="kw">text</span> with *italics*
$ <span class="kw">pandoc</span> -t native test.txt
[<span class="kw">Header</span> 3 (<span class="st">&quot;my-header&quot;</span>,[],[]) [<span class="kw">Str</span> <span class="st">&quot;my&quot;</span>,Space,Str <span class="st">&quot;header&quot;</span>]
,<span class="kw">Para</span> [Str <span class="st">&quot;text&quot;</span>,Space,Str <span class="st">&quot;with&quot;</span>,Space,Emph [Str <span class="st">&quot;italics&quot;</span>]]]</code></pre></div>
<ul>
<li>Download ghc: <a href="https://www.haskell.org/ghc/">The Glasgow Haskell Compiler</a></li>
<li><p><a href="http://book.realworldhaskell.org/read/installing-ghc-and-haskell-libraries.html">Appendix&#160;A.&#160;Installing GHC and Haskell libraries</a></p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">cabal</span> update
<span class="kw">cabal</span> install -pandoc <span class="co"># &#31649;&#29702;&#21592;&#36523;&#20221;&#36816;&#34892;</span></code></pre></div>
<p>from source</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">runghc</span> Setup configure -p <span class="co"># runghc Setup configure --user --prefix=$HOME -p</span>
<span class="kw">runghc</span> Setup build
<span class="kw">sudo</span> runghc Setup install <span class="co"># runghc Setup install</span></code></pre></div></li>
</ul>
<ul class="tzx-tags-group">
<li><a class="tzx-tag" href="tags.html/#panbook">panbook</a></li>
<li><a class="tzx-tag" href="tags.html/#project">project</a></li>
</ul>

<div class="tzx-changes"><select id="tzx-changes" title="&#21382;&#21490;&#29256;&#26412;">
<option value="https://raw.githubusercontent.com/district10/blog/5a7d1f7d62a5cd8a23e9aaa6609f69393870e372/_posts/post-0102-panbook.md" title="2 insertions(+), 1 deletions(-)">1480428507</option>
<option value="https://raw.githubusercontent.com/district10/blog/b08a696f534c650b0d7fccc3b0b1d7d0d68c6d3d/_posts/post-0102-panbook.md" title="138 insertions(+), 0 deletions(-)">1480083296</option>
</select></div>

<script>
var tzxFilename = "_posts/post-0102-panbook.md";
var tzxChanges = [
    {
        hash: "5a7d1f7d62a5cd8a23e9aaa6609f69393870e372",
        datetime: "1480428507",
        insertions: 2,
        deletions: 1
    },
    {
        hash: "b08a696f534c650b0d7fccc3b0b1d7d0d68c6d3d",
        datetime: "1480083296",
        insertions: 138,
        deletions: 0
    },
];
</script>

<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="jquery-ui.min.js"></script>
<script type="text/javascript" src="clappr.min.js"></script>
<script type="text/javascript" src="lazyload.min.js"></script>
<script type="text/javascript" src="egg.min.js"></script>
<script type="text/javascript" src="moment.min.js"></script>
<script type="text/javascript" src="clipboard.min.js"></script>
<script type="text/javascript" src="main.js"></script>
<hr style="color: #9ddcff;"/>
<div id="copyright">TANG ZhiXiong, 2017.  Generated by Pandoc on Travis CI. <a  href="https://github.com/district10/blog">Fork Me on GitHub.</a></div>
<div id="comments" class="comments-area">
    <div><span id="showDisqus" title="&#27426;&#36814;&#20132;&#27969;">&#12300;Load Disqus | &#21152;&#36733;&#35780;&#35770;&#12301;</span></div>
    <div id="disqus_thread"></div>
</div>
</body>
</html>
