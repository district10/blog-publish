<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="generator" content="pandoc" />
  <meta name="author" content="TANG ZhiXiong; dvorak4tzx; district10" />
  <meta name="date" content="2016-07-27" />
  <title>&#38271;&#27801;&#39033;&#30446;&#24635;&#32467; 5</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="jquery-ui.css" type="text/css" />
  <link rel="stylesheet" href="font-awesome.min.css" type="text/css" />
  <link rel="stylesheet" href="main.css" type="text/css" />
</head>
<body>
<div id="header">
<h1 class="title">&#38271;&#27801;&#39033;&#30446;&#24635;&#32467; 5</h1>
<h3 class="date">2016-07-27</h3>
</div>
<div id="tocbox" class="pokerface">
    <div id="tocboxheader">&#xf03b;</div>
    <div id="tocboxbody">
        <ul>
        <li><a href="#&#38271;&#27801;&#39033;&#30446;&#24635;&#32467;-5-&#36890;&#20449;&#27169;&#22359;wrappers-&#21644;-moderator">&#38271;&#27801;&#39033;&#30446;&#24635;&#32467; 5 &#8211; &#36890;&#20449;&#27169;&#22359;&#65306;Wrappers &#21644; Moderator</a></li>
        </ul>
    </div>
</div>
<div id="navigator" class="pokerface"><a id="gotoindex" href="index.html" title="&#25353;&#19979;&#12304;h&#12305;&#33719;&#21462;&#39029;&#38754;&#24110;&#21161;&#12290;">&#xf015;</a></div>
<h1 id="&#38271;&#27801;&#39033;&#30446;&#24635;&#32467;-5-&#36890;&#20449;&#27169;&#22359;wrappers-&#21644;-moderator">&#38271;&#27801;&#39033;&#30446;&#24635;&#32467; 5 &#8211; &#36890;&#20449;&#27169;&#22359;&#65306;Wrappers &#21644; Moderator</h1>
<p><a href="post-0113-changsha-review.html" style="font-size:80%; color: red;" title="post-0113-changsha-review.md">&#12304;&#22238;&#21040;&#30446;&#24405;&#12305;</a></p>
<blockquote>
<p>&#31616;&#20171;&#36328;&#30005;&#33041; IPC&#65292;&#36827;&#34892;&#20989;&#25968;&#35843;&#29992;&#65307;</p>
</blockquote>
<p>&#65288;&#36825;&#37096;&#20998;&#24456;&#20869;&#23481;&#20063;&#24456;&#22810;&#12290;&#26242;&#26102;&#27809;&#26102;&#38388;&#20889;&#23436;&#12290;&#65289;</p>
<p>&#30005;&#33041;/&#36827;&#31243;&#20043;&#38388;&#30340;&#36890;&#20449;&#65292;&#21487;&#20197;&#20351;&#29992; TCP&#65292;&#21487;&#20197;&#35828; TCP &#26159;&#26368;&#22909;&#30340; IPC&#65288;&#27809;&#26377;&#20043;&#19968;&#65289;&#65292;&#22240;&#20026;&#23427;&#65306;</p>
<ul>
<li>&#36328;&#24179;&#21488;&#12289;&#36328;&#20027;&#26426;</li>
<li>&#36328;&#35821;&#35328;</li>
<li>&#25928;&#29575;&#39640;</li>
<li>&#21487;&#38752;&#20256;&#36755;</li>
</ul>
<p>&#21807;&#19968;&#30340;&#19981;&#22909;&#22312;&#20110;&#23427;&#19981;&#33021;&#20351;&#29992;&#20849;&#20139;&#20869;&#23384;&#65292;&#20063;&#23601;&#26159;&#35828;&#19981;&#33021;&#20351;&#29992;&#21516;&#19968;&#20010;&#21464;&#37327;&#12290;&#21487;&#33021;&#23384;&#22312;&#21464;&#37327;&#30340;&#26356;&#26032;&#38382;&#39064;&#12290;But&#65292;anyway&#65292;&#29992; TCP &#26469;&#36890;&#20449;&#24635;&#26159;&#19981;&#38169;&#30340;&#12290;</p>
<p>&#65288;&#24635;&#26377;&#20123;&#20154;&#65292;&#35201; UDP &#26469;&#23454;&#29616;&#19968;&#20010;&#25417;&#24613;&#30340; TCP&#65292;&#25928;&#29575;&#20302;&#12289;&#25928;&#26524;&#24046;&#65292;&#26089;&#35813;&#19968;&#21171;&#27704;&#36920;&#30452;&#25509;&#19978; TCP&#12290;&#65289;</p>
<p>&#20854;&#23454;&#20197;&#21069;&#30340;&#19968;&#31687; post &#24050;&#32463;&#25552;&#21040;&#36807;&#65306;<a href="post-0059-exe-wrapper.html">&#23553;&#35013;&#35828;&#26126;</a>&#65292;&#21487;&#20197;&#20808;&#30475;&#36825;&#36793;&#12290;&#36825;&#20010; post &#35762;&#24471;&#26159;&#26550;&#26500;&#65292;&#20063;&#23601;&#26159;&#35828;&#12304;&#22914;&#20309;&#23631;&#34109;&#31243;&#24207;&#35843;&#29992;&#65311;&#19981;&#31649;&#23427;&#26469;&#33258;&#26412;&#26426;&#65292;&#36824;&#26159;&#24322;&#22320;&#12305;&#12290;&#23545;&#24212;&#30340;&#20195;&#30721;&#22312; <a href="https://github.com/district10/CrossOS" class="featured heart">district10/CrossOS: Cross OS Communication</a>&#65292;&#24050;&#32463;&#22312; Linux &#21644; Windows &#19978;&#27979;&#35797;&#36890;&#36807;&#12290;</p>
<p>&#22312;&#19978;&#38754; repo &#30340; README.txt &#37324;&#65292;&#20889;&#21040;&#65306;</p>
<blockquote>
<p>&#36824;&#38656;&#35201;&#23450;&#20041;&#19968;&#20010;&#21327;&#35758;&#65292;&#35268;&#23450;&#30456;&#20114;&#20256;&#36882;&#25968;&#25454;&#30340;&#26684;&#24335;&#12290;&#22914;&#65306;&#31532;&#19968;&#20010;&#23383;&#33410;&#20195;&#34920;&#20256;&#36755;&#31867;&#22411;&#65292;&#25991;&#26412;&#65311;buf&#65311;&#38656;&#35201;&#20445;&#23384;&#65311;&#25968;&#25454;&#24320;&#22987;&#65311;&#25968;&#25454;&#32467;&#26463;&#65311;&#31561;&#31561;&#12290;</p>
<p>&#20551;&#35774;&#36825;&#20010;&#35268;&#21017;&#20026; moderator&#65292;moderator &#38656;&#35201;&#22312;&#21457;&#36865;&#21069;&#23545;&#25968;&#25454;&#36827;&#34892;&#23553;&#35013;&#65292;&#22312;&#25910;&#21040;&#25968;&#25454;&#26102;&#36827;&#34892;&#35299;&#26512;&#21644;&#20998;&#21457;&#12290;&#23601;&#22909;&#35937;&#36825;&#20010; moderator &#26159;&#25105;&#20204;&#30340; PDU &#35299;&#26512;&#24037;&#20855;&#12290;</p>
</blockquote>
<p>&#22522;&#20110;&#36825;&#20010; Wrapper&#65292;&#25105;&#35774;&#35745;&#20102; Moderator&#65288;&#20013;&#20171;&#65289;&#27169;&#22359;&#65292;&#19987;&#38376;&#36127;&#36131;&#24207;&#21015;&#21270;&#21644;&#21453;&#24207;&#21015;&#21270;&#21518;&#20989;&#25968;&#35843;&#29992;&#12290;</p>
<p>&#23427;&#30340;&#20316;&#29992;&#22914;&#19979;&#22270;&#65306;</p>
<div class="figure">
<img src="http://whudoc.qiniudn.com/2016/system-flow.png" />

</div>
<dl>
<dt>P.S. &#20013;&#20171;&#36890;&#24120;&#32763;&#35793;&#25104; intermediary agent&#65292;&#20026;&#20160;&#20040;&#25105;&#35201;&#29992; moderator &#26469;&#20570;&#36825;&#20010;&#27169;&#22359;&#21517;&#65311;</dt>
<dd><p>&#22240;&#20026;&#25105;&#26366;&#19978;&#36807;&#30340;&#19968;&#38376;&#33258;&#24049;&#21916;&#27426;&#30340;&#36873;&#20462;&#35838;&#65306;<a href="post-0027-ai-will-kill-us.html">&#33521;&#35821;&#28436;&#35762;&#19982;&#36777;&#35770;</a>&#65292;&#37324;&#27599;&#27425;&#35752;&#35770;&#23567;&#32452;&#37324;&#37117;&#35201;&#26377;&#19968;&#20010; moderator &#20316;&#20026;&#21327;&#35843;&#32773;&#12290;&#20182;&#26469;&#32479;&#39046;&#35752;&#35770;&#30340;&#36827;&#34892;&#12290;</p>
<p>&#25105;&#35273;&#24471;&#36825;&#20010;&#27010;&#24565;&#21644;&#36825;&#37324;&#23436;&#20840;&#22865;&#21512;&#12290;&#25152;&#20197;&#25226;&#36825;&#20010;&#27169;&#22359;&#21483; moderator&#12290;</p>
</dd>
</dl>
<p>Moderator &#20027;&#35201;&#21033;&#29992;&#20102; Qt &#25552;&#20379;&#30340;&#24207;&#21015;&#21270;&#21151;&#33021;&#65292;&#23454;&#29616;&#20102;&#20989;&#25968;&#35843;&#29992;&#65288;&#20197;&#21450;&#35843;&#29992;&#21442;&#25968;&#65289;&#30340;&#30340;&#24207;&#21015;&#21270;&#12290;</p>
<p>&#39318;&#20808;&#35201;&#26126;&#30830;&#65292;&#25105;&#20204;&#30340;&#20195;&#30721;&#21482;&#26377;&#19968;&#20221;&#65292;&#21482;&#19981;&#36807;&#39640;&#24615;&#33021;&#35745;&#31639;&#26426;&#19978;&#20250;&#36816;&#34892; Master &#31243;&#24207;&#65292;&#24037;&#25511;&#26426;&#19978;&#20250;&#36816;&#34892; Slave &#31243;&#24207;&#65292;&#20004;&#32773;&#37117;&#26377;&#21508;&#20010;&#20256;&#24863;&#22120;&#27169;&#22359;&#65292;&#21482;&#19981;&#36807;&#20256;&#24863;&#22120;&#21482;&#26377;&#19968;&#36793;&#26159;&#30495;&#30340;&#26377;&#65292;&#21478;&#19968;&#36793;&#21482;&#26159;&#26377;&#19968;&#20010;&#31354;&#22771;&#65292;&#23427;&#21807;&#19968;&#30340;&#20316;&#29992;&#26159;&#35831;&#27714;&#21478;&#19968;&#36793;&#30340;&#20256;&#24863;&#22120;&#65292;&#24182;&#20551;&#35013;&#33258;&#24049;&#36825;&#36793;&#30495;&#30340;&#26377;&#20256;&#24863;&#22120;&#12290; Moderator &#22312;&#20004;&#36793;&#37117;&#26377;&#65292;&#19979;&#38754;&#26159;&#20195;&#30721;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="kw">class</span> Moderator
{
<span class="kw">public</span>:
    Moderator( );
    <span class="dt">static</span> <span class="dt">bool</span> doItYourself( BCD::TypeID tid );

<span class="kw">public</span>:
    <span class="dt">static</span> <span class="dt">void</span> dispatch( <span class="ot">QByteArray</span> &amp;msg );

    <span class="kw">typedef</span> <span class="ot">QHash</span>&lt;BCD::TypeID, MasterSlaveType&gt; WhichSide;
    <span class="dt">const</span> <span class="dt">static</span> WhichSide wss;
    <span class="kw">enum</span> CrossType {
        <span class="co">// -- G E N E S I S - L M S --</span>
        GEN_LMS__START__QINT64,
        GEN_LMS__STOP__VOID,
        ...
        <span class="co">// -- G E N E S I S - U R --</span>
        GEN_UNIT__SET_UR_POSE__DOUBLE_DOUBLE_DOUBLE_DOUBLE_DOUBLE_DOUBLE
    };
    <span class="co">// -- G E N E S I S --</span>
    <span class="dt">static</span> <span class="ot">QByteArray</span> genLMS_start( <span class="dt">const</span> <span class="dt">qint64</span> &amp;dt = <span class="dv">0</span> );
    <span class="dt">static</span> <span class="ot">QByteArray</span> genLMS_stop( );
    <span class="dt">static</span> <span class="ot">QByteArray</span> genUnit_setUrPose( <span class="dt">double</span> x, <span class="dt">double</span> y, <span class="dt">double</span> z,
                                         <span class="dt">double</span> rx, <span class="dt">double</span> ry, <span class="dt">double</span> rz );
    ...

<span class="kw">private</span>:
    <span class="dt">static</span> WhichSide initWhichSides( );
};</code></pre></div>
<p>&#38656;&#35201;&#30041;&#24847;&#30340;&#22320;&#26041;&#26377;&#65306;</p>
<ol style="list-style-type: decimal">
<li><p><code>static bool doItYourself( BCD::TypeID tid )</code> &#36825;&#20010;&#20989;&#25968;&#22312;&#19968;&#20391;&#36820;&#22238;&#20102; true&#65292;&#22312;&#21478;&#19968;&#20391;&#23601;&#35201;&#36820;&#22238; false&#65292;&#22240;&#20026;&#19968;&#20010;&#20989;&#25968;&#35201;&#25226;&#22312; master &#19978;&#25191;&#34892;&#65292;&#35201;&#19981;&#20877;&#24037;&#25511;&#26426;&#19978;&#25191;&#34892;&#65292;&#19981;&#33021;&#21516;&#26102;&#20026; true&#65288;&#25110;&#32773; false&#65289;&#12290;&#23427;&#30340;&#23454;&#29616;&#20195;&#30721;&#20063;&#39047;&#20026;&#31616;&#21333;&#65306;<code class="sourceCode cpp"><span class="kw">return</span> Bundle::whoAmI() == wss.value( tid );</code>&#65292;&#20854;&#20013; wss &#23384;&#20648;&#20102;&#27880;&#20876;&#20449;&#24687;&#65292;&#20063;&#23601;&#26159;&#19968;&#20010;&#27169;&#22359;&#21040;&#24213;&#26159;&#35201;&#22312;&#24037;&#25511;&#26426;&#65292;&#36824;&#26159;&#39640;&#24615;&#33021;&#19978;&#36816;&#34892;&#12290;doItYourself &#30340;&#21442;&#25968;&#26159; BCD::TypeId tid&#65292;&#23601;&#26159;&#19968;&#20010;&#27169;&#22359;&#30340;&#32534;&#21495;&#12290;&#36825;&#20010;&#22312;&#26085;&#24535;&#27169;&#22359;&#37027;&#19968;&#37096;&#20998;&#35762;&#36807;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="kw">namespace</span> BCD {
<span class="co">// types</span>
<span class="kw">enum</span> TypeID {
    TYPE_ARM,       <span class="co">// &#23545;&#24212; BCD::ARM::...</span>
    TYPE_IMU,       <span class="co">// &#23545;&#24212; BCD::IUM::...</span>
    TYPE_LMS,       <span class="co">// ...</span>
    TYPE_MCU,
    TYPE_UR,
    ...
};
...
}</code></pre></div>
<p>&#19968;&#20010;&#20256;&#24863;&#22120;&#35201;&#27880;&#20876;&#21040; Master &#25110;&#32773; Slave&#65292;&#22312; moderator.cpp &#37324;&#26377;&#23454;&#29616;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">const</span> Moderator::WhichSide Moderator::wss = Moderator::initWhichSides( );
Moderator::WhichSide Moderator::initWhichSides( )
{
    WhichSide wss;
    <span class="co">// Master: &#39640;&#24615;&#33021;&#24179;&#21488;</span>
    <span class="co">// Slave : &#24037;&#25511;&#26426;</span>
    wss.insert(  BCD::TYPE_SERVER,                  SLAVE           );
    wss.insert(  BCD::TYPE_CLIENT,                          MASTER  );
    wss.insert(  BCD::TYPE_LMS,                             MASTER  );
    wss.insert(  BCD::TYPE_MCU,                             MASTER  );
    wss.insert(  BCD::TYPE_UR,                      SLAVE           );
    wss.insert(  BCD::TYPE_ARM,                     SLAVE           );
    wss.insert(  BCD::TYPE_SP20000C,                        MASTER  );
    wss.insert(  BCD::TYPE_MULTIPLICATION_ON_SLAVE, SLAVE           );
    wss.insert(  BCD::TYPE_ADDITION_ON_MASTER,              MASTER  );

    <span class="kw">return</span> wss;
}</code></pre></div></li>
<li><p>&#20989;&#25968;&#30340;&#24207;&#21015;&#21270;&#65292;&#38656;&#35201;&#23558;&#20989;&#25968;&#21517;&#27880;&#20876;&#65292;&#24182;&#21644;&#26412;&#22320;&#20989;&#25968;&#32465;&#23450;&#65292;<code>enum CrossType { ... }</code> &#20570;&#30340;&#23601;&#26159;&#20989;&#25968;&#21517;&#27880;&#20876;&#30340;&#24037;&#20316;&#65292;&#23427;&#37324;&#38754;&#30340;&#27599;&#19968;&#20010;&#26631;&#24535;&#37117;&#23545;&#24212;&#19968;&#20010;&#20989;&#25968;&#65292;&#27604;&#22914; <code>GEN_LMS__START__QINT64</code> &#23601;&#23545;&#24212; <code>static QByteArray genLMS_start( const qint64 &amp;dt = 0 )</code>&#65292;<code>GEN_LMS__STOP__VOID</code> &#23601;&#23545;&#24212; <code>static QByteArray genLMS_stop( )</code>&#12290;</p>
<p>&#36825;&#19977;&#20010;&#20989;&#25968;&#30340;&#23454;&#29616;&#25918;&#22312;&#36825;&#37324;&#65292;&#20197;&#20570;&#21442;&#32771;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp">&#20026;&#20102;&#20943;&#23569;&#36755;&#20837;&#37327;&#65292;TX_OUT &#26159;&#19968;&#20010;&#23439;&#65288;&#22312;&#36890;&#20449;&#39046;&#22495;&#65292;TX &#36890;&#24120;&#25351;&#30340;&#26159; transmission&#65289;
<span class="ot">#define TX_OUT </span>\
<span class="ot">    QByteArray tx; </span>\
<span class="ot">    QDataStream out( &amp;tx, QIODevice::WriteOnly ); </span>\
<span class="ot">    out.setVersion( QDataStream::Qt_4_8 ); </span>\
<span class="ot">    out</span>

<span class="ot">QByteArray</span> Moderator::genLMS_start( <span class="dt">const</span> <span class="dt">qint64</span> &amp;dt <span class="co">/*= 0 */</span> )
{
    TX_OUT &lt;&lt; (<span class="dt">int</span>)GEN_LMS__START__QINT64 &lt;&lt; dt;
    <span class="kw">return</span> tx;
}

<span class="ot">QByteArray</span> Moderator::genLMS_stop( )
{
    TX_OUT &lt;&lt; (<span class="dt">int</span>)GEN_LMS__STOP__VOID;
    <span class="kw">return</span> tx;
}

<span class="ot">QByteArray</span> Moderator::genUnit_setUrPose( <span class="dt">double</span> x, <span class="dt">double</span> y, <span class="dt">double</span> z, <span class="dt">double</span> rx, <span class="dt">double</span> ry, <span class="dt">double</span> rz )
{
    TX_OUT &lt;&lt; (<span class="dt">int</span>) GEN_UNIT__SET_UR_POSE__DOUBLE_DOUBLE_DOUBLE_DOUBLE_DOUBLE_DOUBLE
           &lt;&lt; x &lt;&lt; y &lt;&lt; z &lt;&lt; rx &lt;&lt; ry &lt;&lt; rz;
    <span class="kw">return</span> tx;
}</code></pre></div>
<p>&#20854;&#23454;&#23601;&#26159;&#25226;&#20989;&#25968;&#30340;&#26631;&#24535;&#21495;&#21644;&#21442;&#25968;&#19968;&#19968;&#24207;&#21015;&#21270;&#12290;</p></li>
<li><p>dispatch &#20989;&#25968;&#65292;&#23601;&#26159;&#25910;&#21040;&#21453;&#24207;&#21015;&#21270;&#20026;&#19968;&#20010;&#25805;&#20316;&#65292;&#28982;&#21518;&#22914;&#20309;&#35843;&#29992;&#20855;&#20307;&#30340;&#27169;&#22359;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">void</span> Moderator::dispatch( <span class="ot">QByteArray</span> &amp;msg )
{
    <span class="dt">int</span> flag( <span class="dv">-1</span> );

    <span class="ot">QDataStream</span> in( &amp;msg, <span class="ot">QIODevice::</span>ReadOnly );
    in.setVersion ( <span class="ot">QDataStream::</span>Qt_4_8 );

    <span class="kw">while</span> ( !in.atEnd() ) {
        in &gt;&gt; flag;

        <span class="kw">if</span> ( <span class="kw">false</span> ) {
        }
        ...
        <span class="kw">else</span> <span class="kw">if</span> ( GEN_LMS__START__QINT64 == flag )
        {
            <span class="dt">qint64</span> ts;
            in &gt;&gt; ts;
            <span class="kw">if</span> ( Bundle::activated() &amp;&amp; Bundle::whoAmI() == SLAVE ) {
                Bundle::getInstance()-&gt;m_LMSReader-&gt;start( ts );
            }
        }
        <span class="kw">else</span> <span class="kw">if</span> ( GEN_LMS__STOP__VOID == flag )
        {
            <span class="kw">if</span> ( Bundle::activated() &amp;&amp; Bundle::whoAmI() == SLAVE ) {
                Bundle::getInstance()-&gt;m_LMSReader-&gt;stop();
            }
        }
        ...
        <span class="kw">else</span> <span class="kw">if</span> ( GEN_UNIT__SET_UR_POSE__DOUBLE_DOUBLE_DOUBLE_DOUBLE_DOUBLE_DOUBLE == flag )
        {
            <span class="dt">double</span> x, y, z, rx, ry, rz;
            in &gt;&gt; x &gt;&gt; y &gt;&gt; z &gt;&gt; rx &gt;&gt; ry &gt;&gt; rz;
            <span class="kw">if</span> ( Bundle::activated() &amp;&amp; Bundle::whoAmI() == SLAVE ) {
                <span class="co">// config ur pose</span>
                <span class="kw">if</span> ( Bundle::getInstance() &amp;&amp; Bundle::getInstance()-&gt;collectionUnit ) {
                    Bundle::getInstance()-&gt;setURPose( x, y, z, rx, ry, rz );
                }
            }
        }
        <span class="kw">else</span>
        {
        }
    }
}</code></pre></div></li>
</ol>
<p>&#33267;&#27492;&#65292;&#38382;&#39064;&#37117;&#35299;&#20915;&#20102;&#12290;</p>
<hr />
<p><a href="post-0119-changsha-review-6.html" style="font-size:80%; color: red;" title="post-0119-changsha-review-6.md">&#12304;&#19979;&#19968;&#33410;&#65306;&#38271;&#27801;&#39033;&#30446;&#24635;&#32467; 6 &#8211; &#24635;&#32467;&#65306;&#25910;&#33719;&#19982;&#19981;&#36275;&#12305;</a></p>
<ul class="tzx-tags-group">
<li><a class="tzx-tag" href="tags.html/#review">review</a></li>
<li><a class="tzx-tag" href="tags.html/#project">project</a></li>
</ul>

<div class="tzx-changes"><select id="tzx-changes" title="&#21382;&#21490;&#29256;&#26412;">
<option value="https://raw.githubusercontent.com/district10/blog/58d3d3880db6ca3930e48156b2a0339ab4f5351a/_posts/post-0118-changsha-review-5.md" title="2 insertions(+), 2 deletions(-)">1578505724</option>
<option value="https://raw.githubusercontent.com/district10/blog/503e511788e741cf3ef0f32f8894bf9b83c6206b/_posts/post-0118-changsha-review-5.md" title="232 insertions(+), 0 deletions(-)">1504105630</option>
</select></div>

<script>
var tzxFilename = "_posts/post-0118-changsha-review-5.md";
var tzxChanges = [
    {
        hash: "58d3d3880db6ca3930e48156b2a0339ab4f5351a",
        datetime: "1578505724",
        insertions: 2,
        deletions: 2
    },
    {
        hash: "503e511788e741cf3ef0f32f8894bf9b83c6206b",
        datetime: "1504105630",
        insertions: 232,
        deletions: 0
    },
];
</script>

<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="jquery-ui.min.js"></script>
<script type="text/javascript" src="clappr.min.js"></script>
<script type="text/javascript" src="lazyload.min.js"></script>
<script type="text/javascript" src="egg.min.js"></script>
<script type="text/javascript" src="moment.min.js"></script>
<script type="text/javascript" src="clipboard.min.js"></script>
<script type="text/javascript" src="main.js"></script>
<hr style="color: #9ddcff;"/>
<div id="copyright">TANG ZhiXiong, 2018.  Generated by Pandoc on Travis CI. <a  href="https://github.com/district10/blog">Fork Me on GitHub.</a></div>
<div id="comments" class="comments-area"></div>

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: '010a49f90ea2dacb0963',
        clientSecret: '38512e4e4da431fc61d44508ed53f9fe6eb7f29f',
        repo: 'blog',
        owner: 'district10',
        admin: ['district10'],
        id: window.location.pathname,
    });
gitalk.render('comments');
</script>

</body>
</html>
