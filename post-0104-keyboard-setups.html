<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="generator" content="pandoc" />
  <meta name="author" content="TANG ZhiXiong; dvorak4tzx; district10" />
  <meta name="date" content="2016-05-12" />
  <title>Keyboard Setups</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="jquery-ui.css" type="text/css" />
  <link rel="stylesheet" href="font-awesome.min.css" type="text/css" />
  <link rel="stylesheet" href="main.css" type="text/css" />
</head>
<body>
<div id="header">
<h1 class="title">Keyboard Setups</h1>
<h3 class="date">2016-05-12</h3>
</div>
<div id="tocbox" class="pokerface">
    <div id="tocboxheader">&#xf03b;</div>
    <div id="tocboxbody">
        <ul>
        <li><a href="#keyboard-setups">Keyboard Setups</a><ul>
        <li><a href="#tty-loadkeys">tty: <code>loadkeys</code></a></li>
        <li><a href="#x-window-xmodmap-or-setxkbmap">x window: <code>xmodmap</code>, or <code>setxkbmap</code></a></li>
        </ul></li>
        </ul>
    </div>
</div>
<div id="navigator" class="pokerface"><a id="gotoindex" href="index.html" title="&#25353;&#19979;&#12304;h&#12305;&#33719;&#21462;&#39029;&#38754;&#24110;&#21161;&#12290;">&#xf015;</a></div>
<h1 id="keyboard-setups">Keyboard Setups</h1>
<h2 id="tty-loadkeys">tty: <code>loadkeys</code></h2>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># mkdir -p /usr/local/share/kbd/keymaps</span>
<span class="kw">vim</span> /usr/local/share/kbd/keymaps/personal.map</code></pre></div>
<p>tty: <code>loadkeys</code></p>
<p><code>man keymaps</code> <a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a></p>
<h2 id="x-window-xmodmap-or-setxkbmap">x window: <code>xmodmap</code>, or <code>setxkbmap</code></h2>
<p>refs and see also</p>
<ul>
<li><a href="https://wiki.archlinux.org/index.php/Extra_keyboard_keys_in_console">Extra keyboard keys in console - ArchWiki</a></li>
</ul>
<p><a href="http://tangzhixiong.com/kbd/" class="uri">http://tangzhixiong.com/kbd/</a></p>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>keymaps - keyboard table descriptions for loadkeys and dumpkeys</p>
<pre><code>KEYMAPS(5)                                     File Formats Manual                                    KEYMAPS(5)

NAME
       keymaps - keyboard table descriptions for loadkeys and dumpkeys

DESCRIPTION
       These  files  are used by loadkeys(1) to modify the translation tables used by the kernel keyboard driver
       and generated by dumpkeys(1) from those translation tables.

       The format of these files is vaguely similar to the one accepted by xmodmap(1).   The  file  consists  of
       charset or key or string definition lines interspersed with comments.

       Comments  are  introduced with !  or # characters and continue to the end of the line. Anything following
       one of these characters on that line is ignored. Note that comments need not begin  from  column  one  as
       with xmodmap(1).

       The  syntax  of  keymap  files is line oriented; a complete definition must fit on a single logical line.
       Logical lines can, however, be split into multiple physical lines by ending each subline with  the  back&#8208;
       slash character (\).

INCLUDE FILES
       A keymap can include other keymaps using the syntax

              include &quot;pathname&quot;

CHARSET DEFINITIONS
       A character set definition line is of the form:

              charset &quot;iso-8859-x&quot;

       It  defines  how  following  keysyms are to be interpreted.  For example, in iso-8859-1 the symbol mu (or
       micro) has code 0265, while in iso-8859-7 the letter mu has code 0354.

COMPLETE KEYCODE DEFINITIONS
       Each complete key definition line is of the form:

              keycode keynumber = keysym keysym keysym...

       keynumber is the internal identification number of the key, roughly equivalent to the scan  code  of  it.
       keynumber can be given in decimal, octal or hexadecimal notation.  Octal is denoted by a leading zero and
       hexadecimal by the prefix 0x.

       Each of the keysyms represent keyboard actions, of which up to 256 can be bound  to  a  single  key.  The
       actions  available  include  outputting  character  codes  or  character sequences, switching consoles or
       keymaps, booting the machine etc. (The complete list can be obtained from dumpkeys(1) by saying  dumpkeys
       -l .)

       Each  keysym  may be prefixed by a &#39;+&#39; (plus sign), in wich case this keysym is treated as a &quot;letter&quot; and
       therefore affected by the &quot;CapsLock&quot; the same way as by &quot;Shift&quot; (to be correct, the CapsLock inverts  the
       Shift  state).  The ASCII letters (&#39;a&#39;-&#39;z&#39; and &#39;A&#39;-&#39;Z&#39;) are made CapsLock&#39;able by default.  If Shift+Cap&#8208;
       sLock should not produce a lower case symbol, put lines like

              keycode 30 = +a  A

       in the map file.

       Which of the actions bound to a given key is taken when it is pressed depends on what  modifiers  are  in
       effect at that moment.  The keyboard driver supports 9 modifiers. These modifiers are labeled (completely
       arbitrarily) Shift, AltGr, Control, Alt, ShiftL, ShiftR, CtrlL, CtrlR and CapsShift.  Each of these modi&#8208;
       fiers has an associated weight of power of two according to the following table:

              modifier                weight

              Shift
                                        1
              AltGr
                                        2
              Control
                                        4
              Alt
                                        8
              ShiftL
                                       16
              ShiftR
                                       32
              CtrlL
                                       64
              CtrlR                   128
              CapsShift               256

       The  effective  action  of a key is found out by adding up the weights of all the modifiers in effect. By
       default, no modifiers are in effect, so action number zero, i.e. the one in the first  column  in  a  key
       definition  line,  is taken when the key is pressed or released. When e.g. Shift and Alt modifiers are in
       effect, action number nine (from the 10th column) is the effective one.

       Changing the state of what modifiers are in effect can be achieved by binding appropriate key actions  to
       desired  keys. For example, binding the symbol Shift to a key sets the Shift modifier in effect when that
       key is pressed and cancels the effect of that modifier when the key is released. Binding AltGr_Lock to  a
       key  sets  AltGr  in effect when the key is pressed and cancels the effect when the key is pressed again.
       (By default Shift, AltGr, Control and Alt are bound to the keys that bear  a  similar  label;  AltGr  may
       denote the right Alt key.)

       Note  that  you  should  be very careful when binding the modifier keys, otherwise you can end up with an
       unusable keyboard mapping. If you for example define a key to have Control in its first column and  leave
       the  rest of the columns to be VoidSymbols, you&#39;re in trouble. This is because pressing the key puts Con&#8208;
       trol modifier in effect and the following actions are looked up from the  fifth  column  (see  the  table
       above). So, when you release the key, the action from the fifth column is taken. It has VoidSymbol in it,
       so nothing happens. This means that the Control modifier is still in effect, although you  have  released
       the  key.   Re-pressing  and releasing the key has no effect. To avoid this, you should always define all
       the columns to have the same modifier symbol. There is a handy short-hand notation for this, see below.

       keysyms can be given in decimal, octal, hexadecimal, unicode or symbolic notation.  The numeric notations
       use  the  same  format  as with keynumber.  Unicode notation is &quot;U+&quot; followed by four hexadecimal digits.
       The symbolic notation resembles that used by xmodmap(1).  Notable differences are the number symbols. The
       numeric  symbols &#39;0&#39;, ..., &#39;9&#39; of xmodmap(1) are replaced with the corresponding words &#39;zero&#39;, &#39;one&#39;, ...
       &#39;nine&#39; to avoid confusion with the numeric notation.

       It should be noted that using numeric notation for the keysyms is highly unportable  as  the  key  action
       numbers  may  vary  from  one kernel version to another and the use of numeric notations is thus strongly
       discouraged. They are intended to be used only when you know there is a supported keyboard action in your
       kernel for which your current version of loadkeys(1) has no symbolic name.

       There  is  a number of short-hand notations to add readability and reduce typing work and the probability
       of typing-errors.

       First of all, you can give a map specification line, of the form

              keymaps 0-2,4-5,8,12

       to indicate that the lines of the keymap will not specify all 256 columns, but only the  indicated  ones.
       (In the example: only the plain, Shift, AltGr, Control, Control+Shift, Alt and Control+Alt maps, that is,
       7 columns instead of 256.)  When no such line is given, the keymaps 0-M will be defined, where M+1 is the
       maximum number of entries found in any definition line.

       Next,  you can leave off any trailing VoidSymbol entries from a key definition line. VoidSymbol denotes a
       keyboard action which produces no output and has no other effects either. For example, to define key num&#8208;
       ber  30  to  output  &#39;a&#39; unshifted, &#39;A&#39; when pressed with Shift and do nothing when pressed with AltGr or
       other modifiers, you can write

              keycode  30 = a     A

       instead of the more verbose

              keycode  30 = a     A    VoidSymbol     VoidSymbol \
                        VoidSymbol VoidSymbol VoidSymbol ...

       For added convenience, you can usually get off with still more terse definitions. If you enter a key def&#8208;
       inition  line  with  only and exactly one action code after the equals sign, it has a special meaning. If
       the code (numeric or symbolic) is not an ASCII letter, it means the code is implicitly replicated through
       all  columns  being  defined.   If, on the other hand, the action code is an ASCII character in the range
       &#39;a&#39;, ..., &#39;z&#39; or &#39;A&#39;, ..., &#39;Z&#39; in the ASCII collating sequence, the following definitions  are  made  for
       the different modifier combinations, provided these are actually being defined.  (The table lists the two
       possible cases: either the single action code is a lower case letter, denoted by &#39;x&#39;  or  an  upper  case
       letter, denoted by &#39;Y&#39;.)

           modifier                symbol

           none                    x              Y
           Shift                   X              y
           AltGr                   x              Y
           Shift+AltGr             X              y
           Control                 Control_x      Control_y
           Shift+Control           Control_x      Control_y
           AltGr+Control           Control_x      Control_y
           Shift+AltGr+Control     Control_x      Control_y
           Alt                     Meta_x         Meta_Y
           Shift+Alt               Meta_X         Meta_y
           AltGr+Alt               Meta_x         Meta_Y
           Shift+AltGr+Alt         Meta_X         Meta_y
           Control+Alt             Meta_Control_x Meta_Control_y
           Shift+Control+Alt       Meta_Control_x Meta_Control_y
           AltGr+Control+Alt       Meta_Control_x Meta_Control_y
           Shift+AltGr+Control+Alt Meta_Control_x Meta_Control_y

SINGLE MODIFIER DEFINITIONS
       All  the  previous forms of key definition lines always define all the M+1 possible modifier combinations
       being defined, whether the line actually contains that many action codes or not.  There  is,  however,  a
       variation  of the definition syntax for defining only single actions to a particular modifier combination
       of a key. This is especially useful, if you load a keymap which doesn&#39;t match your  needs  in  only  some
       modifier  combinations,  like  AltGr+function  keys. You can then make a small local file redefining only
       those modifier combinations and loading it after the main file.  The syntax of this form is:

       { plain | &lt;modifier sequence&gt; } keycode keynumber = keysym

       , e.g.,
              plain keycode 14 = BackSpace
              control alt keycode 83 = Boot
              alt keycode 105 = Decr_Console
              alt keycode 106 = Incr_Console
       Using &quot;plain&quot; will define only the base entry of a key (i.e. the one with no modifiers in effect) without
       affecting the bindings of other modifier combinations of that key.

STRING DEFINITIONS
       In addition to comments and key definition lines, a keymap can contain string definitions. These are used
       to define what each function key action code sends. The syntax of string definitions is:

              string keysym = &quot;text&quot;

       text can contain literal characters, octal character codes in the format of backslash followed by  up  to
       three  octal  digits,  and  the  three escape sequences \n, \\, and \&quot;, for newline, backslash and quote,
       respectively.

COMPOSE DEFINITIONS
       Then there may also be compose definitions. They have syntax

              compose &#39;char&#39; &#39;char&#39; to &#39;char&#39;
       and describe how two bytes are combined to form a third one (when a dead accent or compose key is  used).
       This is used to get accented letters and the like on a standard keyboard.

ABBREVIATIONS
       Various abbreviations can be used with kbd-0.96 and later.

       strings as usual
              Defines the usual values of the strings (but not the keys they are bound to).

       compose as usual for &quot;iso-8859-1&quot;
              Defines the usual compose combinations.

       To find out what keysyms there are available for use in keymaps, use the command

              dumpkeys --long-info

       Unfortunately,  there is currently no description of what each symbol does. It has to be guessed from the
       name or figured out from the kernel sources.

EXAMPLES
       (Be careful to use a keymaps line, like the first line of `dumpkeys`, or &quot;keymaps 0-15&quot; or so.)

       The following entry exchanges the left Control key and the Caps Lock key on the keyboard:

              keycode  58 = Control
              keycode  29 = Caps_Lock

       Key number 58 is normally the Caps Lock key, and key number 29 is normally the Control key.

       The following entry sets the Shift and Caps Lock keys to behave more nicely, like in  older  typewriters.
       That  is,  pressing Caps Lock key once or more sets the keyboard in CapsLock state and pressing either of
       the Shift keys releases it.

              keycode  42 = Uncaps_Shift
              keycode  54 = Uncaps_Shift
              keycode  58 = Caps_On

       The following entry sets the layout of the edit pad in the enhanced keyboard to be more like that in  the
       VT200 series terminals:

              keycode 102 = Insert
              keycode 104 = Remove
              keycode 107 = Prior
              shift keycode 107 = Scroll_Backward
              keycode 110 = Find
              keycode 111 = Select
              control alt   keycode 111 = Boot
              control altgr keycode 111 = Boot

       Here&#39;s  an  example to bind the string &quot;du\ndf\n&quot; to the key AltGr-D. We use the &quot;spare&quot; action code F100
       not normally bound to any key.

              altgr keycode 32 = F100
              string F100 = &quot;du\ndf\n&quot;

SEE ALSO
       loadkeys(1), dumpkeys(1), showkey(1), xmodmap(1)

                                                  24 April 1998                                       KEYMAPS(5)</code></pre>
<a href="#fnref1">&#8617;</a></li>
</ol>
</div>
<ul class="tzx-tags-group">
<li><a class="tzx-tag" href="tags.html/#keyboard">keyboard</a></li>
</ul>

<div class="tzx-changes"><select id="tzx-changes" title="&#21382;&#21490;&#29256;&#26412;">
<option value="https://raw.githubusercontent.com/district10/blog/503e511788e741cf3ef0f32f8894bf9b83c6206b/_posts/post-0104-keyboard-setups.md" title="295 insertions(+), 0 deletions(-)">1504105630</option>
</select></div>

<script>
var tzxFilename = "_posts/post-0104-keyboard-setups.md";
var tzxChanges = [
    {
        hash: "503e511788e741cf3ef0f32f8894bf9b83c6206b",
        datetime: "1504105630",
        insertions: 295,
        deletions: 0
    },
];
</script>

<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="jquery-ui.min.js"></script>
<script type="text/javascript" src="clappr.min.js"></script>
<script type="text/javascript" src="lazyload.min.js"></script>
<script type="text/javascript" src="egg.min.js"></script>
<script type="text/javascript" src="moment.min.js"></script>
<script type="text/javascript" src="clipboard.min.js"></script>
<script type="text/javascript" src="main.js"></script>
<hr style="color: #9ddcff;"/>
<div id="copyright">TANG ZhiXiong, 2018.  Generated by Pandoc on Travis CI. <a  href="https://github.com/district10/blog">Fork Me on GitHub.</a></div>
<div id="comments" class="comments-area"></div>

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: '010a49f90ea2dacb0963',
        clientSecret: '38512e4e4da431fc61d44508ed53f9fe6eb7f29f',
        repo: 'blog',
        owner: 'district10',
        admin: ['district10'],
        id: window.location.pathname,
    });
gitalk.render('comments');
</script>

</body>
</html>
