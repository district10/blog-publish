<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="generator" content="pandoc" />
  <meta name="author" content="TANG ZhiXiong; dvorak4tzx; district10" />
  <meta name="date" content="2014-02-22" />
  <meta name="keywords" content="pca, kl transform" />
  <title>KL Transform | &#20027;&#20998;&#37327;&#21464;&#25442;</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="jquery-ui.css" type="text/css" />
  <link rel="stylesheet" href="font-awesome.min.css" type="text/css" />
  <link rel="stylesheet" href="main.css" type="text/css" />
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
</head>
<body>
<div id="header">
<h1 class="title">KL Transform | &#20027;&#20998;&#37327;&#21464;&#25442;</h1>
<h3 class="date">2014-02-22</h3>
</div>
<div id="tocbox" class="pokerface">
    <div id="tocboxheader">&#xf03b;</div>
    <div id="tocboxbody">
        <ul>
        <li><a href="#kl-transform-&#20027;&#20998;&#37327;&#21464;&#25442;">KL Transform | &#20027;&#20998;&#37327;&#21464;&#25442;</a></li>
        </ul>
    </div>
</div>
<div id="navigator" class="pokerface"><a id="gotoindex" href="index.html" title="&#25353;&#19979;&#12304;h&#12305;&#33719;&#21462;&#39029;&#38754;&#24110;&#21161;&#12290;">&#xf015;</a></div>
<h1 id="kl-transform-&#20027;&#20998;&#37327;&#21464;&#25442;">KL Transform | &#20027;&#20998;&#37327;&#21464;&#25442;</h1>
<p>KL &#21464;&#25442;&#21363; Karhunen-Lo&#232;ve Transform&#65292;&#26159;&#19968;&#31181;&#36873;&#21462;&#20027;&#35201;&#20998;&#37327;&#65292;&#21076;&#38500;&#20887;&#20313;&#25968;&#25454;&#30340;&#21464;&#25442;&#25805;&#20316;&#65292;&#20854;&#23454;&#20063;&#23601;&#26159;&#19968;&#31181; PCA&#65288;&#20027;&#20998;&#37327;&#65288;Principal component&#65289;&#21464;&#25442;&#65289;&#12290;KL &#21464;&#25442;&#26102;&#22823;&#19977;&#26102;&#27169;&#24335;&#35782;&#21035;&#35838;&#31243;&#19978;&#23398;&#20064;&#30340;&#19968;&#20010;&#31639;&#27861;&#12290;&#25105;&#20351;&#29992;&#20102; Eigen &#24211;&#22312; Linux &#19979;&#23454;&#29616;&#65292;&#32780;&#19981;&#26159;&#20687;&#22823;&#22810;&#25968;&#20154;&#37027;&#26679;&#29992; Matlab&#12290;&#22909;&#22788;&#26159;&#25105;&#21487;&#20197;&#32487;&#32493;&#21943;&#8220;Windows sucks&#8221;&#12289;&#8220;Matlab &#23601;&#36825;&#26679;&#36824;&#35201;&#38065;&#65311;&#8221;&#65288;&#21407;&#35845;&#25105;&#37027;&#26102;&#24858;&#34850;&#32780;&#20559;&#28608;&#65289;&#65292;&#22351;&#22788;&#26159;&#21035;&#20154;&#37117;&#24456;&#24555;&#20889;&#20986;&#26469;&#29992; KL &#21464;&#25442;&#22788;&#29702; RGB &#22270;&#29255;&#29983;&#25104;&#32454;&#33410;&#23436;&#32654;&#30340;&#28784;&#24230;&#22270;&#30340; matlab &#20195;&#30721;&#65292;&#32780;&#25105;&#30340; c++ &#31243;&#24207;&#37027;&#26102;&#20505;&#21482;&#33021;&#22788;&#29702;&#25968;&#32452;&#8230;&#8230;</p>
<div class="figure">
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f5/GaussianScatterPCA.svg/220px-GaussianScatterPCA.svg.png" alt="&#38271;&#36724;&#19978;&#25968;&#25454;&#26356;&#20998;&#25955;&#65292;&#23545;&#25968;&#25454;&#21306;&#20998;&#24230;&#26356;&#22823;&#12290;KL &#21464;&#25442;&#30340;&#30446;&#30340;&#23601;&#26159;&#25214;&#21040;&#38271;&#36724;&#65292;&#24573;&#30053;&#30701;&#36724;&#65292;&#29992;&#26356;&#23569;&#30340;&#32500;&#24230;&#36817;&#20284;&#22320;&#34920;&#36798;&#21407;&#26469;&#30340;&#20449;&#24687;&#12290;" />
<p class="caption">&#38271;&#36724;&#19978;&#25968;&#25454;&#26356;&#20998;&#25955;&#65292;&#23545;&#25968;&#25454;&#21306;&#20998;&#24230;&#26356;&#22823;&#12290;KL &#21464;&#25442;&#30340;&#30446;&#30340;&#23601;&#26159;&#25214;&#21040;&#38271;&#36724;&#65292;&#24573;&#30053;&#30701;&#36724;&#65292;&#29992;&#26356;&#23569;&#30340;&#32500;&#24230;&#8220;&#36817;&#20284;&#22320;&#8221;&#34920;&#36798;&#21407;&#26469;&#30340;&#20449;&#24687;&#12290;</p>
</div>
<p>&#20026;&#20102;&#19981;&#36755;&#24471;&#37027;&#20040;&#24808;&#65292;&#25105;&#36824;&#19987;&#38376; contrive &#20102;&#19968;&#20010; demo &#25968;&#25454;&#65292;&#29992;&#26469;&#23637;&#31034;&#25105;&#8220;&#30772;&#28866;&#8221;&#30340; c++ &#20195;&#30721;&#30830;&#23454;&#33021;&#22815;&#21306;&#20998;&#20027;&#20998;&#37327;&#65292;&#23601;&#20687;&#36825;&#26679;&#65306;</p>
<div class="figure">
<img src="http://gnat.qiniudn.com/tmp/kltransform.png" alt="&#22312; Linux &#19979;&#36816;&#34892;&#25928;&#26524;&#65288;&#24403;&#26102;&#36824;&#19981;&#33021;&#22788;&#29702;&#22270;&#29255;&#65289;" />
<p class="caption">&#22312; Linux &#19979;&#36816;&#34892;&#25928;&#26524;&#65288;&#24403;&#26102;&#36824;&#19981;&#33021;&#22788;&#29702;&#22270;&#29255;&#65289;</p>
</div>
<p>&#22270;&#29255;&#26377;&#28857;&#23567;&#65292;&#25918;&#22823;&#28857;&#30475;&#8230;&#8230;</p>
<div class="figure">
<img src="http://whudoc.qiniudn.com/2016/kltransform2.png" />

</div>
<p>&#21487;&#20197;&#30475;&#21040;&#20854;&#23454;&#25105;&#26159;&#20808;&#29992; gcc &#32534;&#35793;&#20102;&#20195;&#30721;&#65292;&#28982;&#21518;&#36816;&#34892;&#65292;&#25105;&#30606;&#25520;&#30340;&#21407;&#22987;&#25968;&#25454;&#26159;&#19968;&#20010;&#20108;&#32500;&#25968;&#32452;&#65288;&#35265;&#8220;the original data&#8221;&#65289;&#65292;&#27599;&#19968;&#21015;&#26159;&#19968;&#20010;&#26679;&#26412;&#25968;&#25454;&#12290;&#21487;&#20197;&#30475;&#21040;&#65292;&#25968;&#25454;&#38598;&#30340;&#26368;&#21518;&#19968;&#34892;&#20840;&#26159;&#38646;&#65292;&#26159;&#20887;&#20313;&#25968;&#25454;&#65288;&#20063;&#23601;&#26159;&#35828;&#26679;&#26412;&#22312;&#26368;&#21518;&#19968;&#20010;&#32500;&#24230;&#19978;&#23436;&#20840;&#27809;&#26377;&#21306;&#20998;&#24230;&#65289;&#65292;&#29702;&#35770;&#19978; kl &#21464;&#25442;&#20043;&#21518;&#26368;&#21518;&#19968;&#20010;&#32500;&#24230;&#24212;&#35813;&#34987;&#33293;&#21435;&#12290;</p>
<p>&#36890;&#36807; Eigen &#24211;&#25903;&#25745;&#19979;&#25105;&#24378;&#22823;&#30340; c++ &#31243;&#24207;&#21518;&#65292;&#25968;&#25454;&#25104;&#21151;&#30340;&#21076;&#38500;&#20102;&#26368;&#21518;&#19968;&#20010;&#32500;&#24230;&#65292;&#20320;&#21487;&#20197;&#30475;&#21040;&#21464;&#25442;&#30697;&#38453;&#26368;&#21518;&#19968;&#21015;&#20840;&#26159; 0&#65288;&#35265;&#8220;The Transpose matrix&#8221;&#65289;&#65292;&#36825;&#23601;&#23545;&#21862;&#65281;&#34429;&#28982;&#19981;&#33021;&#22788;&#29702;&#22270;&#20687;&#65292;&#20294;&#33267;&#23569; kl &#21464;&#25442;&#26159;&#26377;&#20102;&#12290;</p>
<p>&#20195;&#30721;&#20854;&#23454;&#19981;&#22810;&#65292;&#25105;&#24178;&#33030;&#36148;&#36807;&#26469;&#25226;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="co">/* Pattern Classification homework</span>
<span class="co"> *</span>
<span class="co"> * Algorithm: Karhunen-Loeve Transform</span>
<span class="co"> *</span>
<span class="co"> * Notice: You need Eigen library, and a compiler with support of c++0x</span>
<span class="co"> *</span>
<span class="co"> * Compile it use something like this:</span>
<span class="co"> *    g++ -std=c++0x -I/YOUR/EIGEN/LIB/PATH kl_transform.cpp -o kl_transform</span>
<span class="co"> *    (at least g++ version 4.7)</span>
<span class="co"> *</span>
<span class="co"> * Author: Tang Zhixiong</span>
<span class="co"> * Contact me at:  gnat_tang@yeah.net</span>
<span class="co"> */</span>

<span class="ot">#include &lt;Eigen/Eigenvalues&gt;</span>
<span class="ot">#include &lt;Eigen/Dense&gt;</span>
<span class="ot">#include &lt;iostream&gt;</span>
<span class="ot">#include &lt;cassert&gt;</span>
<span class="ot">#include &lt;map&gt;</span>

<span class="kw">using</span> <span class="kw">namespace</span> std;
<span class="kw">using</span> <span class="kw">namespace</span> Eigen;

<span class="co">///</span> MatrixXcf -&gt; MatrixXf
MatrixXf getRealPart(<span class="dt">const</span> MatrixXcf&amp; input);

<span class="co">///</span> Take a square matrix, output a shrinked matrix
MatrixXf kl_transform(<span class="dt">const</span> MatrixXf&amp; square,<span class="dt">int</span> num_shrink);

<span class="dt">int</span> main()
{
  MatrixXf data(<span class="dv">4</span>, <span class="dv">8</span>);
  data &lt;&lt; <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>,
          <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>,
          <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>,
          <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>;

  MatrixXf m = data.rowwise().mean();
  MatrixXf St =
    (data * data.transpose()) / data.cols()
    + m * m.transpose();

  <span class="dt">int</span> num_shrink = <span class="dv">0</span>;
  cout &lt;&lt; <span class="st">&quot;num_shrink:(in this demo, 1 is fine) &quot;</span><span class="co">;</span>
  cin &gt;&gt; num_shrink;

  <span class="kw">auto</span> TransMat =  kl_transform(St, num_shrink);
  cout &lt;&lt; <span class="st">&quot;#################################&quot;</span> &lt;&lt; endl;
  cout &lt;&lt; <span class="st">&quot;The original data: &quot;</span> &lt;&lt; endl
       &lt;&lt; data &lt;&lt; endl &lt;&lt; endl;
  cout &lt;&lt; <span class="st">&quot;The Transpose matrix is : &quot;</span> &lt;&lt; endl
       &lt;&lt; TransMat &lt;&lt; endl &lt;&lt; endl;
  cout &lt;&lt; <span class="st">&quot;After transpose, the sample projected to:  &quot;</span> &lt;&lt; endl
       &lt;&lt; TransMat * data &lt;&lt; endl &lt;&lt; endl;

   cout &lt;&lt; <span class="st">&quot;#################################&quot;</span> &lt;&lt; endl
    &lt;&lt; <span class="st">&quot;Notice that the last row of original data,&quot;</span> &lt;&lt; endl
    &lt;&lt; <span class="st">&quot;ALL 0, that&#39;s redundant!&quot;</span> &lt;&lt; endl
    &lt;&lt; <span class="st">&quot;So the eigenvectors&#39; last coefficiency should be 0,&quot;</span> &lt;&lt; endl
    &lt;&lt; <span class="st">&quot;and they really are!!!&quot;</span> &lt;&lt; endl;
  <span class="kw">return</span> <span class="dv">0</span>;
}

<span class="co">///</span> <span class="er">##################################</span>
<span class="co">///</span> <span class="er">#</span> IMPLEMENTATION
<span class="co">///</span> <span class="er">##################################</span>

MatrixXf getRealPart(<span class="dt">const</span> MatrixXcf&amp; input)
{
  assert( input.cols() == <span class="dv">1</span>
      &amp;&amp; <span class="st">&quot;Forgive me, getRealPart() is not god...&quot;</span><span class="co">)</span>;
  <span class="kw">auto</span> rows = input.rows();
  MatrixXf output(rows, <span class="dv">1</span>);

  <span class="kw">for</span>(size_t i = <span class="dv">0</span>; i &lt; rows; ++i) {
    output.col(<span class="dv">0</span>)[i] = input.col(<span class="dv">0</span>)[i].real();
  }

  <span class="kw">return</span> output;
}

MatrixXf kl_transform(<span class="dt">const</span> MatrixXf&amp; square,<span class="dt">int</span> num_shrink = <span class="dv">1</span>)
{
  <span class="kw">auto</span> rows = square.rows();
  <span class="kw">auto</span> cols = square.cols();
  assert (rows == cols
      &amp;&amp; <span class="st">&quot;kl_transforme take square matrix, ONLY&quot;</span><span class="co">)</span>;
  assert (num_shrink &gt;= <span class="dv">0</span> &amp;&amp; num_shrink &lt; rows
      &amp;&amp; <span class="st">&quot;drop some dementions, but NOT ALL&quot;</span><span class="co"> </span>);

  <span class="kw">auto</span> new_rows = rows - num_shrink;
  <span class="kw">auto</span> new_cols = cols;
  MatrixXf output( new_rows, new_cols );

  EigenSolver&lt;MatrixXf&gt; es(square);
  <span class="kw">auto</span> eigen_values = es.eigenvalues();
  <span class="kw">auto</span> eigen_vectors = es.eigenvectors();

  map&lt;<span class="dt">float</span>, MatrixXcf&gt; projection;
  <span class="kw">for</span>( size_t i = <span class="dv">0</span>; i &lt; rows; ++i) {
    assert (eigen_values[i].imag() == <span class="fl">0.0</span>
        &amp;&amp; <span class="st">&quot;We cant solve problem with imagery part not 0&quot;</span><span class="co">)</span>;
    projection[ eigen_values[i].real() ] =  eigen_vectors.col(i);
  }

  <span class="kw">auto</span> my_end = projection.begin();
  <span class="kw">while</span> ( num_shrink != <span class="dv">0</span> ) {
    ++my_end;
    --num_shrink;
  }
  projection.erase (projection.begin(), my_end); <span class="co">///</span> <span class="kw">delete</span> these muggles
  cout &lt;&lt; <span class="st">&quot;#########################################&quot;</span><span class="co"> </span>&lt;&lt; endl;
  cout &lt;&lt; <span class="st">&quot;After drop &quot;</span><span class="co"> </span>&lt;&lt; rows - new_rows &lt;&lt; <span class="st">&quot; dementions: &quot;</span><span class="co"> </span>&lt;&lt; endl;
  <span class="kw">for</span>(<span class="dt">const</span> <span class="kw">auto</span>&amp; item : projection) {
    <span class="dt">static</span> <span class="dt">int</span> i = <span class="dv">0</span>;
    output.row(i) = getRealPart( item.second ).transpose();
    cout &lt;&lt; <span class="st">&quot;eigen_value: &quot;</span><span class="co"> </span>&lt;&lt; item.first &lt;&lt; <span class="st">&quot; &quot;</span>
     &lt;&lt; <span class="st">&quot;eigen_vector: &quot;</span><span class="co"> </span>&lt;&lt; output.row(i) &lt;&lt; endl;
    ++i;
  }

  <span class="kw">return</span> output;
}</code></pre></div>
<p>&#20854;&#23454;&#22788;&#29702;&#22270;&#20687;&#65292;&#20063;&#23601;&#26159;&#25226; RGB &#19977;&#20010;&#36890;&#36947;&#65292;&#24403;&#22330;&#19977;&#20010;&#32500;&#24230;&#65292;&#25226;&#25152;&#26377;&#30340;&#20687;&#32032;&#20540;&#25172;&#36827;&#21435;&#22788;&#29702;&#65292;&#24182;&#19981;&#27604;&#36825;&#20010;&#25968;&#32452;&#40635;&#28902;&#12290;&#21482;&#35201;&#20320;&#30693;&#36947;&#22914;&#20309; 1&#65289;&#35835;&#21462;&#22270;&#29255;&#65307;2&#65289;&#22270;&#29255;&#36716;&#21270;&#20026;&#25968;&#32452;&#65307; 3&#65289;&#25968;&#32452;&#36716;&#20250;&#25104;&#22270;&#29255;&#12290;&#37027;&#26102;&#20505;&#25105; OpenCV &#24456;&#19981;&#29087;&#65292;&#21518;&#26469;&#25105;&#28155;&#21152;&#20102;&#36825;&#20010;&#21151;&#33021;&#65292;&#20195;&#30721;&#25176;&#31649;&#22312; GitHub&#65292;&#35814;&#32454;&#35265;&#65306;<a href="https://github.com/district10/Pattern_Classification">district10/Pattern_Classification</a>&#12290;&#19979;&#38754;&#32487;&#32493;&#36825;&#20010; kl &#21464;&#25442;&#30340;&#25925;&#20107;&#12290;</p>
<hr />
<p>&#25509;&#30528;&#19978;&#38754;&#30340; kl &#21464;&#25442;&#30340;&#25925;&#20107;&#12290;&#36807;&#20102;&#22823;&#27010;&#19968;&#20010;&#23398;&#26399;&#65292;&#21478;&#19968;&#38376;&#35838;&#65288;&#12298;&#36965;&#24863;&#23398;&#23454;&#20064;&#12299;&#65311;&#65289;&#65292;&#38656;&#35201;&#20570;&#21464;&#21270;&#26816;&#27979;&#65292;&#26893;&#34987; NDVI &#35745;&#31639;&#31561;&#20869;&#23481;&#65292;&#25105;&#23601;&#25226;&#21407;&#26469;&#27809;&#26377;&#24324;&#22909;&#30340; kl &#21464;&#25442;&#25343;&#20986;&#26469;&#65292;&#29992; OpenCV &#20889;&#20102;&#19968;&#36941;&#65292;&#20110;&#26159;&#23601;&#33021;&#22788;&#29702;&#22270;&#29255;&#20102;&#12290;&#23621;&#28982;&#27809;&#33457;&#20160;&#20040;&#21151;&#22827;&#23601;&#20889;&#20986;&#26469;&#20102;&#65281;~&#65288;&#35828;&#20102;&#20854;&#23454;&#24456;&#31616;&#21333;&#30340;&#22043;&#65289;</p>
<p>&#65288;&#20854;&#23454; OpenCV &#30340;&#30697;&#38453;&#36816;&#31639;&#65292;&#20063;&#37117;&#26159;&#29992;&#30340; Eigen &#24211;&#12290;&#65289;</p>
<p>&#36825;&#37324;&#26159;&#20960;&#20010;&#25928;&#26524;&#22270;&#12290;</p>
<ol style="list-style-type: decimal">
<li>&#23545;&#26222;&#36890; RGB &#24425;&#33394;&#22270;&#36827;&#34892; kl &#21464;&#25442;&#65292;&#21152;&#26435;&#34701;&#21512;&#25104;&#19968;&#24352;&#28784;&#24230;&#22270;&#12290;&#22270;&#29255;&#20284;&#20046;&#26159;&#25105;&#20174; OpenCV &#28304;&#30721;&#37324;&#25214;&#26469;&#30340;&#65292;&#30475;&#19978;&#21435;&#25402;&#36866;&#21512;&#20570;&#36825;&#20010;&#23637;&#31034;&#12290;</li>
</ol>
<div class="figure">
<img src="http://gnat.qiniudn.com/tmp/KL_RGB_pepper_result.jpg" alt="RGB&#24425;&#33394;&#22270;" />
<p class="caption">RGB&#24425;&#33394;&#22270;</p>
</div>
<p>&#21487;&#20197;&#30475;&#21040;&#20960;&#20046;&#21482;&#26377; R &#36890;&#36947;&#32441;&#29702;&#26159;&#20016;&#23500;&#30340;&#65292;&#25152;&#20197; kl &#21464;&#25442;&#21518;&#65292;&#36825;&#20010;&#36890;&#36947;&#30340;&#20449;&#24687;&#24471;&#21040;&#20102;&#26497;&#22823;&#30340;&#20445;&#30041;&#65292;&#32780; B &#21644; G &#36890;&#36947;&#21017;&#20960;&#20046;&#37117;&#26159;&#40657;&#20046;&#20046;&#19968;&#29255;&#65292;&#23601;&#34987;&#25233;&#21046;&#25481;&#20102;&#12290;&#65288;&#22270;&#29255;&#24456;&#22823;&#65292;&#30475;&#19981;&#28165;&#30340;&#35805;&#21487;&#20197;&#29992;&#26032;&#31383;&#21475;&#25171;&#24320;&#30475;&#12290;&#65289;</p>
<p>&#25928;&#26524;&#21644;&#20043;&#21069;&#22823;&#23478;&#29992; Matlab &#20570;&#30340;&#23601;&#24046;&#19981;&#22810;&#20102;&#12290;&#25105;&#22312;&#32593;&#19978;&#38543;&#25163;&#20063;&#25214;&#20102;&#19968;&#20221; matlab &#20195;&#30721;&#65306; <a href="https://www.mathworks.com/matlabcentral/fileexchange/37082-kl-transform--karhunen-lo%c3%a8ve-theorem-">KL Transform (Karhunen&#8211;Lo&#232;ve Theorem) - File Exchange - MATLAB Central</a>&#12290;&#25105;&#30340; C++ &#28304;&#30721;&#65306;<a href="https://github.com/district10/Pattern_Classification/blob/gh-pages/kl_transform_imageRGB.cpp">Pattern_Classification/kl_transform_imageRGB.cpp at gh-pages &#183; district10/Pattern_Classification &#183; GitHub</a>&#65292;&#24403;&#26102;&#20026;&#20102;&#28843;&#25216;&#65292;&#36824;&#29992;&#20102; C++11 &#30340; auto&#8230;&#8230;&#29616;&#22312;&#24819;&#24819;&#30495;&#26159;&#27627;&#19981;&#24517;&#35201;&#12290;</p>
<p>&#65288;&#35805;&#35828;&#37027;&#26102;&#20505;&#25105;&#29992;&#30340;&#36824;&#26159;&#28183;&#36879;&#31995;&#32479; kali&#8230;&#8230;&#20294;&#21861;&#20063;&#27809;&#23398;&#20250;&#12290;&#128534;&#65289;</p>
<ol start="2" style="list-style-type: decimal">
<li>&#23545;&#36965;&#24863;&#24433;&#20687;&#30340;&#21508;&#20010;&#27874;&#27573;&#65288;&#27604; RGB &#24425;&#33394;&#22270;&#22810;&#20102;&#22909;&#20960;&#20010;&#36890;&#36947;&#65289;&#36827;&#34892; kl &#21464;&#25442;&#65292;&#21152;&#26435;&#34701;&#21512;&#25104;&#19968;&#24352;&#28784;&#24230;&#22270;&#12290;&#36825;&#26159;&#19968;&#32452; 7 &#27874;&#27573;&#36965;&#24863;&#24433;&#20687; kl &#21464;&#25442;&#21518;&#30340;&#25928;&#26524;&#12290;</li>
</ol>
<div class="figure">
<img src="http://gnat.qiniudn.com/tmp/KL_Multiband_result.jpg" alt="&#22810;&#27874;&#27573;&#24433;&#20687;" />
<p class="caption">&#22810;&#27874;&#27573;&#24433;&#20687;</p>
</div>
<ol start="3" style="list-style-type: decimal">
<li>&#21464;&#21270;&#26816;&#27979;</li>
</ol>
<p>&#23601;&#26159;&#26816;&#27979;&#36965;&#24863;&#24433;&#20687;&#21738;&#37096;&#20998;&#20687;&#32032;&#20540;&#21457;&#29983;&#20102;&#21464;&#21270;&#65292;&#29992;&#20110;&#26816;&#27979;&#30417;&#25511;&#33258;&#28982;&#28798;&#23475;&#12290;&#25105;&#36825;&#20351;&#29992;&#30340; python &#20889;&#24471;&#65292;&#32780;&#19988;&#21482;&#26159;&#36827;&#34892;&#20687;&#32032;&#30340;&#23545;&#27604;&#65292;&#23545;&#20687;&#32032;&#21457;&#29983;&#21464;&#21270;&#30340;&#21306;&#22495;&#26174;&#31034;&#20102;&#20986;&#26469;&#65292;&#24456; naive&#65288;&#22240;&#20026;&#20004;&#24352;&#36965;&#24863;&#24433;&#20687;&#24590;&#20040;&#21487;&#33021;&#20687;&#32032;&#23436;&#20840;&#19981;&#21464;&#21602;&#65292;&#32769;&#24072;&#32473;&#30340;&#25968;&#25454;&#26126;&#26174;&#26159;&#33258;&#24049;&#25343;&#19968;&#24352;&#22270;&#20462;&#25913;&#20102;&#19979;&#29983;&#25104;&#20102;&#31532;&#20108;&#24352;&#12290;&#21487;&#20197;&#35828;&#25105;&#36825;&#31181;&#21464;&#21270;&#26816;&#27979;&#20195;&#30721;&#27809;&#26377;&#23454;&#38469;&#24847;&#20041;&#65289;&#65292;&#20294;&#36824;&#26159;&#36148;&#22312;&#36825;&#37324;&#12290;</p>
<div class="figure">
<img src="http://gnat.qiniudn.com/tmp/image_diff_result.jpg" alt="&#21464;&#21270;&#26816;&#27979;" />
<p class="caption">&#21464;&#21270;&#26816;&#27979;</p>
</div>
<ol start="4" style="list-style-type: decimal">
<li><a href="https://en.wikipedia.org/wiki/Normalized_Difference_Vegetation_Index">NDVI</a> &#26159;&#19968;&#31181;&#36890;&#36807;&#20809;&#35889;&#20449;&#24687;&#21028;&#26029;&#26893;&#34987;&#35206;&#30422;&#29366;&#20917;&#30340;&#24120;&#29992;&#26041;&#27861;&#65288;&#22240;&#20026;&#26893;&#34987;&#21644;&#24314;&#31569;&#12289;&#36947;&#36335;&#23545;&#19981;&#21516;&#27874;&#27573;&#30340;&#30005;&#30913;&#27874;&#26377;&#19981;&#21516;&#21453;&#23556;&#33021;&#21147;/&#25928;&#26524;&#65289;&#12290;</li>
</ol>
<p>&#20844;&#24335;&#24456;&#31616;&#21333;&#65306;<span class="math inline">\(\text{NDVI}=  \frac {\text{NIR}-\text{VIS}}  {\text{NIR}+\text{VIS}}\)</span>&#65292;&#20854;&#20013; VIS &#26159;&#21487;&#35265;&#20809;&#27874;&#27573;&#30340;&#20809;&#35889;&#21709;&#24212;&#65292;NIR &#26159;&#36817;&#32418;&#22806;&#12290;</p>
<p>&#20195;&#30721;&#20063;&#24456;&#22909;&#20889;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">image_sum <span class="op">=</span> numpy.array(array1) <span class="op">+</span> numpy.array(array2)
image_sub <span class="op">=</span> numpy.array(array1) <span class="op">-</span> numpy.array(array2)
image_ndvi <span class="op">=</span> (image_sub <span class="op">/</span> image_sum <span class="op">+</span> <span class="dv">1</span>) <span class="op">/</span> <span class="dv">2</span> <span class="op">*</span> <span class="dv">256</span></code></pre></div>
<div class="figure">
<img src="http://gnat.qiniudn.com/tmp/image_ndvi_result.jpg" alt="NDVI &#26893;&#34987;&#25351;&#25968;&#65292;&#39068;&#33394;&#28145;&#30340;&#22320;&#26041;&#65292;&#26893;&#34987;&#35206;&#30422;&#29575;&#39640;&#12290;" />
<p class="caption">NDVI &#26893;&#34987;&#25351;&#25968;&#65292;&#39068;&#33394;&#28145;&#30340;&#22320;&#26041;&#65292;&#26893;&#34987;&#35206;&#30422;&#29575;&#39640;&#12290;</p>
</div>
<hr />
<p>&#24403;&#26102;&#20132;&#20316;&#19994;&#30340;&#26102;&#20505;&#65292;&#25105;&#36824;&#25226;&#21508;&#20010;&#36890;&#36947;&#30340;&#26435;&#20540;&#36755;&#20986;&#20102;&#65306;</p>
<div class="figure">
<img src="http://gnat.qiniudn.com/tmp/kl_rgb_result.jpg" alt="KL &#21464;&#21270;&#36755;&#20986;&#25928;&#26524;" />
<p class="caption">KL &#21464;&#21270;&#36755;&#20986;&#25928;&#26524;</p>
</div>
<p>&#20195;&#30721;&#37117;&#22312;&#19978;&#38754;&#37027;&#20010; repo &#37324;&#65292;&#32534;&#35793;&#26041;&#27861;&#20063;&#20889;&#20102;&#12290;</p>
<p>&#36825;&#23601;&#26159;&#25105;&#21644; kl &#21464;&#25442;&#30340;&#25925;&#20107;&#12290;</p>
<hr />
<p>refs and see also</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Karhunen%E2%80%93Lo%C3%A8ve_theorem">Karhunen&#8211;Lo&#232;ve theorem - Wikipedia, the free encyclopedia</a></li>
<li><a href="https://en.wikipedia.org/wiki/Principal_component_analysis">Principal component analysis - Wikipedia, the free encyclopedia</a></li>
</ul>
<ul class="tzx-tags-group">
<li><a class="tzx-tag" href="tags.html/#pca">pca</a></li>
<li><a class="tzx-tag" href="tags.html/#kl transform">kl transform</a></li>
<li><a class="tzx-tag" href="tags.html/#math">math</a></li>
</ul>

<div class="tzx-changes"><select id="tzx-changes" title="&#21382;&#21490;&#29256;&#26412;">
<option value="https://raw.githubusercontent.com/district10/blog/503e511788e741cf3ef0f32f8894bf9b83c6206b/_posts/post-0029-kl-transform.md" title="252 insertions(+), 0 deletions(-)">1504105630</option>
</select></div>

<script>
var tzxFilename = "_posts/post-0029-kl-transform.md";
var tzxChanges = [
    {
        hash: "503e511788e741cf3ef0f32f8894bf9b83c6206b",
        datetime: "1504105630",
        insertions: 252,
        deletions: 0
    },
];
</script>

<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="jquery-ui.min.js"></script>
<script type="text/javascript" src="clappr.min.js"></script>
<script type="text/javascript" src="lazyload.min.js"></script>
<script type="text/javascript" src="egg.min.js"></script>
<script type="text/javascript" src="moment.min.js"></script>
<script type="text/javascript" src="clipboard.min.js"></script>
<script type="text/javascript" src="main.js"></script>
<hr style="color: #9ddcff;"/>
<div id="copyright">TANG ZhiXiong, 2018.  Generated by Pandoc on Travis CI. <a  href="https://github.com/district10/blog">Fork Me on GitHub.</a></div>
<div id="comments" class="comments-area"></div>

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: '010a49f90ea2dacb0963',
        clientSecret: '38512e4e4da431fc61d44508ed53f9fe6eb7f29f',
        repo: 'blog',
        owner: 'district10',
        admin: ['district10'],
        id: window.location.pathname,
    });
gitalk.render('comments');
</script>

</body>
</html>
