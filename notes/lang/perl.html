<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="author" content="district10" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Learning Perl</title>
    <link rel="stylesheet" href="../github-markdown.css" type="text/css" />
    <link rel="stylesheet" href="../highlight.css" type="text/css" />
    <link rel="stylesheet" href="../notes.css" type="text/css" />
</head>
<body class="markdown-body">
<div id="navigator">
    <a id="gotoindex" href="index.html" title="&#12304;&#22238;&#21040;&#31508;&#35760;&#32034;&#24341; | Back to Index&#12305;">&#9763;</a></div>
<div id="main-body">
<h1 id="learning-perl">Learning Perl</h1>
<!--
&#25353;&#29031;&#31508;&#32773;&#33258;&#24049;&#30340;&#32463;&#21382;&#65292;&#20174;&#23545;Perl&#19968;&#26080;&#25152;&#30693;&#21040;&#21487;&#20197;&#19978;&#25163;&#24178;&#27963;&#65292;&#21487;&#20197;&#20174;&#23567;&#39558;&#39548;&#20070;&#8212;&#8212;Learning
Perl (&#35910;&#29923;)&#24320;&#22987;&#12290;&#24555;&#36895;&#27983;&#35272;&#21152;&#23454;&#36341;&#19979;&#20070;&#19978;&#20195;&#30721;&#65292;&#20004;&#22825;&#23601;&#21487;&#20197;&#35835;&#20010;&#22823;&#27010;&#12290;

&#19981;&#36807;&#23567;&#39558;&#39548;&#20070;&#21482;&#35206;&#30422;&#20102;Perl Programming&#26368;&#22522;&#30784;&#30340;&#19968;&#37096;&#20998;&#30693;&#35782;&#65292;&#24403;&#20320;&#38656;&#35201;&#29992;Perl&#20570;&#38754;&#23545;&#23545;
&#35937;&#25110;&#32773;&#22823;&#22411;&#31243;&#24207;&#32534;&#31243;&#26102;&#65292;&#26377;&#24517;&#35201;&#21435;&#35835;&#19968;&#19979;&#31070;&#20861;&#20070;&#8212;&#8212;Intermediate Perl (&#35910;&#29923;)&#12290;

&#36825;&#20004;&#26412;&#20070;&#24212;&#35813;&#33021;&#24212;&#20184;&#22823;&#37096;&#20998;&#30340;Perl Programming&#30340;&#38656;&#27714;&#65292;&#24314;&#35758;&#39064;&#20027;&#25509;&#19979;&#26469;&#24212;&#35813;&#21435;&#20570;&#22823;&#37327;&#30340;
&#23454;&#36341;&#12290;&#22312;&#23454;&#36341;&#36807;&#31243;&#20013;&#65292;&#26377;&#20004;&#20010;&#32593;&#31449;&#26159;&#32943;&#23450;&#35201;&#32463;&#24120;&#25171;&#20132;&#36947;&#30340;&#12290;&#36825;&#20004;&#20010;&#32593;&#31449;&#65292;&#19968;&#20010;&#26159;The CPAN
Search Site&#65292;&#19968;&#20010;&#26159;Perl programming documentation&#12290;

&#21069;&#32773;&#23601;&#19981;&#20171;&#32461;&#20102;&#65292;&#30456;&#20449;&#23398;Perl&#30340;&#31461;&#38795;&#37117;&#29087;&#24713;&#30340;&#12290;&#21518;&#32773;&#38500;&#20102;&#20570;&#20026;&#19968;&#20010;Perl&#20869;&#24314;&#20989;&#25968;&#30340;Ref&#32593;&#31449;
&#65292;&#36824;&#26377;&#22823;&#37327;&#20171;&#32461;&#35821;&#35328;&#29305;&#24615;&#21644;&#32454;&#33410;&#30340;&#25991;&#31456;&#65292;&#38750;&#24120;&#20540;&#24471;&#19968;&#35835;&#65292;&#27604;&#22914;&#65306;

    Language reference
    Pragmas - http://perldoc.perl.org
    Utilities - http://perldoc.perl.org
    Internals and C language interface

&#20197;&#19978;&#38142;&#25509;&#20013;&#30340;&#20869;&#23481;&#65292;&#22914;&#26524;&#39064;&#20027;&#37117;&#33021;&#29702;&#35299;&#24182;&#19988;&#23454;&#36341;&#36807;&#65292;&#25105;&#30456;&#20449;&#21487;&#20197;&#31639;&#24471;&#19978;&#26159;&#19968;&#20010;Perl&#19987;&#23478;&#20102;&#12290;

&#31508;&#32773;&#24314;&#35758;&#23454;&#36341;&#36807;&#19968;&#27573;&#26102;&#38388;&#21518;&#65292;&#22238;&#22836;&#20877;&#37325;&#26032;&#32454;&#30475;&#23567;&#39558;&#39548;&#12289;&#31070;&#20861;&#20070;&#65292;&#20250;&#26377;&#19981;&#21516;&#30340;&#20307;&#24735;&#12290;&#37027;&#26102;&#33509;
&#26377;&#20852;&#36259;&#65292;&#36824;&#21487;&#20197;&#25226;&#19979;&#38754;&#36825;&#20123;&#20070;&#21152;&#20837;&#20320;&#30340;Read List:

    Advanced Perl Programming (&#35910;&#29923;)
    Mastering Perl (&#35910;&#29923;)
    Perl Best Practices (&#35910;&#29923;)

&#20316;&#32773;&#65306;&#34081;&#33150;&#32428;
&#38142;&#25509;&#65306;https://www.zhihu.com/question/19647485/answer/16093948
&#26469;&#28304;&#65306;&#30693;&#20046;
&#33879;&#20316;&#26435;&#24402;&#20316;&#32773;&#25152;&#26377;&#12290;&#21830;&#19994;&#36716;&#36733;&#35831;&#32852;&#31995;&#20316;&#32773;&#33719;&#24471;&#25480;&#26435;&#65292;&#38750;&#21830;&#19994;&#36716;&#36733;&#35831;&#27880;&#26126;&#20986;&#22788;&#12290;
-->
<h2 id="introduction">Introduction</h2>
<div class="tzx-fright">
<p><a href="https://book.douban.com/subject/6560927/"><img src="https://img1.doubanio.com/mpic/s6569264.jpg" /></a></p>
</div>
<p>Perl is sometimes called the &#8220;Practical Extraction and Report Language&#8221;, although it has also been called a &#8220;Pathologically Eclectic Rubbish Lister&#8221;, among other expansions. It&#8217;s actually a <strong>backronym</strong>, not an <strong>acronym</strong>, since Larry Wall, Perl&#8217;s creator, came up with the name first and the expansion later. That&#8217;s why &#8220;Perl&#8221; isn&#8217;t in all caps. There&#8217;s no point in arguing which expansion is correct: Larry endorses both. You may also see &#8220;perl&#8221; with a lowercase <em>p</em> in some writing. In general, &#8220;Perl&#8221; with a capital <em>P</em> refers to the language and &#8220;perl&#8221; with a lowercase <em>p</em> refers to the actual interpreter that compiles and runs your programs. In the house style, we write the names of programs like perl.</p>
<p>CPAN is the Comprehensive Perl Archive Network, your one-stop shopping for Perl. It has the source code for Perl itself, ready-to-install ports of Perl to all sorts of non-Unix systems, examples, documentation, extensions to Perl, and archives of messages about Perl. In short, CPAN is comprehensive.</p>
<p><code class="sourceCode bash"><span class="kw">perldoc</span></code></p>
<dl>
<dt>Programming Perl</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">#!/usr/bin/perl</span>
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Hello, world!</span><span class="ch">\n</span><span class="kw">&quot;</span>;</code></pre></div>
<p><code>.pl</code>, <code>.plx</code> (mening PerL eXecutable)</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">#!/usr/bin/env perl</span>

<span class="fu">use</span> <span class="fl">5.010</span>;          <span class="co"># Perl 5.10</span>

say <span class="kw">&quot;</span><span class="st">Hello World!</span><span class="kw">&quot;</span>;</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">#!/usr/bin/perl</span>
<span class="dt">@lines</span> = <span class="kw">`</span><span class="st">perldoc -u -f atan2</span><span class="kw">`</span>;
<span class="kw">foreach</span> (<span class="dt">@lines</span>) {
    <span class="kw">s/</span><span class="bn">\w</span><span class="ot">&lt;</span><span class="ch">([^</span><span class="bn">&gt;</span><span class="ch">]+)</span><span class="ot">&gt;</span><span class="kw">/</span><span class="ch">\U</span><span class="dt">$1</span><span class="kw">/g</span>;
    <span class="fu">print</span>;
}</code></pre></div>
</dd>
</dl>
<h2 id="scalar-data">Scalar Data</h2>
<p>Larry: <code>$calar</code> &amp; <code>@rray</code>.</p>
<dl>
<dt>Literals</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fl">1.25</span>
<span class="fl">255.000</span>
<span class="fl">255.0</span>
<span class="fl">7.25e45</span>         <span class="co"># 7.25 times 10 to the 45th power (a big number)</span>
&#8211;<span class="fl">6.5e24</span>         <span class="co"># negative 6.5 times 10 to the 24th</span>
                <span class="co"># (a big negative number)</span>
&#8211;12e&#8211;<span class="dv">24</span>         <span class="co"># negative 12 times 10 to the &#8211;24th</span>
                <span class="co"># (a very small negative number)</span>
&#8211;<span class="fl">1.2</span>E&#8211;<span class="dv">23</span>        <span class="co"># another way to say that the E may be uppercase</span>

<span class="bn">0377</span>            <span class="co"># 377 octal, same as 255 decimal</span>
<span class="bn">0xff</span>            <span class="co"># FF hex, also 255 decimal</span>
<span class="bn">0b11111111</span>      <span class="co"># also 255 decimal</span>

<span class="bn">0x1377_0B77</span>
<span class="bn">0x50_65_72_7C</span>

<span class="dv">2</span> + <span class="dv">3</span>           <span class="co"># 2 plus 3, or 5</span>
<span class="fl">5.1</span> &#8211; <span class="fl">2.4</span>       <span class="co"># 5.1 minus 2.4, or 2.7</span>
<span class="dv">3</span> <span class="kw">*</span> <span class="dv">12</span>          <span class="co"># 3 times 12 = 36</span>
<span class="dv">14</span> / <span class="dv">2</span>          <span class="co"># 14 divided by 2, or 7</span></code></pre></div>
</dd>
<dt>Single-Quoted String Literals</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="kw">utf8</span>;

<span class="kw">&#39;</span><span class="st">barney</span><span class="kw">&#39;</span>
<span class="kw">&#39;&#39;</span>                           <span class="co"># the null string (no characters)</span>
<span class="kw">&#39;</span><span class="st">&#8538;&#8734;&#9731;&#9760;</span><span class="kw">&#39;</span>                      <span class="co"># Some &quot;wide&quot; Unicode characters</span>
<span class="kw">&#39;</span><span class="st">Don</span><span class="ch">\&#39;</span><span class="st">t let an apostrophe end this string prematurely!</span><span class="kw">&#39;</span>
<span class="kw">&#39;</span><span class="st">the last character is a backslash: </span><span class="ch">\\</span><span class="kw">&#39;</span>
<span class="kw">&#39;</span><span class="st">hello\n</span><span class="kw">&#39;</span>
<span class="kw">&#39;</span><span class="st">hello</span>
<span class="st">there</span><span class="kw">&#39;</span>                      <span class="co"># hello, newline, there (11 characters total)</span>
<span class="kw">&#39;</span><span class="ch">\&#39;\\</span><span class="kw">&#39;</span>                      <span class="co"># single quote followed by backslash</span></code></pre></div>
</dd>
<dt>Double-Quoted String Literals</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">&quot;</span><span class="st">barney</span><span class="kw">&quot;</span>                   <span class="co"># just the same as &#39;barney&#39;</span>
<span class="kw">&quot;</span><span class="st">hello world</span><span class="ch">\n</span><span class="kw">&quot;</span>            <span class="co"># hello world, and a newline</span>
<span class="kw">&quot;</span><span class="st">The last character of this string is a quote mark: \&quot;</span><span class="kw">&quot;</span>
<span class="kw">&quot;</span><span class="st">coke</span><span class="ch">\t</span><span class="st">sprite</span><span class="kw">&quot;</span>             <span class="co"># coke, a tab, and sprite</span>

<span class="co"># character code point</span>
<span class="kw">&quot;</span><span class="st">\x{2668}</span><span class="kw">&quot;</span>                 <span class="co"># Unicode HOT SPRINGS (&#9832;, &#28201;&#27849;)</span></code></pre></div>
</dd>
</dl>
<table>
<thead>
<tr class="header">
<th align="center">Construct</th>
<th align="left">Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>\n</code></td>
<td align="left">Newline</td>
</tr>
<tr class="even">
<td align="center"><code>\r</code></td>
<td align="left">Return</td>
</tr>
<tr class="odd">
<td align="center"><code>\t</code></td>
<td align="left">Tab</td>
</tr>
<tr class="even">
<td align="center"><code>\f</code></td>
<td align="left">Formfeed</td>
</tr>
<tr class="odd">
<td align="center"><code>\b</code></td>
<td align="left">Backspace</td>
</tr>
<tr class="even">
<td align="center"><code>\a</code></td>
<td align="left">Bell</td>
</tr>
<tr class="odd">
<td align="center"><code>\e</code></td>
<td align="left">Escape (ASCII escape character)</td>
</tr>
<tr class="even">
<td align="center"><code>\007</code></td>
<td align="left">Any octal ASCII value (here, 007 = bell)</td>
</tr>
<tr class="odd">
<td align="center"><code>\x7f</code></td>
<td align="left">Any hex ASCII value (here, 7f = delete)</td>
</tr>
<tr class="even">
<td align="center"><code>\x{2744}</code></td>
<td align="left">Any hex Unicode code point (here, U+2744 = snowflake)</td>
</tr>
<tr class="odd">
<td align="center"><code>\cC</code></td>
<td align="left">A &#8220;control&#8221; character (here, Ctrl-C)</td>
</tr>
<tr class="even">
<td align="center"><code>\\</code></td>
<td align="left">Backslash</td>
</tr>
<tr class="odd">
<td align="center"><code>\&quot;</code></td>
<td align="left">Double quote</td>
</tr>
<tr class="even">
<td align="center"><code>\l</code></td>
<td align="left">Lowercase next letter</td>
</tr>
<tr class="odd">
<td align="center"><code>\L</code></td>
<td align="left">Lowercase all following letters until <code>\E</code></td>
</tr>
<tr class="even">
<td align="center"><code>\u</code></td>
<td align="left">Uppercase next letter</td>
</tr>
<tr class="odd">
<td align="center"><code>\U</code></td>
<td align="left">Uppercase all following letters until <code>\E</code></td>
</tr>
<tr class="even">
<td align="center"><code>\Q</code></td>
<td align="left">Quote nonword characters by adding a backslash until <code>\E</code></td>
</tr>
<tr class="odd">
<td align="center"><code>\E</code></td>
<td align="left">End <code>\L</code>, <code>\U</code> , or <code>\Q</code></td>
</tr>
</tbody>
</table>
<dl>
<dt>String Concatenation</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">&quot;</span><span class="st">hello</span><span class="kw">&quot;</span> . <span class="kw">&quot;</span><span class="st">world</span><span class="kw">&quot;</span>           <span class="co"># same as &quot;helloworld&quot;</span>
<span class="kw">&quot;</span><span class="st">hello</span><span class="kw">&quot;</span> . <span class="kw">&#39;</span><span class="st"> </span><span class="kw">&#39;</span> . <span class="kw">&quot;</span><span class="st">world</span><span class="kw">&quot;</span>     <span class="co"># same as &#39;hello world&#39;</span>
<span class="kw">&#39;</span><span class="st">hello world</span><span class="kw">&#39;</span> . <span class="kw">&quot;</span><span class="ch">\n</span><span class="kw">&quot;</span>        <span class="co"># same as &quot;hello world\n&quot;</span>

<span class="kw">&quot;</span><span class="st">fred</span><span class="kw">&quot;</span> x <span class="dv">3</span>                  <span class="co"># is &quot;fredfredfred&quot;</span>
<span class="kw">&quot;</span><span class="st">barney</span><span class="kw">&quot;</span> x (<span class="dv">4+1</span>)            <span class="co"># is &quot;barney&quot; x 5</span>
<span class="dv">5</span> x <span class="fl">4.8</span>                     <span class="co"># is really &quot;5&quot; x 4, which is &quot;5555&quot;</span>

<span class="bn">0377</span>                        <span class="co"># that&#39;s octal for 255 decimal</span>
<span class="kw">&#39;</span><span class="st">0377</span><span class="kw">&#39;</span>                      <span class="co"># that&#39;s 377 decimal</span>
<span class="kw">&quot;</span><span class="st">Z</span><span class="kw">&quot;</span> . <span class="dv">5</span> <span class="kw">*</span> <span class="dv">7</span>                 <span class="co"># same as &quot;Z&quot; . 35, or &quot;Z35&quot;</span></code></pre></div>
</dd>
<dt>warnings &amp; diagnostics</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">#!/usr/bin/perl</span>

<span class="fu">use</span> <span class="kw">warnings</span>;</code></pre></div>
<dl>
<dt>or in command line:</dt>
<dd><code class="sourceCode bash"><span class="kw">perl</span> -w my_program</code>, shebang: <code class="sourceCode bash"><span class="co">#!/usr/bin/perl -w</span></code>
</dd>
</dl>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">#!/usr/bin/perl</span>

<span class="fu">use</span> <span class="kw">diagnostics</span>;</code></pre></div>
<p>module: <code class="sourceCode bash"><span class="kw">perl</span> -Mdiagnostics ./my_program</code></p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$r</span>&#233;sum&#233;
<span class="dt">$co</span>&#246;rdinate</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The answer is </span><span class="kw">&quot;</span>, <span class="dv">6</span> <span class="kw">*</span> <span class="dv">7</span>, <span class="kw">&quot;</span><span class="st">.</span><span class="ch">\n</span><span class="kw">&quot;</span>;

<span class="dt">$what</span> = <span class="kw">&quot;</span><span class="st">brontosaurus steak</span><span class="kw">&quot;</span>;
<span class="dt">$n</span> = <span class="dv">3</span>;
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">fred ate </span><span class="dt">$n</span><span class="st"> </span><span class="dt">$whats</span><span class="st">.</span><span class="ch">\n</span><span class="kw">&quot;</span>;      <span class="co"># there is no $whats</span>
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">fred ate </span><span class="dt">$n</span><span class="st"> </span><span class="dt">${what}s</span><span class="st">.</span><span class="ch">\n</span><span class="kw">&quot;</span>;    <span class="co"># now uses $what</span>
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">fred ate </span><span class="dt">$n</span><span class="st"> </span><span class="dt">$what</span><span class="kw">&quot;</span> . <span class="kw">&quot;</span><span class="st">s.</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># another way to do it</span>
<span class="fu">print</span> <span class="kw">&#39;</span><span class="st">fred ate </span><span class="kw">&#39;</span> . <span class="dt">$n</span> . <span class="kw">&#39;</span><span class="st"> </span><span class="kw">&#39;</span> . <span class="dt">$what</span> . <span class="kw">&quot;</span><span class="st">s.</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># same but odd</span>

<span class="dt">$alef</span>  = <span class="fu">chr</span>( <span class="bn">0x05D0</span> );
<span class="dt">$alpha</span> = <span class="fu">chr</span>( <span class="fu">hex</span>(<span class="kw">&#39;</span><span class="st">03B1</span><span class="kw">&#39;</span>) );
<span class="dt">$omega</span> = <span class="fu">chr</span>( <span class="bn">0x03C9</span> );

<span class="dt">$code_point</span> = <span class="fu">ord</span>( <span class="kw">&#39;</span><span class="st">&#22247;</span><span class="kw">&#39;</span> );

<span class="co"># That might be more work than interpolating them directly by putting the</span>
<span class="co"># hexadecimal representation in  \x{} :</span>
<span class="kw">&quot;</span><span class="st">\x{03B1}\x{03C9}</span><span class="kw">&quot;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="co"># gt, eq</span>
<span class="kw">if</span> (<span class="dt">$name</span> <span class="kw">gt</span> <span class="kw">&#39;</span><span class="st">fred</span><span class="kw">&#39;</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">&#39;</span><span class="dt">$name</span><span class="kw">&#39;</span><span class="st"> comes after &#39;fred&#39; in sorted order.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
} <span class="kw">else</span> {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">&#39;</span><span class="dt">$name</span><span class="kw">&#39;</span><span class="st"> does not come after &#39;fred&#39;.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Maybe it&#39;s the same string, in fact.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">chomp</span>(<span class="dt">$text</span> = <span class="kw">&lt;STDIN&gt;</span>);

<span class="dt">$count</span> = <span class="dv">0</span>;
<span class="kw">while</span> (<span class="dt">$count</span> &lt; <span class="dv">10</span>) {
    <span class="dt">$count</span> += <span class="dv">2</span>;
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">count is now </span><span class="dt">$count</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># Gives values 2 4 6 8 10</span>
}

<span class="dt">$madonna</span> = <span class="kw">&lt;STDIN&gt;</span>;
<span class="kw">if</span> ( <span class="fu">defined</span>(<span class="dt">$madonna</span>) ) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The input was </span><span class="dt">$madonna</span><span class="kw">&quot;</span>;
} <span class="kw">else</span> {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">No input available!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
</dl>
<h2 id="list-and-arrays">List and Arrays</h2>
<dl>
<dt>list and arrays</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$blank</span> = <span class="dt">$fred</span>[ <span class="dv">142_857</span> ];        <span class="co"># unused array element gives undef</span>
<span class="dt">$blanc</span> = <span class="dt">$mel</span>;                    <span class="co"># unused scalar $mel also gives undef</span>

<span class="dt">$rocks</span>[<span class="dv">0</span>] = <span class="kw">&#39;</span><span class="st">bedrock</span><span class="kw">&#39;</span>;
<span class="dt">$rocks</span>[<span class="dv">1</span>] = <span class="kw">&#39;</span><span class="st">slate</span><span class="kw">&#39;</span>;
<span class="dt">$rocks</span>[<span class="dv">2</span>] = <span class="kw">&#39;</span><span class="st">lava</span><span class="kw">&#39;</span>;
<span class="dt">$rocks</span>[<span class="dv">3</span>] = <span class="kw">&#39;</span><span class="st">crushed rock</span><span class="kw">&#39;</span>;
<span class="dt">$rocks</span>[<span class="dv">99</span>] = <span class="kw">&#39;</span><span class="st">schist</span><span class="kw">&#39;</span>;            <span class="co"># now there are 95 undef elements</span>

<span class="dt">$end</span> = <span class="dt">$#rocks</span>;                   <span class="co"># 99, which is the last element&#39;s index</span>
<span class="dt">$number_of_rocks</span> = <span class="dt">$end</span> + <span class="dv">1</span>;      <span class="co"># okay, but you&#39;ll see a better way later</span>
<span class="dt">$rocks</span>[ <span class="dt">$#rocks</span> ] = <span class="kw">&#39;</span><span class="st">hard rock</span><span class="kw">&#39;</span>;  <span class="co"># the last rock</span>

<span class="dt">$rocks</span>[ &#8211;<span class="dv">1</span> ] = <span class="kw">&#39;</span><span class="st">hard rock</span><span class="kw">&#39;</span>;       <span class="co"># easier way to do that last example</span>
<span class="dt">$dead_rock</span> = <span class="dt">$rocks</span>[&#8211;<span class="dv">100</span>];        <span class="co"># gets &#39;bedrock&#39;</span>
<span class="dt">$rocks</span>[ &#8211;<span class="dv">200</span> ] = <span class="kw">&#39;</span><span class="st">crystal</span><span class="kw">&#39;</span>;       <span class="co"># fatal error!</span>

(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)                         <span class="co"># list of three values 1, 2, and 3</span>
(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>,)                        <span class="co"># the same, okay to add extra &#39;,&#39;</span>
(<span class="kw">&quot;</span><span class="st">fred</span><span class="kw">&quot;</span>, <span class="fl">4.5</span>)                     <span class="co"># two values, &quot;fred&quot; and 4.5</span>
( )                               <span class="co"># empty list - zero elements</span>
(<span class="dv">1</span>..<span class="dv">100</span>)                          <span class="co"># list of 100 integers</span>

(<span class="dv">1</span>..<span class="dv">5</span>)                            <span class="co"># same as (1, 2, 3, 4, 5)</span>
(<span class="fl">1.7</span>..<span class="fl">5.7</span>)                        <span class="co"># same thing; both values are truncated</span>

(<span class="dv">5</span>..<span class="dv">1</span>)                            <span class="co"># empty list; .. only counts &quot;uphill&quot;</span>

(<span class="dv">0</span>, <span class="dv">2</span>..<span class="dv">6</span>, <span class="dv">10</span>, <span class="dv">12</span>)                 <span class="co"># same as (0, 2, 3, 4, 5, 6, 10, 12)</span>
(<span class="dt">$m</span>..<span class="dt">$n</span>)
(<span class="dv">0</span>..<span class="dt">$#rocks</span>)                      <span class="co"># indices</span></code></pre></div>
</dd>
<dt>the qw Shortcut</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">qw(</span> fred barney betty wilma dino <span class="kw">)</span>

<span class="kw">qw!</span> fred barney betty wilma dino <span class="kw">!</span>
<span class="kw">qw/</span> fred barney betty wilma dino <span class="kw">/</span>
<span class="kw">qw#</span> fred barney betty wilma dino <span class="kw">#</span> <span class="co"># like in a comment!</span>
<span class="kw">qw(</span> fred barney betty wilma dino <span class="kw">)</span>
<span class="kw">qw{</span> fred barney betty wilma dino <span class="kw">}</span>
<span class="kw">qw[</span> fred barney betty wilma dino <span class="kw">]</span>
<span class="kw">qw&lt;</span> fred barney betty wilma dino &gt;

# easier to read
qw(
    fred
    barney
    betty
    wilma
    dino
)</code></pre></div>
</dd>
<dt>list (array)</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl">(<span class="dt">$fred</span>, <span class="dt">$barney</span>, <span class="dt">$dino</span>) = (<span class="kw">&quot;</span><span class="st">flintstone</span><span class="kw">&quot;</span>, <span class="kw">&quot;</span><span class="st">rubble</span><span class="kw">&quot;</span>, <span class="fu">undef</span>);

(<span class="dt">$fred</span>, <span class="dt">$barney</span>) = (<span class="dt">$barney</span>, <span class="dt">$fred</span>);                       <span class="co"># swap</span>
(<span class="dt">$betty</span>[<span class="dv">0</span>], <span class="dt">$betty</span>[<span class="dv">1</span>]) = (<span class="dt">$betty</span>[<span class="dv">1</span>], <span class="dt">$betty</span>[<span class="dv">0</span>]);

(<span class="dt">$fred</span>, <span class="dt">$barney</span>) = <span class="kw">qw&lt;</span> flintstone rubble slate granite &gt;;  # ignore
($wilma, $dino) = qw[flintstone];                          # undef</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl">(<span class="dt">$rocks</span>[<span class="dv">0</span>], <span class="dt">$rocks</span>[<span class="dv">1</span>]) = <span class="kw">qw/</span>talc mica<span class="kw">/</span>;

<span class="dt">@rocks</span> = <span class="kw">qw/</span> bedrock slate lava <span class="kw">/</span>;
<span class="dt">@tiny</span> = ( );                                <span class="co"># the empty list</span>
<span class="dt">@giant</span> = <span class="dv">1</span>..1e5;                            <span class="co"># a list with 100,000 elements</span>
<span class="dt">@stuff</span> = (<span class="dt">@giant</span>, <span class="fu">undef</span>, <span class="dt">@giant</span>);           <span class="co"># a list with 200,001 elements</span>
<span class="dt">$dino</span> = <span class="kw">&quot;</span><span class="st">granite</span><span class="kw">&quot;</span>;
<span class="dt">@quarry</span> = (<span class="dt">@rocks</span>, <span class="kw">&quot;</span><span class="st">crushed rock</span><span class="kw">&quot;</span>, <span class="dt">@tiny</span>, <span class="dt">$dino</span>);</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">@array</span> = <span class="dv">5</span>..<span class="dv">9</span>;
<span class="dt">$fred</span> = <span class="fu">pop</span>(<span class="dt">@array</span>);    <span class="co"># $fred gets 9, @array now has (5, 6, 7, 8)</span>
<span class="dt">$barney</span> = <span class="fu">pop</span> <span class="dt">@array</span>;   <span class="co"># $barney gets 8, @array now has (5, 6, 7)</span>
<span class="fu">pop</span> <span class="dt">@array</span>;             <span class="co"># @array now has (5, 6). (The 7 is discarded.)</span>

<span class="fu">push</span>(<span class="dt">@array</span>, <span class="dv">0</span>);        <span class="co"># @array now has (5, 6, 0)</span>
<span class="fu">push</span> <span class="dt">@array</span>, <span class="dv">8</span>;         <span class="co"># @array now has (5, 6, 0, 8)</span>
<span class="fu">push</span> <span class="dt">@array</span>, <span class="dv">1</span>..<span class="dv">10</span>;     <span class="co"># @array now has those 10 new elements</span>
<span class="dt">@others</span> = <span class="kw">qw/</span> 9 0 2 1 0 <span class="kw">/</span>;
<span class="fu">push</span> <span class="dt">@array</span>, <span class="dt">@others</span>;   <span class="co"># @array now has those five new elements (19 total)</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">@array</span> = <span class="kw">qw#</span> dino fred barney <span class="kw">#</span>;
<span class="dt">$m</span> = <span class="fu">shift</span>(<span class="dt">@array</span>);     <span class="co"># $m gets &quot;dino&quot;, @array now has (&quot;fred&quot;, &quot;barney&quot;)</span>
<span class="dt">$n</span> = <span class="fu">shift</span> <span class="dt">@array</span>;      <span class="co"># $n gets &quot;fred&quot;, @array now has (&quot;barney&quot;)</span>
<span class="fu">shift</span> <span class="dt">@array</span>;           <span class="co"># @array is now empty</span>
<span class="dt">$o</span> = <span class="fu">shift</span> <span class="dt">@array</span>;      <span class="co"># $o gets undef, @array is still empty</span>
<span class="fu">unshift</span>(<span class="dt">@array</span>, <span class="dv">5</span>);     <span class="co"># @array now has the one-element list (5)</span>
<span class="fu">unshift</span> <span class="dt">@array</span>, <span class="dv">4</span>;      <span class="co"># @array now has (4, 5)</span>
<span class="dt">@others</span> = <span class="dv">1</span>..<span class="dv">3</span>;
<span class="fu">unshift</span> <span class="dt">@array</span>, <span class="dt">@others</span>; <span class="co"># @array now has (1, 2, 3, 4, 5)</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">@array</span> = <span class="kw">qw(</span> pebbles dino fred barney betty <span class="kw">)</span>;
<span class="dt">@removed</span> = <span class="fu">splice</span> <span class="dt">@array</span>, <span class="dv">2</span>; <span class="co"># remove everything after fred</span>
                             <span class="co"># @removed is qw(fred barney betty)</span>
                             <span class="co"># @array is qw(pebbles dino)</span>

<span class="dt">@array</span> = <span class="kw">qw(</span> pebbles dino fred barney betty <span class="kw">)</span>;
<span class="dt">@removed</span> = <span class="fu">splice</span> <span class="dt">@array</span>, <span class="dv">1</span>, <span class="dv">2</span>; <span class="co"># remove dino, fred</span>
                                <span class="co"># @removed is qw(dino fred)</span>
                                <span class="co"># @array is qw(pebbles barney betty)</span>

<span class="dt">@array</span> = <span class="kw">qw(</span> pebbles dino fred barney betty <span class="kw">)</span>;
<span class="dt">@removed</span> = <span class="fu">splice</span> <span class="dt">@array</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="kw">qw(</span>wilma<span class="kw">)</span>; <span class="co"># remove dino, fred</span>
                                           <span class="co"># @removed is qw(dino fred)</span>
                                           <span class="co"># @array is qw(pebbles wilma</span>
                                           <span class="co"># barney betty)</span>

<span class="dt">@array</span> = <span class="kw">qw(</span> pebbles dino fred barney betty <span class="kw">)</span>;
<span class="dt">@removed</span> = <span class="fu">splice</span> <span class="dt">@array</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="kw">qw(</span>wilma<span class="kw">)</span>; <span class="co"># remove nothing</span>
                                           <span class="co"># @removed is qw()</span>
                                           <span class="co"># @array is qw( pebbles wilma</span>
                                           <span class="co">#    dino fred barney betty )</span></code></pre></div>
<p>&#24635;&#32467;&#65306;&#21024;&#38500;&#33539;&#22260;&#26159; <code>[i, j]</code>&#65292;&#25554;&#20837;&#26159;&#22312; i &#21069;&#38754;&#65288;&#26032;&#30340; <em>i</em>th&#65289;&#12290;</p>
</dd>
</dl>
<p>limestone <code>['la&#618;mston]</code> &#30707;&#28784;&#23721;</p>
<dl>
<dt>Interpolating Arrays into Strings</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">@rocks</span> = <span class="kw">qw{</span> flintstone slate rubble <span class="kw">}</span>;
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">quartz </span><span class="dt">@rocks</span><span class="st"> limestone</span><span class="ch">\n</span><span class="kw">&quot;</span>;
<span class="co"># prints &quot;quartz flintstone slate rubble limestone&quot;</span>

<span class="dt">$email</span> = <span class="kw">&quot;</span><span class="st">fred\@bedrock.edu</span><span class="kw">&quot;</span>; <span class="co"># Correct</span>
<span class="dt">$email</span> = <span class="kw">&#39;</span><span class="st">fred@bedrock.edu</span><span class="kw">&#39;</span>; <span class="co"># Another way to do that</span>

<span class="dt">@fred</span> = <span class="kw">qw(</span>hello dolly<span class="kw">)</span>;
<span class="dt">$y</span> = <span class="dv">2</span>;
<span class="dt">$x</span> = <span class="kw">&quot;</span><span class="st">This is </span><span class="dt">$fred</span><span class="st">[1]&#39;s place</span><span class="kw">&quot;</span>; <span class="co"># &quot;This is dolly&#39;s place&quot;</span>
<span class="dt">$x</span> = <span class="kw">&quot;</span><span class="st">This is </span><span class="dt">$fred</span><span class="st">[</span><span class="dt">$y</span><span class="st">-1]&#39;s place</span><span class="kw">&quot;</span>; <span class="co"># same thing</span>

<span class="dt">@fred</span> = <span class="kw">qw(</span>eating rocks is wrong<span class="kw">)</span>;
<span class="dt">$fred</span> = <span class="kw">&quot;</span><span class="st">right</span><span class="kw">&quot;</span>; <span class="co"># we are trying to say &quot;this is right[3]&quot;</span>
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">this is </span><span class="dt">$fred</span><span class="st">[3]</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># prints &quot;wrong&quot; using $fred[3]</span>
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">this is </span><span class="dt">${fred}</span><span class="st">[3]</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># prints &quot;right&quot; (protected by braces)</span>
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">this is </span><span class="dt">$fred</span><span class="kw">&quot;</span>.<span class="kw">&quot;</span><span class="st">[3]</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># right again (different string)</span>
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">this is </span><span class="dt">$fred</span><span class="st">\[3]</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># right again (backslash hides it)</span></code></pre></div>
</dd>
<dt>The foreach Control Structure</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">foreach</span> <span class="dt">$rock</span> (<span class="kw">qw/</span> bedrock slate lava <span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">One rock is </span><span class="dt">$rock</span><span class="st">.</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># Prints names of three rocks</span>
}

<span class="dt">@rocks</span> = <span class="kw">qw/</span> bedrock slate lava <span class="kw">/</span>;
<span class="kw">foreach</span> <span class="dt">$rock</span> (<span class="dt">@rocks</span>) {
    <span class="dt">$rock</span> = <span class="kw">&quot;</span><span class="ch">\t</span><span class="dt">$rock</span><span class="kw">&quot;</span>; <span class="co"># put a tab in front of each element of @rocks</span>
    <span class="dt">$rock</span> .= <span class="kw">&quot;</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># put a newline on the end of each</span>
}
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The rocks are:</span><span class="ch">\n</span><span class="kw">&quot;</span>, <span class="dt">@rocks</span>; <span class="co"># Each one is indented, on its own line</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$rock</span> = <span class="kw">&#39;</span><span class="st">shale</span><span class="kw">&#39;</span>;
<span class="dt">@rocks</span> = <span class="kw">qw/</span> bedrock slate lava <span class="kw">/</span>;
<span class="kw">foreach</span> <span class="dt">$rock</span> (<span class="dt">@rocks</span>) {
    ...
}
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">rock is still </span><span class="dt">$rock</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># &#39;rock is still shale&#39;</span></code></pre></div>
</dd>
<dt>Perl&#8217;s Favorite Default: <code>$_</code></dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">foreach</span> (<span class="dv">1</span>..<span class="dv">10</span>) { <span class="co"># Uses $_ by default</span>
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">I can count to </span><span class="dt">$_</span><span class="st">!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="co"># the reverse operator</span>
<span class="dt">@fred</span> = <span class="dv">6</span>..<span class="dv">10</span>;
<span class="dt">@barney</span> = <span class="fu">reverse</span>(<span class="dt">@fred</span>);   <span class="co"># gets 10, 9, 8, 7, 6</span>
<span class="dt">@wilma</span> = <span class="fu">reverse</span> <span class="dv">6</span>..<span class="dv">10</span>;     <span class="co"># gets the same thing, without the other array</span>
<span class="dt">@fred</span> = <span class="fu">reverse</span> <span class="dt">@fred</span>;      <span class="co"># puts the result back into the original array</span>

<span class="co"># the sort operator</span>
<span class="dt">@rocks</span> = <span class="kw">qw/</span> bedrock slate rubble granite <span class="kw">/</span>;
<span class="dt">@sorted</span> = <span class="fu">sort</span>(<span class="dt">@rocks</span>);      <span class="co"># gets bedrock, granite, rubble, slate</span>
<span class="dt">@back</span> = <span class="fu">reverse</span> <span class="fu">sort</span> <span class="dt">@rocks</span>; <span class="co"># these go from slate to bedrock</span>
<span class="dt">@rocks</span> = <span class="fu">sort</span> <span class="dt">@rocks</span>;        <span class="co"># puts sorted result back into @rocks</span>
<span class="dt">@numbers</span> = <span class="fu">sort</span> <span class="dv">97</span>..<span class="dv">102</span>;     <span class="co"># gets 100, 101, 102, 97, 98, 99</span>

<span class="co"># the each operator</span>
<span class="fu">use</span> <span class="fl">5.012</span>;

<span class="dt">@rocks</span> = <span class="kw">qw/</span> bedrock slate rubble granite <span class="kw">/</span>;
<span class="kw">while</span>( <span class="kw">my</span>( <span class="dt">$index</span>, <span class="dt">$value</span> ) = <span class="kw">each</span> <span class="dt">@rocks</span> ) {
    say <span class="kw">&quot;</span><span class="dt">$index</span><span class="st">: </span><span class="dt">$value</span><span class="kw">&quot;</span>;
}

<span class="dt">@rocks</span> = <span class="kw">qw/</span> bedrock slate rubble granite <span class="kw">/</span>;
<span class="kw">foreach</span> <span class="dt">$index</span> ( <span class="dv">0</span> .. <span class="dt">$#rocks</span> ) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="dt">$index</span><span class="st">: </span><span class="dt">$rocks</span><span class="st">[</span><span class="dt">$index</span><span class="st">]</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>Scalar and List Context</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dv">42</span> + something <span class="co"># The something must be a scalar</span>
<span class="fu">sort</span> something <span class="co"># The something must be a list</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">@people</span> = <span class="kw">qw(</span> fred barney betty <span class="kw">)</span>;
<span class="dt">@sorted</span> = <span class="fu">sort</span> <span class="dt">@people</span>; <span class="co"># list context: barney, betty, fred</span>
<span class="dt">$number</span> = <span class="dv">42</span> + <span class="dt">@people</span>; <span class="co"># scalar context: 42 + 3 gives 45</span>

<span class="dt">@list</span> = <span class="dt">@people</span>;        <span class="co"># a list of three people</span>
<span class="dt">$n</span> = <span class="dt">@people</span>;           <span class="co"># the number 3</span></code></pre></div>
</dd>
<dt>Using List-Producing Expressions in Scalar Context</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">@backwards</span> = <span class="fu">reverse</span> <span class="kw">qw/</span> yabba dabba doo <span class="kw">/</span>; <span class="co"># gives doo, dabba, yabba</span>
<span class="dt">$backwards</span> = <span class="fu">reverse</span> <span class="kw">qw/</span> yabba dabba doo <span class="kw">/</span>; <span class="co"># gives oodabbadabbay</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$fred</span> = something;                          <span class="co"># scalar context</span>
<span class="dt">@pebbles</span> = something;                       <span class="co"># list context</span>
(<span class="dt">$wilma</span>, <span class="dt">$betty</span>) = something;               <span class="co"># list context</span>
(<span class="dt">$dino</span>) = something;                        <span class="co"># still list context!</span></code></pre></div>
</dd>
</dl>
<p>Here are some other expressions you&#8217;ve seen, and the contexts they provide.</p>
<dl>
<dt>First, some that provide scalar context to something:</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$fred</span> = something;
<span class="dt">$fred</span>[<span class="dv">3</span>] = something;
<span class="dv">123</span> + something
something + <span class="dv">654</span>
<span class="kw">if</span> (something) { ... }
<span class="kw">while</span> (something) { ... }
<span class="dt">$fred</span>[something] = something;</code></pre></div>
</dd>
<dt>And here are some that provide a list context:</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">@fred</span> = something;
(<span class="dt">$fred</span>, <span class="dt">$barney</span>) = something;
(<span class="dt">$fred</span>) = something;
<span class="fu">push</span> <span class="dt">@fred</span>, something;
<span class="kw">foreach</span> <span class="dt">$fred</span> (something) { ... }
<span class="fu">sort</span> something
<span class="fu">reverse</span> something
<span class="fu">print</span> something</code></pre></div>
</dd>
<dt>Using Scalar-Producing Expressions in List Context</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">@fred</span> = <span class="dv">6</span> <span class="kw">*</span> <span class="dv">7</span>; <span class="co"># gets the one-element list (42)</span>
<span class="dt">@barney</span> = <span class="kw">&quot;</span><span class="st">hello</span><span class="kw">&quot;</span> . <span class="kw">&#39;</span><span class="st"> </span><span class="kw">&#39;</span> . <span class="kw">&quot;</span><span class="st">world</span><span class="kw">&quot;</span>;</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">@wilma</span> = <span class="fu">undef</span>; <span class="co"># OOPS! Gets the one-element list (undef)</span>
<span class="co"># which is not the same as this:</span>
<span class="dt">@betty</span> = ( ); <span class="co"># A correct way to empty an array</span></code></pre></div>
</dd>
<dt>Forcing Scalar Context</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">@rocks</span> = <span class="kw">qw(</span> talc quartz jade obsidian <span class="kw">)</span>;
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">How many rocks do you have?</span><span class="ch">\n</span><span class="kw">&quot;</span>;
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">I have </span><span class="kw">&quot;</span>, <span class="dt">@rocks</span>, <span class="kw">&quot;</span><span class="st"> rocks!</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># WRONG, prints names of rocks</span>
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">I have </span><span class="kw">&quot;</span>, <span class="fu">scalar</span> <span class="dt">@rocks</span>, <span class="kw">&quot;</span><span class="st"> rocks!</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># Correct, gives a number</span></code></pre></div>
</dd>
<dt><code>&lt;STDIN&gt;</code> in List Context</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">@lines</span> = <span class="kw">&lt;STDIN&gt;</span>;           <span class="co"># Read all the lines</span>
<span class="fu">chomp</span>(<span class="dt">@lines</span>);              <span class="co"># discard all the newline characters</span>

<span class="fu">chomp</span>(<span class="dt">@lines</span> = <span class="kw">&lt;STDIN&gt;</span>);    <span class="co"># Read the lines, not the newlines</span></code></pre></div>
</dd>
</dl>
<h2 id="subroutines">Subroutines</h2>
<dl>
<dt>Defining a Subroutine</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">sub </span><span class="fu">marine</span> {
    <span class="dt">$n</span> += <span class="dv">1</span>; <span class="co"># Global variable $n</span>
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Hello, sailor number </span><span class="dt">$n</span><span class="st">!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>Invoking a Subroutine</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl">&amp;marine; <span class="co"># says Hello, sailor number 1!</span>
&amp;marine; <span class="co"># says Hello, sailor number 2!</span>
&amp;marine; <span class="co"># says Hello, sailor number 3!</span>
&amp;marine; <span class="co"># says Hello, sailor number 4!</span></code></pre></div>
</dd>
<dt>Return Values</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">sub </span><span class="fu">sum_of_fred_and_barney</span> {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Hey, you called the sum_of_fred_and_barney subroutine!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
    <span class="dt">$fred</span> + <span class="dt">$barney</span>; <span class="co"># That&#39;s the return value</span>
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$fred</span> = <span class="dv">3</span>;
<span class="dt">$barney</span> = <span class="dv">4</span>;
<span class="dt">$wilma</span> = &amp;sum_of_fred_and_barney;       <span class="co"># $wilma gets 7</span>
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">\$wilma is </span><span class="dt">$wilma</span><span class="st">.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
<span class="dt">$betty</span> = <span class="dv">3</span> <span class="kw">*</span> &amp;sum_of_fred_and_barney;   <span class="co"># $betty gets 21</span>
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">\$betty is </span><span class="dt">$betty</span><span class="st">.</span><span class="ch">\n</span><span class="kw">&quot;</span>;</code></pre></div>
<p>be careful with your debugging <code>print</code>.</p>
</dd>
<dt>Arguments</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$n</span> = &amp;max(<span class="dv">10</span>, <span class="dv">15</span>); <span class="co"># This sub call has two parameters</span>

<span class="kw">sub </span><span class="fu">max</span> {
    <span class="co"># Compare this to &amp;larger_of_fred_or_barney</span>
    <span class="kw">if</span> (<span class="dt">$_</span>[<span class="dv">0</span>] &gt; <span class="dt">$_</span>[<span class="dv">1</span>]) {
        <span class="dt">$_</span>[<span class="dv">0</span>];
    } <span class="kw">else</span> {
        <span class="dt">$_</span>[<span class="dv">1</span>];
    }
}</code></pre></div>
<p>But how about <code class="sourceCode perl">&amp;max(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">2</span>)</code>?</p>
</dd>
<dt>Private Variables in Subroutines</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">sub </span><span class="fu">max</span> {
    <span class="kw">my</span>(<span class="dt">$m</span>, <span class="dt">$n</span>);             <span class="co"># new, private variables for this block</span>
    (<span class="dt">$m</span>, <span class="dt">$n</span>) = <span class="dt">@_</span>;          <span class="co"># give names to the parameters</span>
    <span class="kw">if</span> (<span class="dt">$m</span> &gt; <span class="dt">$n</span>) { <span class="dt">$m</span> } <span class="kw">else</span> { <span class="dt">$n</span> }
}</code></pre></div>
</dd>
<dt>Variable-Length Parameter Lists</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">sub </span><span class="fu">max</span> {
    <span class="kw">if</span> (<span class="dt">@_</span> != <span class="dv">2</span>) {
        <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">WARNING! &amp;max should get exactly two arguments!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
    }
    <span class="co"># continue as before...</span>
    .
    .
    .
}</code></pre></div>
</dd>
<dt>A Better &amp;max Routine</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">sub </span><span class="fu">max</span> {
    <span class="kw">my</span>(<span class="dt">$max_so_far</span>) = <span class="fu">shift</span> <span class="dt">@_</span>;   <span class="co"># the first one is the largest yet seen</span>
    <span class="kw">foreach</span> (<span class="dt">@_</span>) {                <span class="co"># look at the remaining arguments</span>
        <span class="kw">if</span> (<span class="dt">$_</span> &gt; <span class="dt">$max_so_far</span>) {   <span class="co"># could this one be bigger yet?</span>
            <span class="dt">$max_so_far</span> = <span class="dt">$_</span>;
        }
    }
    <span class="dt">$max_so_far</span>;
}</code></pre></div>
<dl>
<dt>Empty Parameter Lists</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$maximum</span> = &amp;max(<span class="dt">@numbers</span>); <span class="co"># undef</span></code></pre></div>
</dd>
</dl>
</dd>
<dt>Notes on Lexical (my) Variables</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">foreach</span> (<span class="dv">1</span>..<span class="dv">10</span>) {
    <span class="kw">my</span>(<span class="dt">$square</span>) = <span class="dt">$_</span> <span class="kw">*</span> <span class="dt">$_</span>; <span class="co"># private variable in this loop</span>
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="dt">$_</span><span class="st"> squared is </span><span class="dt">$square</span><span class="st">.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>Note also that the my operator doesn&#8217;t change the context of an assignment:</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span>(<span class="dt">$num</span>) = <span class="dt">@_</span>;      <span class="co"># list context, same as ($num) = @_;</span>
<span class="kw">my</span> <span class="dt">$num</span>  = <span class="dt">@_</span>;      <span class="co"># scalar context, same as $num = @_;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$fred</span>, <span class="dt">$barney</span>;  <span class="co"># WRONG! Fails to declare $barney</span>
<span class="kw">my</span>(<span class="dt">$fred</span>, <span class="dt">$barney</span>); <span class="co"># declares both</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">foreach</span> <span class="kw">my</span> <span class="dt">$rock</span> (<span class="kw">qw/</span> bedrock slate lava <span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">One rock is </span><span class="dt">$rock</span><span class="st">.</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># Prints names of three rocks</span>
}</code></pre></div>
</dd>
<dt>The use strict Pragma</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="kw">strict</span>;                          <span class="co"># Enforce some good programming rules</span>

<span class="co"># Starting with Perl 5.12, you implicitly use this pragma when you declare</span>
<span class="co"># a minimum Perl version:</span>
<span class="fu">use</span> <span class="fl">5.012</span>;                           <span class="co"># loads strict for you</span></code></pre></div>
</dd>
<dt>The return Operator</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">@names</span> = <span class="kw">qw/</span> fred barney betty dino wilma pebbles bamm-bamm <span class="kw">/</span>;
<span class="kw">my</span> <span class="dt">$result</span> = &amp;which_element_is(<span class="kw">&quot;</span><span class="st">dino</span><span class="kw">&quot;</span>, <span class="dt">@names</span>);
<span class="kw">sub </span><span class="fu">which_element_is</span> {
    <span class="kw">my</span>(<span class="dt">$what</span>, <span class="dt">@array</span>) = <span class="dt">@_</span>;
    <span class="kw">foreach</span> (<span class="dv">0</span>..<span class="dt">$#array</span>) {          <span class="co"># indices of @array&#39;s elements</span>
        <span class="kw">if</span> (<span class="dt">$what</span> <span class="kw">eq</span> <span class="dt">$array</span>[<span class="dt">$_</span>]) {
            <span class="kw">return</span> <span class="dt">$_</span>;              <span class="co"># return early once found</span>
        }
    }
    &#8211;<span class="dv">1</span>;                             <span class="co"># return is optional here</span>
}</code></pre></div>
</dd>
<dt>Omitting the Ampersand</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">sub </span><span class="fu">chomp</span> {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Munch, munch!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}
&amp;<span class="fu">chomp</span>; <span class="co"># That ampersand is not optional!</span></code></pre></div>
<p>&#40664;&#35748;&#35843;&#29992;&#21407;&#29983;&#30340;&#12290;</p>
</dd>
<dt>Non-Scalar Return Values</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">sub </span><span class="fu">list_from_fred_to_barney</span> {
    <span class="kw">if</span> (<span class="dt">$fred</span> &lt; <span class="dt">$barney</span>) {
        <span class="co"># Count upwards from $fred to $barney</span>
        <span class="dt">$fred</span>..<span class="dt">$barney</span>;
    } <span class="kw">else</span> {
        <span class="co"># Count downwards from $fred to $barney</span>
        <span class="fu">reverse</span> <span class="dt">$barney</span>..<span class="dt">$fred</span>;
    }
}</code></pre></div>
</dd>
<dt>Persistent, Private Variable</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">sub </span><span class="fu">marine</span> {
    <span class="kw">state</span> <span class="dt">$n</span> = <span class="dv">0</span>;           <span class="co"># private, persistent variable $n</span>
    <span class="dt">$n</span> += <span class="dv">1</span>;
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Hello, sailor number </span><span class="dt">$n</span><span class="st">!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fl">5.010</span>;
running_sum( <span class="dv">5</span>, <span class="dv">6</span> );
running_sum( <span class="dv">1</span>..<span class="dv">3</span> );
running_sum( <span class="dv">4</span> );
<span class="kw">sub </span><span class="fu">running_sum</span> {
    <span class="kw">state</span> <span class="dt">$sum</span> = <span class="dv">0</span>;
    <span class="kw">state</span> <span class="dt">@numbers</span>;
    <span class="kw">foreach</span> <span class="kw">my</span> <span class="dt">$number</span> ( <span class="dt">@_</span> ) {
        <span class="fu">push</span> <span class="dt">@numbers</span>, <span class="dt">$number</span>;
        <span class="dt">$sum</span> += <span class="dt">$number</span>;
    }
    say <span class="kw">&quot;</span><span class="st">The sum of (</span><span class="dt">@numbers</span><span class="st">) is </span><span class="dt">$sum</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
</dl>
<h2 id="input-and-output">Input and Output</h2>
<dl>
<dt>Input from Standard Input</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$line</span> = <span class="kw">&lt;STDIN&gt;</span>;            <span class="co"># read the next line</span>
<span class="fu">chomp</span>(<span class="dt">$line</span>);               <span class="co"># and chomp it</span>

<span class="co"># same thing, but more *idiomatically*</span>
<span class="fu">chomp</span>(<span class="dt">$line</span> = <span class="kw">&lt;STDIN&gt;</span>);</code></pre></div>
<p><strong>idiomatically</strong> &#36825;&#20010;&#35789;&#65292;&#21487;&#20197;&#29702;&#35299;&#20026;&#8220;&#22320;&#36947;&#8221;&#12290;&#32534;&#31243;&#36825;&#19996;&#35199;&#65292;&#22823;&#23478;&#37117;&#29992;&#30340;&#65292;&#20960;&#20046;&#23601;&#26159;&#26368;&#22909;&#30340;&#12290;</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="co"># much typing</span>
<span class="kw">while</span> (<span class="fu">defined</span>(<span class="dt">$line</span> = <span class="kw">&lt;STDIN&gt;</span>)) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">I saw </span><span class="dt">$line</span><span class="kw">&quot;</span>;
}

<span class="co"># easier to type &amp; read</span>
<span class="kw">while</span> (<span class="kw">&lt;STDIN&gt;</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">I saw </span><span class="dt">$_</span><span class="kw">&quot;</span>;
}

<span class="co"># bulk reading at once</span>
<span class="kw">foreach</span> (<span class="kw">&lt;STDIN&gt;</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">I saw </span><span class="dt">$_</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>Input from the Diamond Operator</dt>
<dd><p>The diamond operator is actually a special kind of line-input operator. But instead of getting the input from the keyboard, it comes from the user&#8217;s choice of input:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">while</span> (<span class="fu">defined</span>(<span class="dt">$line</span> = &lt;&gt;)) {
    <span class="fu">chomp</span>(<span class="dt">$line</span>);
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">It was </span><span class="dt">$line</span><span class="st"> that I saw!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="kw">while</span> (&lt;&gt;) {
    <span class="fu">chomp</span>;
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">It was </span><span class="dt">$_</span><span class="st"> that I saw!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>The Invocation Arguments</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">@ARGV</span> = <span class="kw">qw#</span> larry moe curly <span class="kw">#</span>; <span class="co"># force these three files to be read</span>
<span class="kw">while</span> (&lt;&gt;) {
    <span class="fu">chomp</span>;
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">It was </span><span class="dt">$_</span><span class="st"> that I saw in some stooge-like file!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>Output to Standard Output</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">print</span> <span class="dt">@array</span>;    <span class="co"># print a list of items</span>
<span class="fu">print</span> <span class="kw">&quot;</span><span class="dt">@array</span><span class="kw">&quot;</span>;  <span class="co"># print a string (containing an interpolated array)</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">print</span> (<span class="dv">2+3</span>)*<span class="dv">4</span>;          <span class="co"># Oops!</span>
( <span class="fu">print</span>(<span class="dv">2+3</span>) ) <span class="kw">*</span> <span class="dv">4</span>;     <span class="co"># Oops!</span></code></pre></div>
</dd>
<dt>Formatted Output with printf</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">printf</span> <span class="kw">&quot;</span><span class="st">Hello, </span><span class="dt">%s</span><span class="st">; your password expires in </span><span class="dt">%d</span><span class="st"> days!</span><span class="ch">\n</span><span class="kw">&quot;</span>,
        <span class="dt">$user</span>, <span class="dt">$days_to_die</span>;

<span class="co"># &quot;general&quot; numeric conversion</span>
<span class="fu">printf</span> <span class="kw">&quot;</span><span class="dt">%g</span><span class="st"> </span><span class="dt">%g</span><span class="st"> </span><span class="dt">%g</span><span class="ch">\n</span><span class="kw">&quot;</span>, <span class="dv">5</span>/<span class="dv">2</span>, <span class="dv">51</span>/<span class="dv">17</span>, <span class="dv">51</span> *<span class="kw">*</span> <span class="dv">17</span>; <span class="co"># 2.5 3 1.0683e+29</span>

<span class="fu">printf</span> <span class="kw">&quot;</span><span class="dt">%6d</span><span class="ch">\n</span><span class="kw">&quot;</span>, <span class="dv">42</span>; <span class="co"># output like ````42 (the ` symbol stands for a space)</span>
<span class="fu">printf</span> <span class="kw">&quot;</span><span class="dt">%2d</span><span class="ch">\n</span><span class="kw">&quot;</span>, 2e3 + <span class="fl">1.95</span>; <span class="co"># 2001</span>

<span class="fu">printf</span> <span class="kw">&quot;</span><span class="dt">%10s</span><span class="ch">\n</span><span class="kw">&quot;</span>, <span class="kw">&quot;</span><span class="st">wilma</span><span class="kw">&quot;</span>; <span class="co"># looks like `````wilma</span>
<span class="fu">printf</span> <span class="kw">&quot;</span><span class="st">%-15s</span><span class="ch">\n</span><span class="kw">&quot;</span>, <span class="kw">&quot;</span><span class="st">flintstone</span><span class="kw">&quot;</span>; <span class="co"># left-justified</span>

<span class="fu">printf</span> <span class="kw">&quot;</span><span class="dt">%12f</span><span class="ch">\n</span><span class="kw">&quot;</span>, <span class="dv">6</span> <span class="kw">*</span> <span class="dv">7</span> + <span class="dv">2</span>/<span class="dv">3</span>; <span class="co"># looks like ```42.666667</span>
<span class="fu">printf</span> <span class="kw">&quot;</span><span class="dt">%12</span><span class="st">.3f</span><span class="ch">\n</span><span class="kw">&quot;</span>, <span class="dv">6</span> <span class="kw">*</span> <span class="dv">7</span> + <span class="dv">2</span>/<span class="dv">3</span>; <span class="co"># looks like ``````42.667</span>
<span class="fu">printf</span> <span class="kw">&quot;</span><span class="dt">%12</span><span class="st">.0f</span><span class="ch">\n</span><span class="kw">&quot;</span>, <span class="dv">6</span> <span class="kw">*</span> <span class="dv">7</span> + <span class="dv">2</span>/<span class="dv">3</span>; <span class="co"># looks like ``````````43</span></code></pre></div>
</dd>
<dt>Arrays and printf</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">@items</span> = <span class="kw">qw(</span> wilma dino pebbles <span class="kw">)</span>;
<span class="kw">my</span> <span class="dt">$format</span> = <span class="kw">&quot;</span><span class="st">The items are:</span><span class="ch">\n</span><span class="kw">&quot;</span> . (<span class="kw">&quot;</span><span class="dt">%10s</span><span class="ch">\n</span><span class="kw">&quot;</span> x <span class="dt">@items</span>);
<span class="co">## print &quot;the format is &gt;&gt;$format&lt;&lt;\n&quot;; # for debugging</span>
<span class="fu">printf</span> <span class="dt">$format</span>, <span class="dt">@items</span>;

<span class="co"># even shorted and better</span>
<span class="fu">printf</span> <span class="kw">&quot;</span><span class="st">The items are:</span><span class="ch">\n</span><span class="kw">&quot;</span>.(<span class="kw">&quot;</span><span class="dt">%10s</span><span class="ch">\n</span><span class="kw">&quot;</span> x <span class="dt">@items</span>), <span class="dt">@items</span>;</code></pre></div>
</dd>
<dt>Filehandles</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">open</span> CONFIG, <span class="kw">&#39;</span><span class="st">dino</span><span class="kw">&#39;</span>;
<span class="fu">open</span> CONFIG, <span class="kw">&#39;</span><span class="st">&lt;dino</span><span class="kw">&#39;</span>;
<span class="fu">open</span> BEDROCK, <span class="kw">&#39;</span><span class="st">&gt;fred</span><span class="kw">&#39;</span>;
<span class="fu">open</span> LOG, <span class="kw">&#39;</span><span class="st">&gt;&gt;logfile</span><span class="kw">&#39;</span>;

<span class="fu">open</span> CONFIG, <span class="kw">&#39;</span><span class="st">&lt;:encoding(UTF-8)</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">dino</span><span class="kw">&#39;</span>;
<span class="fu">open</span> BEDROCK, <span class="kw">&#39;</span><span class="st">&gt;:encoding(UTF-8)</span><span class="kw">&#39;</span>, <span class="dt">$file_name</span>;
<span class="fu">open</span> LOG, <span class="kw">&#39;</span><span class="st">&gt;&gt;:encoding(UTF-8)</span><span class="kw">&#39;</span>, &amp;logfile_name();

<span class="fu">open</span> BEDROCK, <span class="kw">&#39;</span><span class="st">&gt;:utf8</span><span class="kw">&#39;</span>, <span class="dt">$file_name</span>; <span class="co"># probably not right</span></code></pre></div>
<p>With the encoding() form, you can specify other encodings too. You can get a list of all of the encodings that your perl understands with a Perl one-liner: <code class="sourceCode bash"><span class="kw">%</span> perl -MEncode -le <span class="st">&quot;print for Encode-&gt;encodings(&#39;:all&#39;)&quot;</span></code>.</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="co"># If you want a little-endian version of UTF-16:</span>
<span class="fu">open</span> BEDROCK, <span class="kw">&#39;</span><span class="st">&gt;:encoding(UTF-16LE)</span><span class="kw">&#39;</span>, <span class="dt">$file_name</span>;

<span class="co"># Or perhaps Latin-1:</span>
<span class="fu">open</span> BEDROCK, <span class="kw">&#39;</span><span class="st">&gt;:encoding(iso-8859-1)</span><span class="kw">&#39;</span>, <span class="dt">$file_name</span>;</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">open</span> BEDROCK, <span class="kw">&#39;</span><span class="st">&gt;:crlf</span><span class="kw">&#39;</span>, <span class="dt">$file_name</span>;
<span class="fu">open</span> BEDROCK, <span class="kw">&#39;</span><span class="st">&lt;:crlf</span><span class="kw">&#39;</span>, <span class="dt">$file_name</span>; <span class="co"># crlf -&gt; newline</span></code></pre></div>
</dd>
<dt>Binmoding Filehandles</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">binmode</span> STDOUT;                         <span class="co"># don&#39;t translate line endings</span>
<span class="fu">binmode</span> STDERR;                         <span class="co"># don&#39;t translate line endings</span>

<span class="fu">binmode</span> STDOUT, <span class="kw">&#39;</span><span class="st">:encoding(UTF-8)</span><span class="kw">&#39;</span>;
<span class="fu">binmode</span> STDERR, <span class="kw">&#39;</span><span class="st">:encoding(UTF-8)</span><span class="kw">&#39;</span>;</code></pre></div>
</dd>
<dt>Bad Filehandles</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$success</span> = <span class="fu">open</span> LOG, <span class="kw">&#39;</span><span class="st">&gt;&gt;</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">logfile</span><span class="kw">&#39;</span>; <span class="co"># capture the return value</span>
<span class="kw">if</span> ( ! <span class="dt">$success</span> ) {
    <span class="co"># The open failed</span>
    ...
}</code></pre></div>
</dd>
<dt>Closing a Filehandle</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">close</span> BEDROCK;</code></pre></div>
</dd>
<dt>Fatal Errors with die</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">if</span> ( ! <span class="fu">open</span> LOG, <span class="kw">&#39;</span><span class="st">&gt;&gt;</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">logfile</span><span class="kw">&#39;</span> ) {
    <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">Cannot create logfile: </span><span class="dt">$!</span><span class="kw">&quot;</span>;
}

<span class="kw">if</span> (<span class="dt">@ARGV</span> &lt; <span class="dv">2</span>) {
    <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">Not enough arguments</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>Warning Messages with warn</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">warn</span> ...</code></pre></div>
</dd>
<dt>Automatically die-ing</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> autodie;
<span class="fu">open</span> LOG, <span class="kw">&#39;</span><span class="st">&gt;&gt;</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">logfile</span><span class="kw">&#39;</span>;</code></pre></div>
</dd>
<dt>Using Filehandles</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">if</span> ( ! <span class="fu">open</span> PASSWD, <span class="kw">&quot;</span><span class="st">/etc/passwd</span><span class="kw">&quot;</span>) {
    <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">How did you get logged in? (</span><span class="dt">$!</span><span class="st">)</span><span class="kw">&quot;</span>;
}
<span class="kw">while</span> (<span class="kw">&lt;PASSWD&gt;</span>) {
    <span class="fu">chomp</span>;
    ...
}

<span class="co"># filehandles</span>
<span class="fu">print</span> LOG <span class="kw">&quot;</span><span class="st">Captain&#39;s log, stardate 3.14159</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># output goes to LOG</span>
<span class="fu">printf</span> STDERR <span class="kw">&quot;</span><span class="dt">%d</span><span class="st"> percent complete.</span><span class="ch">\n</span><span class="kw">&quot;</span>, <span class="dt">$done</span>/<span class="dt">$total</span> <span class="kw">*</span> <span class="dv">100</span>;

<span class="fu">printf</span> (STDERR <span class="kw">&quot;</span><span class="dt">%d</span><span class="st"> percent complete.</span><span class="ch">\n</span><span class="kw">&quot;</span>, <span class="dt">$done</span>/<span class="dt">$total</span> <span class="kw">*</span> <span class="dv">100</span>);
<span class="fu">printf</span> STDERR (<span class="kw">&quot;</span><span class="dt">%d</span><span class="st"> percent complete.</span><span class="ch">\n</span><span class="kw">&quot;</span>, <span class="dt">$done</span>/<span class="dt">$total</span> <span class="kw">*</span> <span class="dv">100</span>);</code></pre></div>
</dd>
<dt>Changing the Default Output Filehandle</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">select</span> BEDROCK;
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">I hope Mr. Slate doesn&#39;t find out about this.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Wilma!</span><span class="ch">\n</span><span class="kw">&quot;</span>;

<span class="fu">select</span> LOG;
<span class="dt">$|</span> = <span class="dv">1</span>; <span class="co"># don&#39;t keep LOG entries sitting in the buffer</span>

<span class="fu">select</span> STDOUT;
<span class="co"># ... time passes, babies learn to walk, tectonic plates shift, and then...</span>

<span class="fu">print</span> LOG <span class="kw">&quot;</span><span class="st">This gets written to the LOG at once!</span><span class="ch">\n</span><span class="kw">&quot;</span>;</code></pre></div>
</dd>
</dl>
<ul>
<li>tectonic <code>[t&#603;k't&#593;n&#618;k]</code> &#26500;&#36896;&#30340;&#65307;&#24314;&#31569;&#30340;&#65307;&#22320;&#22771;&#26500;&#36896;&#19978;&#30340;</li>
</ul>
<dl>
<dt>Reopening a Standard Filehandle</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="co"># Send errors to my private error log</span>
<span class="kw">if</span> ( ! <span class="fu">open</span> STDERR, <span class="kw">&quot;</span><span class="st">&gt;&gt;/home/barney/.error_log</span><span class="kw">&quot;</span> ) {
    <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">Can&#39;t open error log for append: </span><span class="dt">$!</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>Output with say</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fl">5.010</span>;
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Hello!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Hello!</span><span class="kw">&quot;</span>, <span class="kw">&quot;</span><span class="ch">\n</span><span class="kw">&quot;</span>;
say <span class="kw">&quot;</span><span class="st">Hello!</span><span class="kw">&quot;</span>;

<span class="fu">use</span> <span class="fl">5.010</span>;
<span class="kw">my</span> <span class="dt">@array</span> = <span class="kw">qw(</span> a b c d <span class="kw">)</span>;
say <span class="dt">@array</span>;                     <span class="co"># &quot;abcd\n&quot;</span>
say <span class="kw">&quot;</span><span class="dt">@array</span><span class="kw">&quot;</span>;                   <span class="co"># &quot;a b c d\n&quot;;</span>

<span class="co"># file handle</span>
<span class="fu">use</span> <span class="fl">5.010</span>;
say BEDROCK <span class="kw">&quot;</span><span class="st">Hello!</span><span class="kw">&quot;</span>;</code></pre></div>
</dd>
<dt>Filehandles in a Scalar</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$rocks_fh</span>;
<span class="fu">open</span> <span class="dt">$rocks_fh</span>, <span class="kw">&#39;</span><span class="st">&lt;</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">rocks.txt</span><span class="kw">&#39;</span>
    <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">Could not open rocks.txt: </span><span class="dt">$!</span><span class="kw">&quot;</span>;

<span class="fu">open</span> <span class="kw">my</span> <span class="dt">$rocks_fh</span>, <span class="kw">&#39;</span><span class="st">&lt;</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">rocks.txt</span><span class="kw">&#39;</span>
    <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">Could not open rocks.txt: </span><span class="dt">$!</span><span class="kw">&quot;</span>;</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">while</span>( &lt;<span class="dt">$rocks_fh</span>&gt; ) {
    <span class="fu">chomp</span>;
    ...
}

<span class="fu">open</span> <span class="kw">my</span> <span class="dt">$rocks_fh</span>, <span class="kw">&#39;</span><span class="st">&gt;&gt;</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">rocks.txt</span><span class="kw">&#39;</span>
    <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">Could not open rocks.txt: </span><span class="dt">$!</span><span class="kw">&quot;</span>;
<span class="kw">foreach</span> <span class="kw">my</span> <span class="dt">$rock</span> ( <span class="kw">qw(</span> slate lava granite <span class="kw">)</span> ) {
    say <span class="dt">$rocks_fh</span> <span class="dt">$rock</span>
}
<span class="fu">print</span> <span class="dt">$rocks_fh</span> <span class="kw">&quot;</span><span class="st">limestone</span><span class="ch">\n</span><span class="kw">&quot;</span>;
<span class="fu">close</span> <span class="dt">$rocks_fh</span>;

<span class="co"># ?</span>
<span class="fu">print</span> { <span class="dt">$rock_fh</span> };             <span class="co"># uses $_ by default</span>
<span class="fu">print</span> { <span class="dt">$rocks</span>[<span class="dv">0</span>] } <span class="kw">&quot;</span><span class="st">sandstone</span><span class="ch">\n</span><span class="kw">&quot;</span>;</code></pre></div>
</dd>
</dl>
<h2 id="hashes">Hashes</h2>
<p>A hash as <strong>a barrel of data</strong>.</p>
<p>Yet another way to think of a hash is as <strong>a very simple database</strong>, in which just one piece of data may be filed under each key. In fact, if your task description includes phrases like &#8220;finding duplicates&#8221;, &#8220;unique&#8221;, &#8220;cross-reference&#8221;, or &#8220;lookup table&#8221;, it&#8217;s likely that a hash will be useful in the implementation.</p>
<dl>
<dt>Hash Element Access</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$hash</span>{key}

<span class="dt">$family_name</span>{<span class="kw">&#39;</span><span class="st">fred</span><span class="kw">&#39;</span>}        = <span class="kw">&#39;</span><span class="st">flintstone</span><span class="kw">&#39;</span>;
<span class="dt">$family_name</span>{<span class="kw">&#39;</span><span class="st">barney</span><span class="kw">&#39;</span>}      = <span class="kw">&#39;</span><span class="st">rubble</span><span class="kw">&#39;</span>;

<span class="kw">foreach</span> <span class="kw">my</span> <span class="dt">$person</span> (<span class="kw">qw&lt;</span> barney fred &gt;) {
    print &quot;I&#39;ve heard of $person $family_name{$person}.\n&quot;;
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$foo</span> = <span class="kw">&#39;</span><span class="st">bar</span><span class="kw">&#39;</span>;
<span class="fu">print</span> <span class="dt">$family_name</span>{ <span class="dt">$foo</span> . <span class="kw">&#39;</span><span class="st">ney</span><span class="kw">&#39;</span> }; <span class="co"># prints &#39;rubble&#39;</span>

<span class="co"># adds a new key (and value)</span>
<span class="dt">$family_name</span>{<span class="kw">&#39;</span><span class="st">wilma</span><span class="kw">&#39;</span>} = <span class="kw">&#39;</span><span class="st">flintstone</span><span class="kw">&#39;</span>;

<span class="co"># creates the element if needed</span>
<span class="dt">$family_name</span>{<span class="kw">&#39;</span><span class="st">betty</span><span class="kw">&#39;</span>} .= <span class="dt">$family_name</span>{<span class="kw">&#39;</span><span class="st">barney</span><span class="kw">&#39;</span>};

<span class="dt">$granite</span> = <span class="dt">$family_name</span>{<span class="kw">&#39;</span><span class="st">larry</span><span class="kw">&#39;</span>}; <span class="co"># undef</span></code></pre></div>
</dd>
<dt>The Hash As a Whole</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">%some_hash</span> = ( <span class="kw">&#39;</span><span class="st">foo</span><span class="kw">&#39;</span>, <span class="dv">35</span>, <span class="kw">&#39;</span><span class="st">bar</span><span class="kw">&#39;</span>, <span class="fl">12.4</span>, <span class="fl">2.5</span>, <span class="kw">&#39;</span><span class="st">hello</span><span class="kw">&#39;</span>,
               <span class="kw">&#39;</span><span class="st">wilma</span><span class="kw">&#39;</span>, <span class="fl">1.72e30</span>, <span class="kw">&#39;</span><span class="st">betty</span><span class="kw">&#39;</span>, <span class="kw">&quot;</span><span class="st">bye</span><span class="ch">\n</span><span class="kw">&quot;</span> );

<span class="dt">@any_array</span> = <span class="dt">%some_hash</span>; <span class="co"># list of key-value pairs</span>

<span class="fu">print</span> <span class="kw">&quot;</span><span class="dt">@any_array</span><span class="ch">\n</span><span class="kw">&quot;</span>;
<span class="co"># might give something like this:</span>
<span class="co"># betty bye (and a newline) wilma 1.72e+30 foo 35 2.5 hello bar 12.4</span></code></pre></div>
</dd>
<dt>Hash Assignment</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">%new_hash</span> = <span class="dt">%old_hash</span>
<span class="kw">my</span> <span class="dt">%inverse_hash</span> = <span class="fu">reverse</span> <span class="dt">%any_hash</span>; <span class="co"># think for a moment</span></code></pre></div>
</dd>
<dt>The Big Arrow</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">%last_name</span> = ( <span class="co"># a hash may be a lexical variable</span>
    <span class="kw">&#39;</span><span class="st">fred</span><span class="kw">&#39;</span> =&gt; <span class="kw">&#39;</span><span class="st">flintstone</span><span class="kw">&#39;</span>,
    <span class="kw">&#39;</span><span class="st">dino</span><span class="kw">&#39;</span> =&gt; <span class="fu">undef</span>,
    <span class="kw">&#39;</span><span class="st">barney</span><span class="kw">&#39;</span> =&gt; <span class="kw">&#39;</span><span class="st">rubble</span><span class="kw">&#39;</span>,
    <span class="kw">&#39;</span><span class="st">betty</span><span class="kw">&#39;</span> =&gt; <span class="kw">&#39;</span><span class="st">rubble</span><span class="kw">&#39;</span>,
);

<span class="kw">my</span> <span class="dt">%last_name</span> = (
    + =&gt; <span class="kw">&#39;</span><span class="st">flintstone</span><span class="kw">&#39;</span>, <span class="co"># WRONG! Compilation error!</span>
);

<span class="dt">$score</span>{<span class="kw">&#39;</span><span class="st">fred</span><span class="kw">&#39;</span>} <span class="co"># or $score{fred}</span>

<span class="co"># But beware; if there&#39;s anything inside the curly braces besides a</span>
<span class="co"># bareword, Perl will interpret it as an expression.  For instance, if</span>
<span class="co"># there is a  . , Perl interprets it as a string concatenation:</span>
<span class="dt">$hash</span>{ bar.foo } = <span class="dv">1</span>; <span class="co"># that&#39;s the key &#39;foobar&#39;</span></code></pre></div>
</dd>
<dt>Hash Functions</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">%hash</span> = (<span class="kw">&#39;</span><span class="st">a</span><span class="kw">&#39;</span> =&gt; <span class="dv">1</span>, <span class="kw">&#39;</span><span class="st">b</span><span class="kw">&#39;</span> =&gt; <span class="dv">2</span>, <span class="kw">&#39;</span><span class="st">c</span><span class="kw">&#39;</span> =&gt; <span class="dv">3</span>);
<span class="kw">my</span> <span class="dt">@k</span> = <span class="fu">keys</span> <span class="dt">%hash</span>;
<span class="kw">my</span> <span class="dt">@v</span> = <span class="fu">values</span> <span class="dt">%hash</span>;

<span class="kw">if</span> (<span class="dt">%hash</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">That was a true value!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="co"># each</span>

<span class="kw">while</span> ( (<span class="dt">$key</span>, <span class="dt">$value</span>) = <span class="kw">each</span> <span class="dt">%hash</span> ) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="dt">$key</span><span class="st"> =&gt; </span><span class="dt">$value</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="kw">foreach</span> <span class="dt">$key</span> (<span class="fu">sort</span> <span class="fu">keys</span> <span class="dt">%hash</span>) {
    <span class="dt">$value</span> = <span class="dt">$hash</span>{<span class="dt">$key</span>};
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="dt">$key</span><span class="st"> =&gt; </span><span class="dt">$value</span><span class="ch">\n</span><span class="kw">&quot;</span>;
    <span class="co"># Or, we could have avoided the extra $value variable:</span>
    <span class="co"># print &quot;$key =&gt; $hash{$key}\n&quot;;</span>
}</code></pre></div>
</dd>
<dt>Typical Use of a Hash</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$books</span>{<span class="kw">&quot;</span><span class="st">barney</span><span class="kw">&quot;</span>} = <span class="dv">0</span>; <span class="co"># no books currently checked out</span>
<span class="dt">$books</span>{<span class="kw">&quot;</span><span class="st">pebbles</span><span class="kw">&quot;</span>} = <span class="fu">undef</span>; <span class="co"># no books EVER checked out; a new library card</span>

<span class="kw">if</span> (<span class="fu">exists</span> <span class="dt">$books</span>{<span class="kw">&quot;</span><span class="st">dino</span><span class="kw">&quot;</span>}) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Hey, there&#39;s a library card for dino!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="kw">my</span> <span class="dt">$person</span> = <span class="kw">&quot;</span><span class="st">betty</span><span class="kw">&quot;</span>;
<span class="fu">delete</span> <span class="dt">$books</span>{<span class="dt">$person</span>}; <span class="co"># Revoke the library card for $person</span>

<span class="kw">foreach</span> <span class="dt">$person</span> (<span class="fu">sort</span> <span class="fu">keys</span> <span class="dt">%books</span>) { <span class="co"># each patron, in order</span>
    <span class="kw">if</span> (<span class="dt">$books</span>{<span class="dt">$person</span>}) {
        <span class="fu">print</span> <span class="kw">&quot;</span><span class="dt">$person</span><span class="st"> has </span><span class="dt">$books</span><span class="st">{</span><span class="dt">$person</span><span class="st">} items</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># fred has 3 items</span>
    }
}</code></pre></div>
</dd>
<dt>The <code>%ENV</code> hash</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">print</span> <span class="kw">&quot;</span><span class="st">PATH is </span><span class="dt">$ENV</span><span class="st">{PATH}</span><span class="ch">\n</span><span class="kw">&quot;</span>;</code></pre></div>
</dd>
</dl>
<h2 id="in-the-world-of-regular-expressions">In the World of Regular Expressions</h2>
<dl>
<dt>Using Simple Patterns</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$_</span> = <span class="kw">&quot;</span><span class="st">yabba dabba doo</span><span class="kw">&quot;</span>;
<span class="kw">if</span> (<span class="kw">/</span><span class="ot">abba</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">It matched!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>Unicode Properties: <code>\p{PROPERTY}</code></dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="co"># any sort of space</span>
<span class="kw">if</span> (<span class="kw">/</span><span class="ot">\p{Space}</span><span class="kw">/</span>) { <span class="co"># 26 different possible characters</span>
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The string has some whitespace.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="kw">if</span> (<span class="kw">/</span><span class="ot">\p{Digit}</span><span class="kw">/</span>) { <span class="co"># 411 different possible characters</span>
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The string has a digit.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="kw">if</span> (<span class="kw">/</span><span class="ot">\p{Hex}\p{Hex}</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The string has a pair of hex digits.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="kw">if</span> (<span class="kw">/</span><span class="ot">\P{Space}</span><span class="kw">/</span>) { <span class="co"># Not space (many many characters!)</span>
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The string has one or more non-whitespace characters.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>About Metacharacters</dt>
<dd><p>The dot (<code>.</code>) is a wildcard character, it matches any single character except a newline (which is represented by <code>\n</code>).</p>
<p>Simple Quantifiers</p>
<ul>
<li>the star (*)</li>
<li>the plus (+)</li>
<li>the question mark (?)</li>
</ul>
</dd>
<dt>Grouping in Patterns</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$_</span> = <span class="kw">&quot;</span><span class="st">abba</span><span class="kw">&quot;</span>;
<span class="kw">if</span> (<span class="kw">/</span><span class="ch">(</span><span class="ot">.</span><span class="ch">)</span><span class="dt">\1</span><span class="kw">/</span>) { <span class="co"># matches &#39;bb&#39;</span>
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">It matched same character next to itself!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$_</span> = <span class="kw">&quot;</span><span class="st">yabba dabba doo</span><span class="kw">&quot;</span>;
<span class="kw">if</span> (<span class="kw">/</span><span class="ot">y</span><span class="ch">(</span><span class="ot">....</span><span class="ch">)</span><span class="ot"> d</span><span class="dt">\1</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">It matched the same after y and d!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="dt">$_</span> = <span class="kw">&quot;</span><span class="st">yabba dabba doo</span><span class="kw">&quot;</span>;
<span class="kw">if</span> (<span class="kw">/</span><span class="ot">y</span><span class="ch">(</span><span class="ot">.</span><span class="ch">)(</span><span class="ot">.</span><span class="ch">)</span><span class="dt">\2\1</span><span class="kw">/</span>) { <span class="co"># matches &#39;abba&#39;</span>
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">It matched after the y!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="fu">use</span> <span class="fl">5.010</span>;
<span class="dt">$_</span> = <span class="kw">&quot;</span><span class="st">aa11bb</span><span class="kw">&quot;</span>;
<span class="kw">if</span> (<span class="kw">/</span><span class="ch">(</span><span class="ot">.</span><span class="ch">)</span><span class="ot">\g</span><span class="ch">{1}</span><span class="ot">11</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">It matched!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="fu">use</span> <span class="fl">5.010</span>;
<span class="dt">$_</span> = <span class="kw">&quot;</span><span class="st">aa11bb</span><span class="kw">&quot;</span>;
<span class="kw">if</span> (<span class="kw">/</span><span class="ch">(</span><span class="ot">.</span><span class="ch">)</span><span class="ot">\g</span><span class="ch">{1}</span><span class="ot">11</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">It matched!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>Alternatives</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">/</span><span class="ot">fred</span><span class="ch">|</span><span class="ot">barney</span><span class="ch">|</span><span class="ot">betty</span><span class="kw">/</span></code></pre></div>
</dd>
<dt>Character Classes</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$_</span> = <span class="kw">&quot;</span><span class="st">The HAL-9000 requires authorization to continue.</span><span class="kw">&quot;</span>;
<span class="kw">if</span> (<span class="kw">/</span><span class="ot">HAL-</span><span class="ch">[</span><span class="bn">0-9</span><span class="ch">]+</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The string mentions some model of HAL computer.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>Character Class Shortcuts</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$_</span> = <span class="kw">&#39;</span><span class="st">The HAL-9000 requires authorization to continue.</span><span class="kw">&#39;</span>;
<span class="kw">if</span> (<span class="kw">/</span><span class="ot">HAL-</span><span class="ch">[</span><span class="bn">\d</span><span class="ch">]+</span><span class="kw">/</span>) {
    say <span class="kw">&#39;</span><span class="st">The string mentions some model of HAL computer.</span><span class="kw">&#39;</span>;
}

<span class="fu">use</span> <span class="fl">5.010</span>;
<span class="kw">if</span> (<span class="kw">/</span><span class="bn">\s</span><span class="kw">/</span>a) { <span class="co"># old, ASCII semantics</span>
    say <span class="kw">&#39;</span><span class="st">The string matched ASCII whitespace.</span><span class="kw">&#39;</span>;
}
<span class="kw">if</span> (<span class="kw">/</span><span class="ot">\h</span><span class="kw">/</span>) {
    say <span class="kw">&#39;</span><span class="st">The string matched some horizontal whitespace.</span><span class="kw">&#39;</span>;
}
<span class="kw">if</span> (<span class="kw">/</span><span class="ot">\v</span><span class="kw">/</span>) {
    say <span class="kw">&#39;</span><span class="st">The string matched some vertical whitespace.</span><span class="kw">&#39;</span>;
}
<span class="kw">if</span> (<span class="kw">/</span><span class="ch">[</span><span class="bn">\v\h</span><span class="ch">]</span><span class="kw">/</span>) { <span class="co"># same as \p{Space}, but not more than \s</span>
    say <span class="kw">&#39;</span><span class="st">The string matched some whitespace.</span><span class="kw">&#39;</span>;
}</code></pre></div>
</dd>
<dt>Negating the Shortcuts</dt>
<dd><ul>
<li><code>[^\d]</code> =&gt; <code>\D</code></li>
<li><code>[^\w]</code> =&gt; <code>\W</code></li>
<li><code>[^\s]</code> =&gt; <code>\S</code></li>
</ul>
</dd>
</dl>
<h2 id="matching-with-regular-expressions">Matching with Regular Expressions</h2>
<dl>
<dt>Matches with <code>m//</code></dt>
<dd><p>Delimeters</p>
<ul>
<li><code>m/fred/</code></li>
<li><code>m,fred,</code></li>
<li><code>m!fred!</code></li>
<li><code>m^fred^</code></li>
</ul>
</dd>
<dt>Match Modifiers</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="co"># Case-Insensitive: `/i`</span>
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Would you like to play a game? </span><span class="kw">&quot;</span>;
<span class="fu">chomp</span>(<span class="dt">$_</span> = <span class="kw">&lt;STDIN&gt;</span>);
<span class="kw">if</span> (<span class="kw">/</span><span class="ot">yes</span><span class="kw">/i</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">In that case, I recommend that you go bowling.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="co"># Matching Any Character: `/s`: * -&gt; [\d\D], s: super star</span>
<span class="dt">$_</span> = <span class="kw">&quot;</span><span class="st">I saw Barney</span><span class="ch">\n</span><span class="st">down at the bowling alley</span><span class="ch">\n</span><span class="st">with Fred</span><span class="ch">\n</span><span class="st">last night.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
<span class="kw">if</span> (<span class="kw">/</span><span class="ot">Barney.</span><span class="ch">*</span><span class="ot">Fred</span><span class="kw">/s</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">That string mentions Fred after Barney!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="co"># Adding Whitespace with `/x`</span>
<span class="kw">/</span>
<span class="ot">-</span><span class="ch">?</span><span class="co">              # an optional minus sign</span>
<span class="ch">[</span><span class="bn">0-9</span><span class="ch">]+</span><span class="co">          # one or more digits before the decimal point</span>
<span class="ot">\.</span><span class="ch">?</span><span class="co">             # an optional decimal point</span>
<span class="ch">[</span><span class="bn">0-9</span><span class="ch">]*</span><span class="co">          # some optional digits after the decimal point</span>
<span class="kw">/x</span>

<span class="kw">/</span>
<span class="ch">[</span><span class="bn">0-9</span><span class="ch">]+</span><span class="co">          # one or more digits before the decimal point</span>
<span class="ch">[</span><span class="bn">#</span><span class="ch">]</span><span class="co">             # literal pound sign</span>
<span class="kw">/x</span>              <span class="co"># end of string</span>

<span class="co"># Combining Option Modifiers</span>
<span class="kw">if</span> (<span class="kw">/</span><span class="ot">barney.</span><span class="ch">*</span><span class="ot">fred</span><span class="kw">/is</span>) { <span class="co"># both /i and /s</span>
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">That string mentions Fred after Barney!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>Choosing a Character Interpretation</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fl">5.014</span>;
<span class="kw">/</span><span class="bn">\w</span><span class="ch">+</span><span class="kw">/</span>a         <span class="co"># A-Z, a-z, 0-9, _</span>
<span class="kw">/</span><span class="bn">\w</span><span class="ch">+</span><span class="kw">/</span>u         <span class="co"># any Unicode word charcter</span>
<span class="kw">/</span><span class="bn">\w</span><span class="ch">+</span><span class="kw">/</span>l         <span class="co"># The ASCII version, and word chars from the locale,</span>
               <span class="co"># perhaps characters like &#338; from Latin-9</span></code></pre></div>
<dl>
<dt><a href="http://unicode.org/Public/UNIDATA/CaseFolding.txt" class="uri">http://unicode.org/Public/UNIDATA/CaseFolding.txt</a></dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="co"># A single  /a modifier affects the character class shortcuts, but if you</span>
<span class="co"># have two  /a , it also tells Perl to use ASCII-only case-folding</span>
<span class="kw">/</span><span class="ot">k</span><span class="kw">/</span>aai <span class="co"># only matches the ASCII K or k, not Kelvin sign</span>
<span class="kw">/</span><span class="ot">k</span><span class="kw">/</span>aia <span class="co"># the /a&#39;s don&#39;t need to be next to each other</span>
<span class="kw">/</span><span class="ot">ss</span><span class="kw">/</span>aai <span class="co"># only matches ASCII ss, SS, sS, Ss, not &#223;</span>
<span class="kw">/</span><span class="ot">ff</span><span class="kw">/</span>aai <span class="co"># only matches ASCII ff, FF, fF, Ff, not ff</span></code></pre></div>
</dd>
</dl>
<p>In this case, you might get different results depending on how Perl treats the string in <code>$_</code> and the string in match operator. If your source code is in UTF-8 but your input is Latin-9, what happens? In Latin-9, the character &#338; has ordinal value <code>0xBC</code> and its lowercase partner <code>&#339;</code> has <code>0xBD</code>. In Unicode, <code>&#338;</code> is code point <code>U+0152</code> and <code>&#339;</code> is code point <code>U+0153</code>. In Unicode, <code>U+0OBC</code> is <code>&#188;</code> and doesn&#8217;t have a lowercase version. If your input in <code>$_</code> is <code>0xBD</code> and Perl treats that regular expression as UTF-8, you won&#8217;t&#8230;</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$_</span> = <span class="kw">&lt;STDIN&gt;</span>;
<span class="kw">my</span> <span class="dt">$OE</span> = <span class="fu">chr</span>( <span class="bn">0xBC</span> );       <span class="co"># get exactly what we intend</span>
<span class="kw">if</span> (<span class="kw">/</span><span class="dt">$OE</span><span class="kw">/i</span>) {               <span class="co"># case-insensitive??? Maybe not.</span>
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Found </span><span class="dt">$OE</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>Others options</dt>
<dd><p>see <code>perlop</code></p>
</dd>
<dt>Anchors</dt>
<dd><ul>
<li>beginnning of string: <code class="sourceCode perl"><span class="kw">m{</span><span class="ch">\A</span><span class="ot">https</span><span class="ch">?</span><span class="ot">://</span><span class="kw">}i</span></code></li>
<li>end of string: <code class="sourceCode perl"><span class="kw">m{</span><span class="ot">\.png</span><span class="ch">\z</span><span class="kw">}i</span></code></li>
<li>end of string: <code class="sourceCode perl">\Z</code>, allows an optional newline after it.</li>
<li><code class="sourceCode perl">^</code></li>
<li><code class="sourceCode perl">$</code></li>
<li>&#23545;&#20110;&#19968;&#20123; Perl4 &#20351;&#29992;&#32773;&#32780;&#35328;&#65292;<code>/^barney/m</code>, Without the <code>/m</code> , the <code>^</code>and <code>$</code> act just like <code>\A</code> and <code>\z</code>.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">while</span> (<span class="kw">&lt;STDIN&gt;</span>) {
    <span class="fu">print</span> <span class="kw">if</span> <span class="kw">/</span><span class="ot">\.png</span><span class="ch">\Z</span><span class="kw">/</span>;
}

<span class="kw">while</span> (<span class="kw">&lt;STDIN&gt;</span>) {
    <span class="fu">chomp</span>;
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="dt">$_</span><span class="ch">\n</span><span class="kw">&quot;</span> <span class="kw">if</span> <span class="kw">/</span><span class="ot">\.png</span><span class="ch">\z</span><span class="kw">/</span>;
}</code></pre></div>
<ul>
<li>word boundry, <code class="sourceCode perl"><span class="kw">/</span><span class="ch">\b</span><span class="ot">fred</span><span class="ch">\b</span><span class="kw">/</span></code></li>
<li>nonword boundary, <code>\B</code></li>
</ul>
</dd>
<dt>The Binding Operator <code class="sourceCode perl">=~</code></dt>
<dd><p>not just <code>$_</code></p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$some_other</span> = <span class="kw">&quot;</span><span class="st">I dream of betty rubble.</span><span class="kw">&quot;</span>;
<span class="kw">if</span> (<span class="dt">$some_other</span> =~ <span class="kw">/</span><span class="ch">\b</span><span class="ot">rub</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Aye, there&#39;s the rub.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>Interpolating into Patterns</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">#!/usr/bin/perl -w</span>
<span class="kw">my</span> <span class="dt">$what</span> = <span class="kw">&quot;</span><span class="st">larry</span><span class="kw">&quot;</span>;
<span class="kw">while</span> (&lt;&gt;) {
    <span class="kw">if</span> (<span class="kw">/</span><span class="ch">\A(</span><span class="dt">$what</span><span class="ch">)</span><span class="kw">/</span>) { <span class="co"># pattern is anchored at beginning of string</span>
        <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">We saw </span><span class="dt">$what</span><span class="st"> in beginning of </span><span class="dt">$_</span><span class="kw">&quot;</span>;
    }
}</code></pre></div>
</dd>
<dt>The Match Variables</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$_</span> = <span class="kw">&quot;</span><span class="st">Hello there, neighbor</span><span class="kw">&quot;</span>;
<span class="kw">if</span> (<span class="kw">/</span><span class="bn">\s</span><span class="ch">(</span><span class="ot">\[a-zA-Z]</span><span class="ch">+)</span><span class="ot">,</span><span class="kw">/</span>) {       <span class="co"># capture the word between space and comma</span>
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">the word was </span><span class="dt">$1</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># the word was there</span>
}

<span class="dt">$_</span> = <span class="kw">&quot;</span><span class="st">Hello there, neighbor</span><span class="kw">&quot;</span>;
<span class="kw">if</span> (<span class="kw">/</span><span class="ch">(</span><span class="bn">\S</span><span class="ch">+)</span><span class="ot"> </span><span class="ch">(</span><span class="bn">\S</span><span class="ch">+)</span><span class="ot">, </span><span class="ch">(</span><span class="bn">\S</span><span class="ch">+)</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">words were </span><span class="dt">$1</span><span class="st"> </span><span class="dt">$2</span><span class="st"> </span><span class="dt">$3</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="kw">my</span> <span class="dt">$dino</span> = <span class="kw">&quot;</span><span class="st">I fear that I&#39;ll be extinct after 1000 years.</span><span class="kw">&quot;</span>;
<span class="kw">if</span> (<span class="dt">$dino</span> =~ <span class="kw">/</span><span class="ch">([</span><span class="bn">0-9</span><span class="ch">]*)</span><span class="ot"> years</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">That said &#39;</span><span class="dt">$1</span><span class="kw">&#39;</span><span class="st"> years.</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># 1000</span>
}

<span class="dt">$dino</span> = <span class="kw">&quot;</span><span class="st">I fear that I&#39;ll be extinct after a few million years.</span><span class="kw">&quot;</span>;
<span class="kw">if</span> (<span class="dt">$dino</span> =~ <span class="kw">/</span><span class="ch">([</span><span class="bn">0-9</span><span class="ch">]*)</span><span class="ot"> years</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">That said &#39;</span><span class="dt">$1</span><span class="kw">&#39;</span><span class="st"> years.</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># empty string</span>
}</code></pre></div>
</dd>
<dt>The Persistence of Captures</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$wilma</span> = <span class="kw">&#39;</span><span class="st">123</span><span class="kw">&#39;</span>;
<span class="dt">$wilma</span> =~ <span class="kw">/</span><span class="ch">([</span><span class="bn">0-9</span><span class="ch">]+)</span><span class="kw">/</span>;                        <span class="co"># Succeeds, $1 is 123</span>
<span class="dt">$wilma</span> =~ <span class="kw">/</span><span class="ch">([</span><span class="bn">a-zA-Z</span><span class="ch">]+)</span><span class="kw">/</span>;                     <span class="co"># BAD! Untested match result</span>
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Wilma&#39;s word was </span><span class="dt">$1</span><span class="st">... or was it?</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># Still 123!</span>

<span class="co"># &#26368;&#22909;&#36824;&#26159;&#20889;&#22312; if-else &#37324;</span>
<span class="kw">if</span> (<span class="dt">$wilma</span> =~ <span class="kw">/</span><span class="ch">([</span><span class="bn">a-zA-Z</span><span class="ch">]+)</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Wilma&#39;s word was </span><span class="dt">$1</span><span class="st">.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
} <span class="kw">else</span> {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Wilma doesn&#39;t have a word.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>Noncapturing Parentheses</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">if</span> (<span class="kw">/</span><span class="ch">(</span><span class="ot">bronto</span><span class="ch">)?</span><span class="ot">saurus </span><span class="ch">(</span><span class="ot">steak</span><span class="ch">|</span><span class="ot">burger</span><span class="ch">)</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Fred wants a </span><span class="dt">$2</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="kw">if</span> (<span class="kw">/</span><span class="ch">(?:</span><span class="ot">bronto</span><span class="ch">)?</span><span class="ot">saurus </span><span class="ch">(</span><span class="ot">steak</span><span class="ch">|</span><span class="ot">burger</span><span class="ch">)</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Fred wants a </span><span class="dt">$1</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="kw">if</span> (<span class="kw">/</span><span class="ch">(?:</span><span class="ot">bronto</span><span class="ch">)?</span><span class="ot">saurus </span><span class="ch">(?:</span><span class="ot">BBQ </span><span class="ch">)?(</span><span class="ot">steak</span><span class="ch">|</span><span class="ot">burger</span><span class="ch">)</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Fred wants a </span><span class="dt">$1</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>Named Captures</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fl">5.010</span>;
<span class="kw">my</span> <span class="dt">$names</span> = <span class="kw">&#39;</span><span class="st">Fred or Barney</span><span class="kw">&#39;</span>;
<span class="kw">if</span> ( <span class="dt">$names</span> =~ <span class="kw">m/</span><span class="ch">(?&lt;</span><span class="ot">name1&gt;</span><span class="bn">\w</span><span class="ch">+)</span><span class="ot"> </span><span class="ch">(?:</span><span class="ot">and</span><span class="ch">|</span><span class="ot">or</span><span class="ch">)</span><span class="ot"> </span><span class="ch">(?&lt;</span><span class="ot">name2&gt;</span><span class="bn">\w</span><span class="ch">+)</span><span class="kw">/</span> ) {
    say <span class="kw">&quot;</span><span class="st">I saw </span><span class="dt">$+</span><span class="st">{name1} and </span><span class="dt">$+</span><span class="st">{name2}</span><span class="kw">&quot;</span>;
}

<span class="co"># Previously, you used either  \1 or  \g{1} for this. With a labeled group,</span>
<span class="co"># you can use the label in  \g{label} :</span>
<span class="fu">use</span> <span class="fl">5.010</span>;
<span class="kw">my</span> <span class="dt">$names</span> = <span class="kw">&#39;</span><span class="st">Fred Flintstone and Wilma Flintstone</span><span class="kw">&#39;</span>;
<span class="kw">if</span> ( <span class="dt">$names</span> =~ <span class="kw">m/</span><span class="ch">(?&lt;</span><span class="ot">last_name&gt;</span><span class="bn">\w</span><span class="ch">+)</span><span class="ot"> and </span><span class="bn">\w</span><span class="ch">+</span><span class="ot"> \g{last_name}</span><span class="kw">/</span> ) {
    say <span class="kw">&quot;</span><span class="st">I saw </span><span class="dt">$+</span><span class="st">{last_name}</span><span class="kw">&quot;</span>;
}

<span class="fu">use</span> <span class="fl">5.010</span>;
<span class="kw">my</span> <span class="dt">$names</span> = <span class="kw">&#39;</span><span class="st">Fred Flintstone and Wilma Flintstone</span><span class="kw">&#39;</span>;
<span class="kw">if</span> ( <span class="dt">$names</span> =~ <span class="kw">m/</span><span class="ch">(?&lt;</span><span class="ot">last_name&gt;</span><span class="bn">\w</span><span class="ch">+)</span><span class="ot"> and </span><span class="bn">\w</span><span class="ch">+</span><span class="ot"> \k&lt;last_name&gt;</span><span class="kw">/</span> ) {
    say <span class="kw">&quot;</span><span class="st">I saw </span><span class="dt">$+</span><span class="st">{last_name}</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>The Automatic Match Variables</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="co"># matched part</span>
<span class="kw">if</span> (<span class="kw">&quot;</span><span class="st">Hello there, neighbor</span><span class="kw">&quot;</span> =~ <span class="kw">/</span><span class="bn">\s</span><span class="ch">(</span><span class="bn">\w</span><span class="ch">+)</span><span class="ot">,</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">That actually matched &#39;</span><span class="dt">$&amp;</span><span class="st">&#39;.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="kw">if</span> (<span class="kw">&quot;</span><span class="st">Hello there, neighbor</span><span class="kw">&quot;</span> =~ <span class="kw">/</span><span class="bn">\s</span><span class="ch">(</span><span class="bn">\w</span><span class="ch">+)</span><span class="ot">,</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">That was (</span><span class="dt">$`</span><span class="st">)(</span><span class="dt">$&amp;</span><span class="st">)(</span><span class="dt">$&#39;</span><span class="st">).</span><span class="ch">\n</span><span class="kw">&quot;</span>;
    <span class="co">#           (Hello)( there,)( neighbor)</span>
}

<span class="fu">use</span> <span class="fl">5.010</span>;
<span class="kw">if</span> (<span class="kw">&quot;</span><span class="st">Hello there, neighbor</span><span class="kw">&quot;</span> =~ <span class="kw">/</span><span class="bn">\s</span><span class="ch">(</span><span class="bn">\w</span><span class="ch">+)</span><span class="ot">,</span><span class="kw">/</span>p) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">That actually matched &#39;</span><span class="dt">$</span><span class="st">{^MATCH}&#39;.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}
<span class="kw">if</span> (<span class="kw">&quot;</span><span class="st">Hello there, neighbor</span><span class="kw">&quot;</span> =~ <span class="kw">/</span><span class="bn">\s</span><span class="ch">(</span><span class="bn">\w</span><span class="ch">+)</span><span class="ot">,</span><span class="kw">/</span>p) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">That was (</span><span class="dt">$</span><span class="st">{^PREMATCH})(</span><span class="dt">$</span><span class="st">{^MATCH})(</span><span class="dt">$</span><span class="st">{^POSTMATCH}).</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>General Quantifiers</dt>
<dd><ul>
<li><code class="sourceCode perl">*</code>: <code class="sourceCode perl">{<span class="dv">0</span>,}</code></li>
<li><code class="sourceCode perl">+</code>: <code class="sourceCode perl">{<span class="dv">1</span>,}</code></li>
<li><code class="sourceCode perl">?</code>: <code class="sourceCode perl">{<span class="dv">0</span>,<span class="dv">1</span>}</code></li>
<li><code class="sourceCode perl">{<span class="kw">m,</span><span class="ot">n}</span></code></li>
<li><code class="sourceCode perl"><span class="kw">/</span><span class="bn">\w</span><span class="ch">{8}</span><span class="kw">/</span></code></li>
</ul>
</dd>
<dt>Precedence</dt>
<dd><table>
<thead>
<tr class="header">
<th align="left">Regular expression feature</th>
<th align="center">Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Parentheses (grouping or capturing)</td>
<td align="center"><code>(&#8230;)</code>, <code>(?:&#8230;)</code>, <code>(?&lt;LABEL&gt;&#8230;)</code></td>
</tr>
<tr class="even">
<td align="left">Quantifiers</td>
<td align="center"><code>a*</code>, <code>a+</code>, <code>a?</code>, <code>a{n,m}</code></td>
</tr>
<tr class="odd">
<td align="left">Anchors and sequence</td>
<td align="center"><code>abc</code>, <code>^</code>, <code>$</code>, <code>\A</code>, <code>\b</code>, <code>\z</code>, <code>\Z</code></td>
</tr>
<tr class="even">
<td align="left">Alternation</td>
<td align="center"><code>a|b|c</code></td>
</tr>
<tr class="odd">
<td align="left">Atoms</td>
<td align="center"><code>a</code>, <code>[abc]</code>, <code>\d</code>, <code>\1</code>, <code>\g{2}</code></td>
</tr>
</tbody>
</table>
</dd>
<dt>And There&#8217;s More</dt>
<dd><p>Although we&#8217;ve covered all of the regular expression features that most people are likely to need for everyday programming, there are still even more features. A few are covered in Intermediate Perl, but also check the perlre, perlrequick, and perlretut documentation for more information about what patterns in Perl can do.</p>
</dd>
<dt>A Pattern Test Program</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">#!/usr/bin/perl</span>
<span class="kw">while</span> (&lt;&gt;) {                            <span class="co"># take one input line at a time</span>
    <span class="fu">chomp</span>;
    <span class="kw">if</span> (<span class="kw">/</span><span class="ot">YOUR_PATTERN_GOES_HERE</span><span class="kw">/</span>) {
        <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Matched: |</span><span class="dt">$`</span><span class="st">&lt;</span><span class="dt">$&amp;</span><span class="st">&gt;</span><span class="dt">$&#39;</span><span class="st">|</span><span class="ch">\n</span><span class="kw">&quot;</span>;  <span class="co"># the special match vars</span>
    } <span class="kw">else</span> {
        <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">No match: |</span><span class="dt">$_</span><span class="st">|</span><span class="ch">\n</span><span class="kw">&quot;</span>;
    }
}</code></pre></div>
</dd>
</dl>
<h2 id="processing-text-with-regular-expressions">Processing Text with Regular Expressions</h2>
<dl>
<dt>Substitutions with <code>s///</code></dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">s/</span><span class="ot">with </span><span class="ch">(</span><span class="bn">\w</span><span class="ch">+)</span><span class="kw">/</span><span class="st">against </span><span class="dt">$1</span><span class="kw">&#39;</span><span class="dt">s</span><span class="st"> team</span><span class="kw">/</span>;
<span class="fu">print</span> <span class="kw">&quot;</span><span class="dt">$_</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># says &quot;He&#39;s out bowling against Fred&#39;s team tonight.&quot;</span>

<span class="dt">$_</span> = <span class="kw">&quot;</span><span class="st">green scaly dinosaur</span><span class="kw">&quot;</span>;
<span class="kw">s/</span><span class="ch">(</span><span class="bn">\w</span><span class="ch">+)</span><span class="ot"> </span><span class="ch">(</span><span class="bn">\w</span><span class="ch">+)</span><span class="kw">/</span><span class="dt">$2</span><span class="st">, </span><span class="dt">$1</span><span class="kw">/</span>;          <span class="co"># Now it&#39;s &quot;scaly, green dinosaur&quot;</span>
<span class="kw">s/</span><span class="ch">^</span><span class="kw">/</span><span class="st">huge, </span><span class="kw">/</span>;                    <span class="co"># Now it&#39;s &quot;huge, scaly, green dinosaur&quot;</span>
<span class="kw">s/</span><span class="ot">,.</span><span class="ch">*</span><span class="ot">een</span><span class="kw">//</span>;                     <span class="co"># Now it&#39;s &quot;huge dinosaur&quot;</span>
<span class="kw">s/</span><span class="ot">green</span><span class="kw">/</span><span class="st">red</span><span class="kw">/</span>;                   <span class="co"># Failed match: still &quot;huge dinosaur&quot;</span>
<span class="kw">s/</span><span class="bn">\w</span><span class="ch">+$</span><span class="kw">/</span><span class="st">(</span><span class="dt">$`</span><span class="st">!)</span><span class="dt">$&amp;</span><span class="kw">/</span>;                <span class="co"># Now it&#39;s &quot;huge (huge !)dinosaur&quot;</span>
<span class="kw">s/</span><span class="bn">\s</span><span class="ch">+(</span><span class="ot">!</span><span class="bn">\W</span><span class="ch">+)</span><span class="kw">/</span><span class="dt">$1</span><span class="st"> </span><span class="kw">/</span>;               <span class="co"># Now it&#39;s &quot;huge (huge!) dinosaur&quot;</span>
<span class="kw">s/</span><span class="ot">huge</span><span class="kw">/</span><span class="st">gigantic</span><span class="kw">/</span>;               <span class="co"># Now it&#39;s &quot;gigantic (huge!) dinosaur&quot;</span>

<span class="dt">$_</span> = <span class="kw">&quot;</span><span class="st">fred flintstone</span><span class="kw">&quot;</span>;
<span class="kw">if</span> (<span class="kw">s/</span><span class="ot">fred</span><span class="kw">/</span><span class="st">wilma</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Successfully replaced fred with wilma!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>Global Replacements with <code>/g</code></dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">s/</span><span class="ch">^</span><span class="bn">\s</span><span class="ch">+</span><span class="kw">//</span>;               <span class="co"># Replace leading whitespace with nothing</span>
<span class="kw">s/</span><span class="bn">\s</span><span class="ch">+$</span><span class="kw">//</span>;               <span class="co"># Replace trailing whitespace with nothing</span>

<span class="kw">s/</span><span class="ch">^</span><span class="bn">\s</span><span class="ch">+|</span><span class="bn">\s</span><span class="ch">+$</span><span class="kw">//g</span>;         <span class="co"># Strip leading, trailing whitespace</span></code></pre></div>
</dd>
<dt>Different Delimiters</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">s#</span><span class="ch">^</span><span class="ot">https://</span><span class="kw">#</span><span class="st">http://</span><span class="kw">#</span>;
<span class="kw">s{</span><span class="ot">fred</span><span class="kw">}{</span><span class="st">barney</span><span class="kw">}</span>;
<span class="kw">s[</span><span class="ot">fred</span><span class="kw">]</span><span class="st">(barney);</span>
<span class="st">s&lt;fred&gt;#barney#;</span></code></pre></div>
</dd>
<dt>Substitution Modifiers</dt>
<dd><ul>
<li><code>/i</code></li>
<li><code>/x</code></li>
<li><code>/s</code></li>
</ul>
</dd>
</dl>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$_</span> = <span class="kw">&quot;</span><span class="st">I saw barney with fred.</span><span class="kw">&quot;</span>;
<span class="kw">s/</span><span class="ch">(</span><span class="ot">fred</span><span class="ch">|</span><span class="ot">barney</span><span class="ch">)</span><span class="kw">/</span><span class="ch">\u\L</span><span class="dt">$1</span><span class="kw">/ig</span>; <span class="co"># $_ is now &quot;I saw Fred with Barney.&quot;</span></code></pre></div>
<dl>
<dt>The split operator</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">@fields</span> = <span class="fu">split</span> <span class="kw">/</span><span class="ot">:</span><span class="kw">/</span>, <span class="kw">&quot;</span><span class="st">abc:def::g:h</span><span class="kw">&quot;</span>; <span class="co"># gives (&quot;abc&quot;, &quot;def&quot;, &quot;&quot;, &quot;g&quot;, &quot;h&quot;)</span>
<span class="kw">my</span> <span class="dt">@args</span>   = <span class="fu">split</span> <span class="kw">/</span><span class="bn">\s</span><span class="ch">+</span><span class="kw">/</span>, <span class="dt">$some_input</span>; <span class="co"># (&quot;This&quot;, &quot;is&quot;, &quot;a&quot;, &quot;test.&quot;)</span>
<span class="kw">my</span> <span class="dt">@fields</span> = <span class="fu">split</span>; <span class="co"># like split /\s+/, $_;</span></code></pre></div>
</dd>
<dt>The join Function</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$result</span> = <span class="fu">join</span> <span class="dt">$glue</span>, <span class="dt">@pieces</span>;</code></pre></div>
</dd>
<dt><code>m//</code> in List Context</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$_</span> = <span class="kw">&quot;</span><span class="st">Hello there, neighbor!</span><span class="kw">&quot;</span>;
<span class="kw">my</span>(<span class="dt">$first</span>, <span class="dt">$second</span>, <span class="dt">$third</span>) = <span class="kw">/</span><span class="ch">(</span><span class="bn">\S</span><span class="ch">+)</span><span class="ot"> </span><span class="ch">(</span><span class="bn">\S</span><span class="ch">+)</span><span class="ot">, </span><span class="ch">(</span><span class="bn">\S</span><span class="ch">+)</span><span class="kw">/</span>;
<span class="fu">print</span> <span class="kw">&quot;</span><span class="dt">$second</span><span class="st"> is my </span><span class="dt">$third</span><span class="ch">\n</span><span class="kw">&quot;</span>;

<span class="kw">my</span> <span class="dt">$text</span> = <span class="kw">&quot;</span><span class="st">Fred dropped a 5 ton granite block on Mr. Slate</span><span class="kw">&quot;</span>;
<span class="kw">my</span> <span class="dt">@words</span> = (<span class="dt">$text</span> =~ <span class="kw">/</span><span class="ch">([</span><span class="bn">a-z</span><span class="ch">]+)</span><span class="kw">/ig</span>);
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Result: </span><span class="dt">@words</span><span class="ch">\n</span><span class="kw">&quot;</span>;
<span class="co"># Result: Fred dropped a ton granite block on Mr Slate</span>

<span class="kw">my</span> <span class="dt">$data</span> = <span class="kw">&quot;</span><span class="st">Barney Rubble Fred Flintstone Wilma Flintstone</span><span class="kw">&quot;</span>;
<span class="kw">my</span> <span class="dt">%last_name</span> = (<span class="dt">$data</span> =~ <span class="kw">/</span><span class="ch">(</span><span class="bn">\w</span><span class="ch">+)</span><span class="bn">\s</span><span class="ch">+(</span><span class="bn">\w</span><span class="ch">+)</span><span class="kw">/g</span>);</code></pre></div>
</dd>
<dt>More Powerful Regular Expressions</dt>
<dd><dl>
<dt>Nongreedy Quantifiers</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="co"># nongreedy form of star is *?</span>
<span class="kw">s#</span><span class="ot">&lt;BOLD&gt;</span><span class="ch">(</span><span class="ot">.</span><span class="ch">*?)</span><span class="ot">&lt;/BOLD&gt;</span><span class="kw">#</span><span class="dt">$1</span><span class="kw">#g</span>;</code></pre></div>
</dd>
<dt>Matching Multiple-Line Text</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">open</span> FILE, <span class="dt">$filename</span>
<span class="kw">or</span> <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">Can&#39;t open &#39;</span><span class="dt">$filename</span><span class="kw">&#39;</span><span class="st">: </span><span class="dt">$!</span><span class="kw">&quot;</span>;
<span class="kw">my</span> <span class="dt">$lines</span> = <span class="fu">join</span> <span class="kw">&#39;&#39;</span>, <span class="kw">&lt;FILE&gt;</span>;
<span class="dt">$lines</span> =~ <span class="kw">s/</span><span class="ch">^</span><span class="kw">/</span><span class="dt">$filename</span><span class="st">: </span><span class="kw">/gm</span>;</code></pre></div>
</dd>
<dt>Updating Many Files</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">#!/usr/bin/perl -w</span>
<span class="fu">use</span> <span class="kw">strict</span>;
<span class="fu">chomp</span>(<span class="kw">my</span> <span class="dt">$date</span> = <span class="kw">`</span><span class="st">date</span><span class="kw">`</span>);
<span class="dt">$^I</span> = <span class="kw">&quot;</span><span class="st">.bak</span><span class="kw">&quot;</span>;
<span class="kw">while</span> (&lt;&gt;) {
    <span class="kw">s/</span><span class="ch">^</span><span class="ot">Author:.</span><span class="ch">*</span><span class="kw">/</span><span class="st">Author: Randal L. Schwartz</span><span class="kw">/</span>;
    <span class="kw">s/</span><span class="ch">^</span><span class="ot">Phone:.</span><span class="ch">*</span><span class="bn">\n</span><span class="kw">//</span>;
    <span class="kw">s/</span><span class="ch">^</span><span class="ot">Date:.</span><span class="ch">*</span><span class="kw">/</span><span class="st">Date: </span><span class="dt">$date</span><span class="kw">/</span>;
    <span class="fu">print</span>;
}</code></pre></div>
</dd>
</dl>
</dd>
<dt>In-Place Editing from the Command Line</dt>
<dd><div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">perl</span> -p \
     -i.bak \
     -w \
     -e <span class="st">&#39;s/Randall/Randal/g&#39;</span> \
     fred*.dat</code></pre></div>
<p>it&#8217;s like:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">#!/usr/bin/perl -w</span>
<span class="dt">$^I</span> = <span class="kw">&quot;</span><span class="st">.bak</span><span class="kw">&quot;</span>;
<span class="kw">while</span> (&lt;&gt;) {
    <span class="kw">s/</span><span class="ot">Randall</span><span class="kw">/</span><span class="st">Randal</span><span class="kw">/g</span>;
    <span class="fu">print</span>;
}</code></pre></div>
<p>The <code>-p</code> option tells Perl to write a program for you. It&#8217;s not much of a program, though; it looks something like this:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">while</span> (&lt;&gt;) {
    <span class="fu">print</span>;
}</code></pre></div>
<p>If you want even less, you could use <code>-n</code> instead; that leaves out the automatic print statement, so you can print only what you wish.</p>
</dd>
</dl>
<h2 id="more-control-structures">More Control Structures</h2>
<dl>
<dt>The <code>unless</code> Control Structure</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">unless</span> (<span class="dt">$fred</span> =~ <span class="kw">/</span><span class="ch">\A[</span><span class="bn">A-Z_</span><span class="ch">]</span><span class="bn">\w</span><span class="ch">*\z</span><span class="kw">/i</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The value of \$fred doesn&#39;t look like a Perl identifier name.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="kw">if</span> ( ! (<span class="dt">$fred</span> =~ <span class="kw">/</span><span class="ch">\A[</span><span class="bn">A-Z_</span><span class="ch">]</span><span class="bn">\w</span><span class="ch">*\z</span><span class="kw">/i</span>) ) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The value of \$fred doesn&#39;t look like a Perl identifier name.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>The <code>else</code> Clause with <code>unless</code></dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">unless</span> (<span class="dt">$mon</span> =~ <span class="kw">/</span><span class="ch">\A</span><span class="ot">Feb</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">This month has at least thirty days.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
} <span class="kw">else</span> {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Do you see what&#39;s going on here?</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>The until Control Structure</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">until</span> (<span class="dt">$j</span> &gt; <span class="dt">$i</span>) {
    <span class="dt">$j</span> *= <span class="dv">2</span>;
}</code></pre></div>
</dd>
<dt>Expression Modifiers</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">print</span> <span class="kw">&quot;</span><span class="dt">$n</span><span class="st"> is a negative number.</span><span class="ch">\n</span><span class="kw">&quot;</span> <span class="kw">if</span> <span class="dt">$n</span> &lt; <span class="dv">0</span>;

&amp;error(<span class="kw">&quot;</span><span class="st">Invalid input</span><span class="kw">&quot;</span>) <span class="kw">unless</span> &amp;valid(<span class="dt">$input</span>);
<span class="dt">$i</span> *= <span class="dv">2</span> <span class="kw">until</span> <span class="dt">$i</span> &gt; <span class="dt">$j</span>;

<span class="fu">print</span> <span class="kw">&quot;</span><span class="st"> </span><span class="kw">&quot;</span>, (<span class="dt">$n</span> += <span class="dv">2</span>) <span class="kw">while</span> <span class="dt">$n</span> &lt; <span class="dv">10</span>;
<span class="kw">while</span> (<span class="dt">$n</span> &lt; <span class="dv">10</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st"> </span><span class="kw">&quot;</span>, (<span class="dt">$n</span> += <span class="dv">2</span>);
}

&amp;greet(<span class="dt">$_</span>) <span class="kw">foreach</span> <span class="dt">@person</span>;

<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">fred is &#39;</span><span class="dt">$fred</span><span class="kw">&#39;</span><span class="st">, barney is &#39;</span><span class="dt">$barney</span><span class="kw">&#39;</span><span class="ch">\n</span><span class="kw">&quot;</span>
    <span class="kw">if</span> <span class="dt">$I_am_curious</span>;</code></pre></div>
</dd>
<dt>The Naked Block Control Structure</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl">{
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Please enter a number: </span><span class="kw">&quot;</span>;
    <span class="fu">chomp</span>(<span class="kw">my</span> <span class="dt">$n</span> = <span class="kw">&lt;STDIN&gt;</span>);
    <span class="kw">my</span> <span class="dt">$root</span> = <span class="fu">sqrt</span> <span class="dt">$n</span>; <span class="co"># calculate the square root</span>
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The square root of </span><span class="dt">$n</span><span class="st"> is </span><span class="dt">$root</span><span class="st">.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>The <code>elsif</code> Clause</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">if</span> ( ! <span class="fu">defined</span> <span class="dt">$dino</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The value is undef.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
} <span class="kw">elsif</span> (<span class="dt">$dino</span> =~ <span class="kw">/</span><span class="ch">^</span><span class="ot">-</span><span class="ch">?</span><span class="bn">\d</span><span class="ch">+</span><span class="ot">\.</span><span class="ch">?$</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The value is an integer.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
} <span class="kw">elsif</span> (<span class="dt">$dino</span> =~ <span class="kw">/</span><span class="ch">^</span><span class="ot">-</span><span class="ch">?</span><span class="bn">\d</span><span class="ch">*</span><span class="ot">\.</span><span class="bn">\d</span><span class="ch">+$</span><span class="kw">/</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The value is a _simple_ floating-point number.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
} <span class="kw">elsif</span> (<span class="dt">$dino</span> <span class="kw">eq</span> <span class="kw">&#39;&#39;</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The value is the empty string.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
} <span class="kw">else</span> {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The value is the string &#39;</span><span class="dt">$dino</span><span class="kw">&#39;</span><span class="st">.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>Autoincrement and Autodecrement</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">@people</span> = <span class="kw">qw{</span> fred barney fred wilma dino barney fred pebbles <span class="kw">}</span>;
<span class="kw">my</span> <span class="dt">%count</span>; <span class="co"># new empty hash</span>
<span class="dt">$count</span>{<span class="dt">$_</span>}++ <span class="kw">foreach</span> <span class="dt">@people</span>; <span class="co"># creates new keys and values as needed</span></code></pre></div>
</dd>
<dt>The Value of Autoincrement</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl">++<span class="dt">$calar</span>
<span class="dt">$calar</span>++</code></pre></div>
</dd>
<dt>The <code>for</code> Control Structure</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">for</span> (<span class="dt">$i</span> = <span class="dv">1</span>; <span class="dt">$i</span> &lt;= <span class="dv">10</span>; <span class="dt">$i</span>++) { <span class="co"># count from 1 to 10</span>
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">I can count to </span><span class="dt">$i</span><span class="st">!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="kw">for</span> (<span class="dt">$_</span> = <span class="kw">&quot;</span><span class="st">bedrock</span><span class="kw">&quot;</span>; <span class="kw">s/</span><span class="ch">(</span><span class="ot">.</span><span class="ch">)</span><span class="kw">//</span>; ) { <span class="co"># loops while the s/// is successful</span>
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">One character is: </span><span class="dt">$1</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>The Secret Connection Between foreach and for</dt>
<dd><p><code>foreach</code> &lt;-&gt; <code>for</code>&#65292;&#23601;&#30475;&#20320;&#30340;&#20998;&#21495;&#26377;&#27809;&#26377;&#20102;&#12290;</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">for</span> (<span class="dv">1</span>..<span class="dv">10</span>) { <span class="co"># really a foreach loop from 1 to 10</span>
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">I can count to </span><span class="dt">$_</span><span class="st">!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>Loop Controls</dt>
<dd><dl>
<dt>last</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="co"># Print all input lines mentioning fred, until the __END__ marker</span>
<span class="kw">while</span> (<span class="kw">&lt;STDIN&gt;</span>) {
    <span class="kw">if</span> (<span class="kw">/</span><span class="ot">__END__</span><span class="kw">/</span>) {
        <span class="co"># No more input on or after this marker line</span>
        <span class="kw">last</span>;
    } <span class="kw">elsif</span> (<span class="kw">/</span><span class="ot">fred</span><span class="kw">/</span>) {
        <span class="fu">print</span>;
    }
}
<span class="co">## last comes here ##</span></code></pre></div>
</dd>
<dt>next</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="co"># Analyze words in the input file or files</span>
<span class="kw">while</span> (&lt;&gt;) {
    <span class="kw">foreach</span> (<span class="fu">split</span>) { <span class="co"># break $_ into words, assign each to $_ in turn</span>
        <span class="dt">$total</span>++;
        <span class="kw">next</span> <span class="kw">if</span> <span class="kw">/</span><span class="bn">\W</span><span class="kw">/</span>; <span class="co"># strange words skip the remainder of the loop</span>
        <span class="dt">$valid</span>++;
        <span class="dt">$count</span>{<span class="dt">$_</span>}++; <span class="co"># count each separate word</span>
        <span class="co">## next comes here ##</span>
    }
}
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">total things = </span><span class="dt">$total</span><span class="st">, valid words = </span><span class="dt">$valid</span><span class="ch">\n</span><span class="kw">&quot;</span>;
<span class="kw">foreach</span> <span class="dt">$word</span> (<span class="fu">sort</span> <span class="fu">keys</span> <span class="dt">%count</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="dt">$word</span><span class="st"> was seen </span><span class="dt">$count</span><span class="st">{</span><span class="dt">$word</span><span class="st">} times.</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>redo</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="co"># Typing test</span>
<span class="kw">my</span> <span class="dt">@words</span> = <span class="kw">qw{</span> fred barney pebbles dino wilma betty <span class="kw">}</span>;
<span class="kw">my</span> <span class="dt">$errors</span> = <span class="dv">0</span>;
<span class="kw">foreach</span> (<span class="dt">@words</span>) {
    <span class="co">## redo comes here ##</span>
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Type the word &#39;</span><span class="dt">$_</span><span class="st">&#39;: </span><span class="kw">&quot;</span>;
    <span class="fu">chomp</span>(<span class="kw">my</span> <span class="dt">$try</span> = <span class="kw">&lt;STDIN&gt;</span>);
    <span class="kw">if</span> (<span class="dt">$try</span> <span class="kw">ne</span> <span class="dt">$_</span>) {
        <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Sorry - That&#39;s not right.</span><span class="ch">\n\n</span><span class="kw">&quot;</span>;
        <span class="dt">$errors</span>++;
        <span class="fu">redo</span>; <span class="co"># jump back up to the top of the loop</span>
    }
}
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">You&#39;ve completed the test, with </span><span class="dt">$errors</span><span class="st"> errors.</span><span class="ch">\n</span><span class="kw">&quot;</span>;</code></pre></div>
</dd>
<dt>combined</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">foreach</span> (<span class="dv">1</span>..<span class="dv">10</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Iteration number </span><span class="dt">$_</span><span class="st">.</span><span class="ch">\n\n</span><span class="kw">&quot;</span>;
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Please choose: last, next, redo, or none of the above? </span><span class="kw">&quot;</span>;
    <span class="fu">chomp</span>(<span class="kw">my</span> <span class="dt">$choice</span> = <span class="kw">&lt;STDIN&gt;</span>);
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="ch">\n</span><span class="kw">&quot;</span>;
    <span class="kw">last</span> <span class="kw">if</span> <span class="dt">$choice</span> =~ <span class="kw">/</span><span class="ot">last</span><span class="kw">/i</span>;
    <span class="kw">next</span> <span class="kw">if</span> <span class="dt">$choice</span> =~ <span class="kw">/</span><span class="ot">next</span><span class="kw">/i</span>;
    <span class="fu">redo</span> <span class="kw">if</span> <span class="dt">$choice</span> =~ <span class="kw">/</span><span class="ot">redo</span><span class="kw">/i</span>;
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">That wasn&#39;t any of the choices... onward!</span><span class="ch">\n\n</span><span class="kw">&quot;</span>;
}
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">That&#39;s all, folks!</span><span class="ch">\n</span><span class="kw">&quot;</span>;</code></pre></div>
</dd>
</dl>
</dd>
<dt>The Conditional Operator <code>?:</code></dt>
<dd><p><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$location</span> = &amp;is_weekend(<span class="dt">$day</span>) ? <span class="kw">&quot;</span><span class="st">home</span><span class="kw">&quot;</span> : <span class="kw">&quot;</span><span class="st">work</span><span class="kw">&quot;</span>;</code></p>
</dd>
<dt>Logical Operators</dt>
<dd><ul>
<li><code>&amp;&amp;</code></li>
<li><code>||</code></li>
<li><code>!=</code></li>
<li><code>==</code></li>
<li><code>$name eq 'fred'</code></li>
</ul>
</dd>
</dl>
<p>The Value of a Short Circuit Operator</p>
<dl>
<dt>The <code>defined-or</code> Operator</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fl">5.010</span>;
<span class="kw">my</span> <span class="dt">$last_name</span> = <span class="dt">$last_name</span>{<span class="dt">$someone</span>} // <span class="kw">&#39;</span><span class="st">(No last name)</span><span class="kw">&#39;</span>;

<span class="fu">use</span> <span class="fl">5.010</span>;
<span class="fu">use</span> <span class="kw">warnings</span>;
<span class="kw">my</span> <span class="dt">$name</span>;                       <span class="co"># no value, so undefined!</span>
<span class="fu">printf</span> <span class="kw">&quot;</span><span class="dt">%s</span><span class="kw">&quot;</span>, <span class="dt">$name</span> // <span class="kw">&#39;&#39;</span>;</code></pre></div>
</dd>
<dt>Control Structures Using Partial-Evaluation Operators</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl">(<span class="dt">$m</span> &gt; <span class="dv">10</span>) || <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">why is it not greater?</span><span class="ch">\n</span><span class="kw">&quot;</span>;

<span class="co"># and, or</span>

<span class="co"># idiometic way of opening file</span>
<span class="fu">open</span> <span class="kw">my</span> <span class="dt">$fh</span>, <span class="kw">&#39;</span><span class="st">&lt;</span><span class="kw">&#39;</span>, <span class="dt">$filename</span>
  <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">Can&#39;t open &#39;</span><span class="dt">$filename</span><span class="kw">&#39;</span><span class="st">: </span><span class="dt">$!</span><span class="kw">&quot;</span>;</code></pre></div>
</dd>
</dl>
<h2 id="perl-modules">Perl Modules</h2>
<p>Comprehensive Perl Archive Network (CPAN)</p>
<dl>
<dt>Finding Modules</dt>
<dd><p><code class="sourceCode bash"><span class="kw">perldoc</span> CGI</code></p>
<p>The cpan command that comes with Perl can create an autobundle, which is a list of everything you have installed, along with the version numbers: <code class="sourceCode bash"><span class="kw">cpan</span> -a</code></p>
</dd>
<dt>Installing Modules</dt>
<dd><div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">perl</span> Makefile.PL
<span class="kw">make</span> install</code></pre></div>
<p><code class="sourceCode bash"><span class="kw">perl</span> Makefile.PL INSTALL_BASE=/Users/fred/lib</code></p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">perl</span> Build.PL
<span class="kw">./Build</span> install</code></pre></div>
<p><code class="sourceCode bash"><span class="kw">perl</span> Build.PL --install_base=/Users/fred/lib</code></p>
<dl>
<dt><code>CPAN.pm</code></dt>
<dd>From the command line, you can start up the <code>CPAN.pm</code> shell from which you can issue commands: <code class="sourceCode bash"><span class="kw">perl</span> -MCPAN -e shell</code>
</dd>
</dl>
<p>Just call the script with a list of the modules you want to install: <code class="sourceCode bash"><span class="kw">cpan</span> Module::CoreList LWP CGI::Prototype</code></p>
</dd>
<dt>Perl Package Manager (PPM).</dt>
<dd><p>There&#8217;s another handy tool, <code>cpanm</code> (for cpanminus), although it doesn&#8217;t come with Perl (yet). It&#8217;s designed as a zero-conf, lightweight CPAN client that handles most of what people want to do.</p>
<p><code class="sourceCode bash"><span class="kw">cpanm</span> DBI WWW::Mechanize</code></p>
</dd>
<dt>Using Your Own Directories</dt>
<dd><p><code class="sourceCode bash"><span class="kw">perl</span> -Mlocal::lib</code></p>
<p>use the <code>-I</code> switch to install modules: <code class="sourceCode bash"><span class="kw">cpan</span> -I Set::Crossproduct</code></p>
</dd>
</dl>
<p>And the third (and biggest) problem with this is that we&#8217;re trying to solve a problem someone else has already solved.</p>
<dl>
<dt>The <code>File::Basename</code> Module</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fu">File::Basename</span>;
<span class="kw">my</span> <span class="dt">$name</span> = <span class="kw">&quot;</span><span class="st">/usr/local/bin/perl</span><span class="kw">&quot;</span>;
<span class="kw">my</span> <span class="dt">$basename</span> = basename <span class="dt">$name</span>; <span class="co"># gives &#39;perl&#39;</span>
<span class="co"># also, dirname</span></code></pre></div>
</dd>
<dt>Using Only Some Functions from a Module</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fu">File::Basename</span> <span class="kw">qw/</span> basename <span class="kw">/</span>;

<span class="co"># ask for no new functions at all:</span>
<span class="fu">use</span> <span class="fu">File::Basename</span> <span class="kw">qw/</span> <span class="kw">/</span>;                      <span class="co"># or: use File::Basename ()</span>

<span class="kw">my</span> <span class="dt">$name</span> = <span class="kw">&quot;</span><span class="st">/usr/local/bin/perl</span><span class="kw">&quot;</span>;
<span class="kw">my</span> <span class="dt">$dirname</span> = <span class="fu">File::Basename</span>::<span class="fu">dirname</span> <span class="dt">$name</span>;   <span class="co"># dirname from the module</span></code></pre></div>
</dd>
<dt>The <code>File::Spec</code> Module</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fu">File::Basename</span>;
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Please enter a filename: </span><span class="kw">&quot;</span>;
<span class="fu">chomp</span>(<span class="kw">my</span> <span class="dt">$old_name</span> = <span class="kw">&lt;STDIN&gt;</span>);
<span class="kw">my</span> <span class="dt">$dirname</span> = dirname <span class="dt">$old_name</span>;
<span class="kw">my</span> <span class="dt">$basename</span> = basename <span class="dt">$old_name</span>;
<span class="dt">$basename</span> =~ <span class="kw">s/</span><span class="ch">^</span><span class="kw">/</span><span class="st">not</span><span class="kw">/</span>; <span class="co"># Add a prefix to the basename</span>
<span class="kw">my</span> <span class="dt">$new_name</span> = <span class="kw">&quot;</span><span class="dt">$dirname</span><span class="st">/</span><span class="dt">$basename</span><span class="kw">&quot;</span>; <span class="co"># how about windows?</span>
<span class="fu">rename</span>(<span class="dt">$old_name</span>, <span class="dt">$new_name</span>)
    <span class="kw">or</span> <span class="fu">warn</span> <span class="kw">&quot;</span><span class="st">Can&#39;t rename &#39;</span><span class="dt">$old_name</span><span class="kw">&#39;</span><span class="st"> to &#39;</span><span class="dt">$new_name</span><span class="kw">&#39;</span><span class="st">: </span><span class="dt">$!</span><span class="kw">&quot;</span>;</code></pre></div>
</dd>
<dt>The <code>File::Spec</code> module is used for manipulating file specifications</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$new_name</span> = <span class="fu">File::Spec</span>-&gt;catfile(<span class="dt">$dirname</span>, <span class="dt">$basename</span>);
<span class="fu">rename</span>(<span class="dt">$old_name</span>, <span class="dt">$new_name</span>)
    <span class="kw">or</span> <span class="fu">warn</span> <span class="kw">&quot;</span><span class="st">Can&#39;t rename &#39;</span><span class="dt">$old_name</span><span class="kw">&#39;</span><span class="st"> to &#39;</span><span class="dt">$new_name</span><span class="kw">&#39;</span><span class="st">: </span><span class="dt">$!</span><span class="kw">&quot;</span>;</code></pre></div>
</dd>
<dt><code>Path::Class</code></dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$dir</span> = dir( <span class="kw">qw(</span>Users fred lib<span class="kw">)</span> );
<span class="kw">my</span> <span class="dt">$subdir</span> = <span class="dt">$dir</span>&#8722;&gt;subdir( <span class="kw">&#39;</span><span class="st">perl5</span><span class="kw">&#39;</span> );       <span class="co"># Users/fred/lib/perl5</span>
<span class="kw">my</span> <span class="dt">$parent</span> = <span class="dt">$dir</span>-&gt;<span class="dt">parent</span>;                  <span class="co"># Users/fred</span>
<span class="kw">my</span> <span class="dt">$windir</span> = <span class="dt">$dir</span>&#8722;&gt;as_foreign( <span class="kw">&#39;</span><span class="st">Win32</span><span class="kw">&#39;</span> );   <span class="co"># Users\fred\lib</span></code></pre></div>
</dd>
<dt><code>CGI.pm</code></dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">#!/usr/bin/perl</span>
<span class="fu">use</span> CGI <span class="kw">qw(</span>:all<span class="kw">)</span>;
<span class="fu">print</span> header(<span class="kw">&quot;</span><span class="st">text/plain</span><span class="kw">&quot;</span>);
<span class="kw">foreach</span> <span class="dt">$param</span> ( param() ) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="dt">$param</span><span class="st">: </span><span class="kw">&quot;</span> . param(<span class="dt">$param</span>) . <span class="kw">&quot;</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">#!/usr/bin/perl</span>
<span class="fu">use</span> CGI <span class="kw">qw(</span>:all<span class="kw">)</span>;
<span class="fu">print</span> header(),
start_html(<span class="kw">&quot;</span><span class="st">This is the page title</span><span class="kw">&quot;</span>),
h1( <span class="kw">&quot;</span><span class="st">Input parameters</span><span class="kw">&quot;</span> );
<span class="kw">my</span> <span class="dt">$list_items</span>;
<span class="kw">foreach</span> <span class="kw">my</span> <span class="dt">$param</span> ( param() ) {
    <span class="dt">$list_items</span> .= li( <span class="kw">&quot;</span><span class="dt">$param</span><span class="st">: </span><span class="kw">&quot;</span> . param(<span class="dt">$param</span>) );
}
<span class="fu">print</span> ul( <span class="dt">$list_items</span> );
<span class="fu">print</span> end_html();</code></pre></div>
</dd>
<dt>Databases and DBI</dt>
<dd><p>The DBI (Database Interface) module doesn&#8217;t come with Perl, but it&#8217;s one of the most popular modules since most people have to connect to a database of some sort.</p>
</dd>
<dt>Dates and Times</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$dt</span> = DateTime&#8722;&gt;from_epoch( epoch =&gt; <span class="fu">time</span> );
<span class="fu">printf</span> <span class="kw">&#39;</span><span class="st">%4d%02d%02d</span><span class="kw">&#39;</span>, <span class="dt">$dt</span>-&gt;<span class="dt">year</span>, <span class="dt">$dt</span>-&gt;<span class="dt">month</span>, <span class="dt">$dt</span>-&gt;<span class="dt">day</span>;

<span class="fu">print</span> <span class="dt">$dt</span>&#8722;&gt;ymd; <span class="co"># 2011&#8722;04&#8722;23</span>
<span class="fu">print</span> <span class="dt">$dt</span>&#8722;&gt;ymd(<span class="kw">&#39;</span><span class="st">/</span><span class="kw">&#39;</span>); <span class="co"># 2011/04/23</span>
<span class="fu">print</span> <span class="dt">$dt</span>-&gt;<span class="dt">ymd</span>(<span class="kw">&#39;&#39;</span>); <span class="co"># 20010423</span>

<span class="kw">my</span> <span class="dt">$dt1</span> = DateTime-&gt;new(
    year =&gt; <span class="dv">1987</span>,
    month =&gt; <span class="dv">12</span>,
    day =&gt; <span class="dv">18</span>,
);

<span class="kw">my</span> <span class="dt">$dt2</span> = DateTime-&gt;new(
    year =&gt; <span class="dv">2011</span>,
    month =&gt; <span class="dv">5</span>,
    day =&gt; <span class="dv">1</span>,
);

<span class="kw">my</span> <span class="dt">$duration</span> = <span class="dt">$dt2</span> - <span class="dt">$dt1</span>;

<span class="kw">my</span> <span class="dt">@units</span> = <span class="dt">$duration</span>-&gt;<span class="dt">in_units</span>( <span class="kw">qw(</span>year month day<span class="kw">)</span> );
<span class="fu">printf</span> <span class="kw">&#39;</span><span class="st">%d years, %d months, and %d days</span><span class="kw">&#39;</span>, <span class="dt">@units</span>;

<span class="kw">my</span> <span class="dt">$duration</span> = <span class="fu">DateTime::Duration</span>-&gt;new( days =&gt; <span class="dv">5</span> );
<span class="kw">my</span> <span class="dt">$dt3</span> = <span class="dt">$dt2</span> + <span class="dt">$duration</span>;
<span class="fu">print</span> <span class="dt">$dt3</span>-&gt;<span class="dt">ymd</span>; <span class="co"># 2011-05-06</span></code></pre></div>
<p>If you just want to treat the time as an object, you can use <code>Time::Piece</code>, which replaces the built-in <code>localtime</code> with one that returns an object instead of a long list.</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fu">Time::Piece</span>;
<span class="kw">my</span> <span class="dt">$t</span> = <span class="fu">localtime</span>;
<span class="fu">print</span> <span class="kw">&#39;</span><span class="st">The month is </span><span class="kw">&#39;</span> . <span class="dt">$t</span>&#8722;&gt;month . <span class="kw">&quot;</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># The month is Apr</span></code></pre></div>
</dd>
</dl>
<h2 id="file-tests">File Tests</h2>
<dl>
<dt>File Test Operators</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">die</span> <span class="kw">&quot;</span><span class="st">Oops! A file called &#39;</span><span class="dt">$filename</span><span class="kw">&#39;</span><span class="st"> already exists.</span><span class="ch">\n</span><span class="kw">&quot;</span> <span class="co"># ?how about $!</span>
    <span class="kw">if</span> <span class="kw">-e</span> <span class="dt">$filename</span>;

<span class="fu">warn</span> <span class="kw">&quot;</span><span class="st">Config file is looking pretty old!</span><span class="ch">\n</span><span class="kw">&quot;</span>
    <span class="kw">if</span> <span class="kw">-M</span> CONFIG &gt; <span class="dv">28</span>;

<span class="kw">my</span> <span class="dt">@original_files</span> = <span class="kw">qw/</span> fred barney betty wilma pebbles dino bamm-bamm <span class="kw">/</span>;
<span class="kw">my</span> <span class="dt">@big_old_files</span>;              <span class="co"># The ones we want to put on backup tapes</span>

<span class="kw">foreach</span> <span class="kw">my</span> <span class="dt">$filename</span> (<span class="dt">@original_files</span>) {
    <span class="fu">push</span> <span class="dt">@big_old_files</span>, <span class="dt">$filename</span>
        <span class="kw">if</span> <span class="kw">-s</span> <span class="dt">$filename</span> &gt; <span class="dv">100_000</span> <span class="kw">and</span> <span class="kw">-A</span> <span class="dt">$filename</span> &gt; <span class="dv">90</span>;
}</code></pre></div>
</dd>
</dl>
<table>
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody>
<tr class="odd">
<td align="left"><code class="sourceCode perl"><span class="kw">-r</span></code></td>
<td align="left">File or directory is readable by this (effective) user or group</td>
</tr>
<tr class="even">
<td align="left"><code class="sourceCode perl"><span class="kw">-w</span></code></td>
<td align="left">File or directory is writable by this (effective) user or group</td>
</tr>
<tr class="odd">
<td align="left"><code class="sourceCode perl"><span class="kw">-x</span></code></td>
<td align="left">File or directory is executable by this (effective) user or group</td>
</tr>
<tr class="even">
<td align="left"><code class="sourceCode perl"><span class="kw">-o</span></code></td>
<td align="left">File or directory is owned by this (effective) user</td>
</tr>
<tr class="odd">
<td align="left"><code class="sourceCode perl"><span class="kw">-R</span></code></td>
<td align="left">File or directory is readable by this real user or group</td>
</tr>
<tr class="even">
<td align="left"><code class="sourceCode perl"><span class="kw">-W</span></code></td>
<td align="left">File or directory is writable by this real user or group</td>
</tr>
<tr class="odd">
<td align="left"><code class="sourceCode perl"><span class="kw">-X</span></code></td>
<td align="left">File or directory is executable by this real user or group</td>
</tr>
<tr class="even">
<td align="left"><code class="sourceCode perl"><span class="kw">-O</span></code></td>
<td align="left">File or directory is owned by this real user</td>
</tr>
<tr class="odd">
<td align="left"><code class="sourceCode perl"><span class="kw">-e</span></code></td>
<td align="left">File or directory name exists</td>
</tr>
<tr class="even">
<td align="left"><code class="sourceCode perl"><span class="kw">-z</span></code></td>
<td align="left">File exists and has zero size (always false for directories)</td>
</tr>
<tr class="odd">
<td align="left"><code class="sourceCode perl"><span class="kw">-s</span></code></td>
<td align="left">File or directory exists and has nonzero size (the value is the size in bytes)</td>
</tr>
<tr class="even">
<td align="left"><code class="sourceCode perl"><span class="kw">-f</span></code></td>
<td align="left">Entry is a plain file</td>
</tr>
<tr class="odd">
<td align="left"><code class="sourceCode perl"><span class="kw">-d</span></code></td>
<td align="left">Entry is a directory</td>
</tr>
<tr class="even">
<td align="left"><code class="sourceCode perl"><span class="kw">-l</span></code></td>
<td align="left">Entry is a symbolic link</td>
</tr>
<tr class="odd">
<td align="left"><code class="sourceCode perl"><span class="kw">-S</span></code></td>
<td align="left">Entry is a socket</td>
</tr>
<tr class="even">
<td align="left"><code class="sourceCode perl"><span class="kw">-p</span></code></td>
<td align="left">Entry is a named pipe (a &#8220;fifo&#8221;)</td>
</tr>
<tr class="odd">
<td align="left"><code class="sourceCode perl"><span class="kw">-b</span></code></td>
<td align="left">Entry is a block-special file (like a mountable disk)</td>
</tr>
<tr class="even">
<td align="left"><code class="sourceCode perl"><span class="kw">-c</span></code></td>
<td align="left">Entry is a character-special file (like an I/O device)</td>
</tr>
<tr class="odd">
<td align="left"><code class="sourceCode perl"><span class="kw">-u</span></code></td>
<td align="left">File or directory is setuid</td>
</tr>
<tr class="even">
<td align="left"><code class="sourceCode perl"><span class="kw">-g</span></code></td>
<td align="left">File or directory is setgid</td>
</tr>
<tr class="odd">
<td align="left"><code class="sourceCode perl"><span class="kw">-k</span></code></td>
<td align="left">File or directory has the sticky bit set</td>
</tr>
<tr class="even">
<td align="left"><code class="sourceCode perl"><span class="kw">-t</span></code></td>
<td align="left">The filehandle is a TTY (as reported by the isatty() system function; filenames can&#8217;t be tested by this test)</td>
</tr>
<tr class="odd">
<td align="left"><code class="sourceCode perl"><span class="kw">-T</span></code></td>
<td align="left">File looks like a &#8220;text&#8221; file</td>
</tr>
<tr class="even">
<td align="left"><code class="sourceCode perl"><span class="kw">-B</span></code></td>
<td align="left">File looks like a &#8220;binary&#8221; file</td>
</tr>
<tr class="odd">
<td align="left"><code class="sourceCode perl"><span class="kw">-M</span></code></td>
<td align="left">Modification age (measured in days)</td>
</tr>
<tr class="even">
<td align="left"><code class="sourceCode perl"><span class="kw">-A</span></code></td>
<td align="left">Access age (measured in days)</td>
</tr>
<tr class="odd">
<td align="left"><code class="sourceCode perl"><span class="kw">-C</span></code></td>
<td align="left">Inode-modification age (measured in days)</td>
</tr>
</tbody>
</table>
<p>But if you have a symbolic link pointing to a file, that will report true for both <code>-f</code> and <code>-l</code>.</p>
<p>The <code>-o</code> and <code>-O</code> tests relate only to the user ID and not to the group ID.</p>
<p>The age tests, <code>-M</code>, <code>-A</code>, and <code>-C</code> (yes, they&#8217;re uppercase), return the number of days since the file was last <strong>modified</strong>, <strong>accessed</strong>, or had its inode <strong>changed</strong>.</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">foreach</span> (<span class="dt">@lots_of_filenames</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="dt">$_</span><span class="st"> is readable</span><span class="ch">\n</span><span class="kw">&quot;</span> <span class="kw">if</span> <span class="kw">-r</span>;         <span class="co"># same as -r $_</span>
}

<span class="co"># The filename is in $_</span>
<span class="kw">my</span> <span class="dt">$size_in_K</span> = <span class="kw">-s</span> <span class="kw">/</span><span class="ot"> 1000;</span><span class="co">                  # Oops!</span>
<span class="ot">my </span><span class="dt">$size_in_k</span><span class="ot"> = </span><span class="ch">(</span><span class="ot">-s</span><span class="ch">)</span><span class="ot"> </span><span class="kw">/</span> <span class="dv">1024</span>;                <span class="co"># Uses $_ by default</span></code></pre></div>
<dl>
<dt>Testing Several Attributes of the Same File</dt>
<dd><p>The virtual filehandle <code>_</code> uses the information from the last file lookup that a file test operator performed. Perl only has to look up the file information once now: <code class="sourceCode perl"><span class="kw">if</span> (<span class="kw">-r</span> <span class="dt">$file</span> <span class="kw">and</span> <span class="kw">-w</span> _) { ... }</code>.</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">if</span> (<span class="kw">-r</span> <span class="dt">$file</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The file is readable!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}
<span class="kw">if</span> (<span class="kw">-w</span> _) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The file is writable!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
<p>When you return from that subroutine and do another file test, the <code>_</code> filehandle isn&#8217;t for <code>$file</code> like you expect, but for <code>$other_file</code>:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">if</span> (<span class="kw">-r</span> <span class="dt">$file</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The file is readable!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}
lookup( <span class="dt">$other_file</span> );
<span class="kw">if</span> (<span class="kw">-w</span> _) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The file is writable!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="kw">sub </span><span class="fu">lookup</span> {
    <span class="kw">return</span> <span class="kw">-w</span> <span class="dt">$_</span>[<span class="dv">0</span>];
}</code></pre></div>
</dd>
<dt>Stacked File Test Operators</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fl">5.010</span>;
<span class="kw">if</span> (<span class="kw">-w</span> <span class="kw">-r</span> <span class="dt">$file</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The file is both readable and writable!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="kw">if</span> (<span class="kw">-r</span> <span class="kw">-w</span> <span class="kw">-x</span> <span class="kw">-o</span> <span class="kw">-d</span> <span class="dt">$file</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">My directory is readable, writable, and executable!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="co"># bad</span>
<span class="fu">use</span> <span class="fl">5.010</span>;
<span class="kw">if</span> (<span class="kw">-s</span> <span class="kw">-d</span> <span class="dt">$file</span> &lt; <span class="dv">512</span>) { <span class="co"># WRONG! DON&#39;T DO THIS</span>
    say <span class="kw">&#39;</span><span class="st">The directory is less than 512 bytes!</span><span class="kw">&#39;</span>;
}

<span class="co"># bad</span>
<span class="kw">if</span> (( <span class="kw">-d</span> <span class="dt">$file</span> <span class="kw">and</span> <span class="kw">-s</span> _ ) &lt; <span class="dv">512</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The directory is less than 512 bytes!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="co"># good</span>
<span class="kw">if</span> (<span class="kw">-d</span> <span class="dt">$file</span> <span class="kw">and</span> <span class="kw">-s</span> _ &lt; <span class="dv">512</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The directory is less than 512 bytes!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>The stat and lstat Functions</dt>
<dd><p>To get at the remaining information about a file, merely call the <code class="sourceCode perl"><span class="fu">stat</span></code> function, which returns pretty much everything that the <code class="sourceCode bash"><span class="kw">stat</span></code> Unix system call returns (hopefully more than you want to know).</p>
<p>The operand to <code class="sourceCode perl"><span class="fu">stat</span></code> is a filehandle (including the <code>_</code> virtual filehandle), or an expression that evaluates to a filename. The return value is either the empty list, indicating that the <code class="sourceCode perl"><span class="fu">stat</span></code> failed (usually because the file doesn&#8217;t exist), or a 13-element list of numbers, most easily described using the following list of scalar variables:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span>( <span class="dt">$dev</span>, <span class="dt">$ino</span>, <span class="dt">$mode</span>, <span class="dt">$nlink</span>,
    <span class="dt">$uid</span>, <span class="dt">$gid</span>, <span class="dt">$rdev</span>, <span class="dt">$size</span>,
    <span class="dt">$atime</span>, <span class="dt">$mtime</span>, <span class="dt">$ctime</span>, <span class="dt">$blksize</span>, <span class="dt">$blocks</span> ) = <span class="fu">stat</span>(<span class="dt">$filename</span>);</code></pre></div>
<p>If you need the (mostly useless) information about the symbolic link itself, use <code class="sourceCode perl"><span class="fu">lstat</span></code> rather than <code class="sourceCode perl"><span class="fu">stat</span></code> (which returns the same information in the same order). If the operand isn&#8217;t a symbolic link, <code>lstat</code> returns the same things that stat would.</p>
<p>Like the file tests, the operand of <code>stat</code> or <code>lstat</code> defaults to <code>$_</code>, meaning that the underlying <code>stat</code> system call will be performed on the file named by the scalar variable <code>$_</code>.</p>
</dd>
<dt>The localtime Function</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$timestamp</span> = <span class="dv">1180630098</span>;
<span class="kw">my</span> <span class="dt">$date</span> = <span class="fu">localtime</span> <span class="dt">$timestamp</span>;</code></pre></div>
<p>The <code>gmtime</code> function is just the same as <code>localtime</code>, except that it returns the time in Universal Time (what we once called <strong>Greenwich Mean Time</strong>).</p>
</dd>
<dt>Bitwise Operators</dt>
<dd><ul>
<li><code>|</code>, <code>&amp;</code>, <code>^</code>, <code>~</code>, <code>&gt;&gt;</code>, <code>&lt;&lt;</code></li>
</ul>
</dd>
<dt>Using Bitstrings</dt>
<dd><p>All of the bitwise operators can work with bitstrings, as well as with integers.</p>
<p><code>\xAA</code> | <code>\x55</code> will give the string <code>\xFF</code>.</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$now</span> = <span class="fu">gmtime</span>; <span class="co"># Get the current universal timestamp as a string</span>

<span class="kw">my</span>( <span class="dt">$sec</span>, <span class="dt">$min</span>, <span class="dt">$hour</span>, <span class="dt">$day</span>, <span class="dt">$mon</span>,
    <span class="dt">$year</span>, <span class="dt">$wday</span>, <span class="dt">$yday</span>, <span class="dt">$isdst</span> ) = <span class="fu">localtime</span> <span class="dt">$timestamp</span>;</code></pre></div>
</dd>
</dl>
<h2 id="directory-operations">Directory Operations</h2>
<dl>
<dt>Moving Around the Directory Tree</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">chdir</span> <span class="kw">&#39;</span><span class="st">/etc</span><span class="kw">&#39;</span> <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">cannot chdir to /etc: </span><span class="dt">$!</span><span class="kw">&quot;</span>;</code></pre></div>
</dd>
<dt>Globbing</dt>
<dd><p>Normally, the shell expands any filename patterns on each command line into the matching filenames. This is called globbing.</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">@all_files</span> = <span class="fu">glob</span> <span class="kw">&#39;</span><span class="st">*</span><span class="kw">&#39;</span>;
<span class="kw">my</span> <span class="dt">@pm_files</span> = <span class="fu">glob</span> <span class="kw">&#39;</span><span class="st">*.pm</span><span class="kw">&#39;</span>;</code></pre></div>
</dd>
<dt>An Alternate Syntax for Globbing</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="co"># used the angle-bracket syntax, similar to reading from a filehandle</span>
<span class="kw">my</span> <span class="dt">@all_files</span> = &lt;<span class="dt">*&gt;</span>;    <span class="co"># exactly the same as my @all_files = glob &quot;*&quot;;</span>
<span class="kw">my</span> <span class="dt">$dir</span> = <span class="kw">&#39;</span><span class="st">/etc</span><span class="kw">&#39;</span>;
<span class="kw">my</span> <span class="dt">@dir_files</span> = &lt;<span class="dt">$dir</span>/<span class="kw">*</span> <span class="dt">$dir</span>/.<span class="dt">*&gt;</span>;

<span class="kw">my</span> <span class="dt">@files</span> = &lt;FRED/<span class="dt">*&gt;</span>;   <span class="co"># a glob</span>
<span class="kw">my</span> <span class="dt">@lines</span> = <span class="kw">&lt;FRED&gt;</span>;     <span class="co"># a filehandle read</span>
<span class="kw">my</span> <span class="dt">@lines</span> = &lt;<span class="dt">$fred</span>&gt;;    <span class="co"># a filehandle read</span>
<span class="kw">my</span> <span class="dt">$name</span> = <span class="kw">&#39;</span><span class="st">FRED</span><span class="kw">&#39;</span>;
<span class="kw">my</span> <span class="dt">@files</span> = &lt;<span class="dt">$name</span>/<span class="dt">*&gt;</span>;  <span class="co"># a glob</span>

<span class="kw">my</span> <span class="dt">$name</span> = <span class="kw">&#39;</span><span class="st">FRED</span><span class="kw">&#39;</span>;
<span class="kw">my</span> <span class="dt">@lines</span> = <span class="fu">readline</span> FRED;      <span class="co"># read from FRED</span>
<span class="kw">my</span> <span class="dt">@lines</span> = <span class="fu">readline</span> <span class="dt">$name</span>;     <span class="co"># read from FRED</span></code></pre></div>
<p>But <strong>Perlers</strong> rarely use the <code>readline</code> operator, as indirect filehandle reads are uncommon and are generally performed against a simple scalar variable anyway.</p>
</dd>
<dt>Directory Handles</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$dir_to_process</span> = <span class="kw">&#39;</span><span class="st">/etc</span><span class="kw">&#39;</span>;
<span class="fu">opendir</span> <span class="kw">my</span> <span class="dt">$dh</span>, <span class="dt">$dir_to_process</span>
    <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">Cannot open </span><span class="dt">$dir_to_process</span><span class="st">: </span><span class="dt">$!</span><span class="kw">&quot;</span>;
<span class="kw">foreach</span> <span class="dt">$file</span> (<span class="fu">readdir</span> <span class="dt">$dh</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">one file in </span><span class="dt">$dir_to_process</span><span class="st"> is </span><span class="dt">$file</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}
<span class="fu">closedir</span> <span class="dt">$dh</span>;</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">opendir</span> DIR, <span class="dt">$dir_to_process</span>
    <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">Cannot open </span><span class="dt">$dir_to_process</span><span class="st">: </span><span class="dt">$!</span><span class="kw">&quot;</span>;
<span class="kw">foreach</span> <span class="dt">$file</span> (<span class="fu">readdir</span> DIR) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">one file in </span><span class="dt">$dir_to_process</span><span class="st"> is </span><span class="dt">$file</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}
<span class="fu">closedir</span> DIR;

<span class="kw">while</span> (<span class="dt">$name</span> = <span class="fu">readdir</span> <span class="dt">$dh</span>) {
    <span class="kw">next</span> <span class="kw">unless</span> <span class="dt">$name</span> =~ <span class="kw">/</span><span class="ot">\.pm</span><span class="ch">$</span><span class="kw">/</span>;
    ... more processing ...
}

<span class="kw">next</span> <span class="kw">if</span> <span class="dt">$name</span> =~ <span class="kw">/</span><span class="ch">^</span><span class="ot">\.</span><span class="kw">/</span>;
<span class="kw">next</span> <span class="kw">if</span> <span class="dt">$name</span> <span class="kw">eq</span> <span class="kw">&#39;</span><span class="st">.</span><span class="kw">&#39;</span> <span class="kw">or</span> <span class="dt">$name</span> <span class="kw">eq</span> <span class="kw">&#39;</span><span class="st">..</span><span class="kw">&#39;</span>;</code></pre></div>
</dd>
<dt>Recursive Directory Listing</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl">$ find2perl . -name <span class="kw">&#39;</span><span class="st">*.pm</span><span class="kw">&#39;</span>
<span class="co">#! /usr/bin/perl -w</span>
<span class="fu">eval</span> <span class="kw">&#39;</span><span class="st">exec /usr/bin/perl -S $0 ${1+&quot;$@&quot;}</span><span class="kw">&#39;</span>
<span class="kw">if</span> <span class="dv">0</span>; <span class="co">#$running_under_some_shell</span>
<span class="fu">use</span> <span class="kw">strict</span>;
<span class="fu">use</span> <span class="fu">File::Find</span> ();
<span class="co"># Set the variable $File::Find::dont_use_nlink if you&#39;re using AFS,</span>
<span class="co"># since AFS cheats.</span>
<span class="co"># for the convenience of &amp;wanted calls, including -eval statements:</span>
<span class="fu">use</span> <span class="kw">vars</span> <span class="kw">qw/</span>*name *dir *prune<span class="kw">/</span>;
<span class="dt">*name</span> = <span class="dt">*File</span>::<span class="dt">Find</span>::<span class="dt">name</span>;
<span class="dt">*dir</span> = <span class="dt">*File</span>::<span class="dt">Find</span>::<span class="dt">dir</span>;
<span class="dt">*prune</span> = <span class="dt">*File</span>::<span class="dt">Find</span>::<span class="dt">prune</span>;

<span class="kw">sub </span><span class="fu">wanted</span>;
<span class="co"># Traverse desired filesystems</span>
<span class="fu">File::Find</span>::<span class="fu">find</span>({wanted =&gt; \&amp;wanted}, <span class="kw">&#39;</span><span class="st">.</span><span class="kw">&#39;</span>);
<span class="fu">exit</span>;
<span class="kw">sub </span><span class="fu">wanted</span> {
    <span class="kw">/</span><span class="ch">^</span><span class="ot">.</span><span class="ch">*</span><span class="ot">\.pm</span><span class="ch">\z</span><span class="kw">/s</span>
    &amp;&amp; <span class="fu">print</span>(<span class="kw">&quot;</span><span class="dt">$name</span><span class="ch">\n</span><span class="kw">&quot;</span>);
}</code></pre></div>
</dd>
<dt>Manipulating Files and Directories</dt>
<dd><dl>
<dt>Removing Files</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="co"># bash: rm slate bedrock lava</span>
<span class="fu">unlink</span> <span class="kw">&#39;</span><span class="st">slate</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">bedrock</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">lava</span><span class="kw">&#39;</span>;
<span class="fu">unlink</span> <span class="kw">qw(</span>slate bedrock lava<span class="kw">)</span>;</code></pre></div>
</dd>
</dl>
<p><code class="sourceCode perl"><span class="fu">unlink</span> <span class="fu">glob</span> <span class="kw">&#39;</span><span class="st">*.o</span><span class="kw">&#39;</span>;</code></p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$successful</span> = <span class="fu">unlink</span> <span class="kw">&quot;</span><span class="st">slate</span><span class="kw">&quot;</span>, <span class="kw">&quot;</span><span class="st">bedrock</span><span class="kw">&quot;</span>, <span class="kw">&quot;</span><span class="st">lava</span><span class="kw">&quot;</span>;
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">I deleted </span><span class="dt">$successful</span><span class="st"> file(s) just now</span><span class="ch">\n</span><span class="kw">&quot;</span>;

<span class="kw">foreach</span> <span class="kw">my</span> <span class="dt">$file</span> (<span class="kw">qw(</span>slate bedrock lava<span class="kw">)</span>) {
    <span class="fu">unlink</span> <span class="dt">$file</span> <span class="kw">or</span> <span class="fu">warn</span> <span class="kw">&quot;</span><span class="st">failed on </span><span class="dt">$file</span><span class="st">: </span><span class="dt">$!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
<dl>
<dt>Renaming Files</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">rename</span> <span class="kw">&#39;</span><span class="st">old</span><span class="kw">&#39;</span> <span class="kw">&#39;</span><span class="st">new</span><span class="kw">&#39;</span>
<span class="fu">rename</span> <span class="kw">&#39;</span><span class="st">over_there/some/place/some_file</span><span class="kw">&#39;</span> =&gt; <span class="kw">&#39;</span><span class="st">some_file</span><span class="kw">&#39;</span>;

<span class="kw">foreach</span> <span class="kw">my</span> <span class="dt">$file</span> (<span class="fu">glob</span> <span class="kw">&quot;</span><span class="st">*.old</span><span class="kw">&quot;</span>) {
    <span class="kw">my</span> <span class="dt">$newfile</span> = <span class="dt">$file</span>;
    <span class="dt">$newfile</span> =~ <span class="kw">s/</span><span class="ot">\.old</span><span class="ch">$</span><span class="kw">/</span><span class="st">.new</span><span class="kw">/</span>;
    <span class="kw">if</span> (<span class="kw">-e</span> <span class="dt">$newfile</span>) {
        <span class="fu">warn</span> <span class="kw">&quot;</span><span class="st">can&#39;t rename </span><span class="dt">$file</span><span class="st"> to </span><span class="dt">$newfile</span><span class="st">: </span><span class="dt">$newfile</span><span class="st"> exists</span><span class="ch">\n</span><span class="kw">&quot;</span>;
    } <span class="kw">elsif</span> (<span class="fu">rename</span> <span class="dt">$file</span> =&gt; <span class="dt">$newfile</span>) {
        <span class="co"># success, do nothing</span>
    } <span class="kw">else</span> {
        <span class="fu">warn</span> <span class="kw">&quot;</span><span class="st">rename </span><span class="dt">$file</span><span class="st"> to </span><span class="dt">$newfile</span><span class="st"> failed: </span><span class="dt">$!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
    }
}

<span class="co"># cleaner</span>
(<span class="kw">my</span> <span class="dt">$newfile</span> = <span class="dt">$file</span>) =~ <span class="kw">s/</span><span class="ot">\.old</span><span class="ch">$</span><span class="kw">/</span><span class="st">.new</span><span class="kw">/</span>;

<span class="co"># even more clean</span>
<span class="kw">my</span> <span class="dt">$newfile</span> = <span class="dt">$file</span> =~ <span class="kw">s/</span><span class="ot">\.old</span><span class="ch">$</span><span class="kw">/</span><span class="st">.new</span><span class="kw">/</span>r;</code></pre></div>
</dd>
</dl>
</dd>
<dt>Links and Files</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="co"># ln chicken egg</span>
<span class="fu">link</span> <span class="kw">&#39;</span><span class="st">chicken</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">egg</span><span class="kw">&#39;</span>
    <span class="kw">or</span> <span class="fu">warn</span> <span class="kw">&quot;</span><span class="st">can&#39;t link chicken to egg: </span><span class="dt">$!</span><span class="kw">&quot;</span>;

<span class="co"># ln -s dodgson carrol</span>
<span class="fu">symlink</span> <span class="kw">&#39;</span><span class="st">dodgson</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">carroll</span><span class="kw">&#39;</span>
    <span class="kw">or</span> <span class="fu">warn</span> <span class="kw">&quot;</span><span class="st">can&#39;t symlink dodgson to carroll: </span><span class="dt">$!</span><span class="kw">&quot;</span>;</code></pre></div>
<p><strong>The file test <code>-l 'carroll'</code> would report true, but <code>-e 'carroll'</code> would be false. It&#8217;s a symlink, but its target doesn&#8217;t exist.</strong></p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$where</span> = <span class="fu">readlink</span> <span class="kw">&#39;</span><span class="st">carroll</span><span class="kw">&#39;</span>;             <span class="co"># Gives &quot;dodgson&quot;</span>
<span class="kw">my</span> <span class="dt">$perl</span>  = <span class="fu">readlink</span> <span class="kw">&#39;</span><span class="st">/usr/local/bin/perl</span><span class="kw">&#39;</span>; <span class="co"># Maybe tells where perl is</span></code></pre></div>
</dd>
<dt>Making and Removing Directories</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">mkdir</span> <span class="kw">&#39;</span><span class="st">fred</span><span class="kw">&#39;</span>, <span class="bn">0755</span>
    <span class="kw">or</span> <span class="fu">warn</span> <span class="kw">&quot;</span><span class="st">Cannot make fred directory: </span><span class="dt">$!</span><span class="kw">&quot;</span>;

<span class="kw">my</span> <span class="dt">$name</span> = <span class="kw">&quot;</span><span class="st">fred</span><span class="kw">&quot;</span>;
<span class="kw">my</span> <span class="dt">$permissions</span> = <span class="kw">&quot;</span><span class="st">0755</span><span class="kw">&quot;</span>;
<span class="fu">mkdir</span> <span class="dt">$name</span>, <span class="dt">$permissions</span>;      <span class="co"># danger...this isn&#39;t working</span>
<span class="fu">mkdir</span> <span class="dt">$name</span>, <span class="fu">oct</span>(<span class="dt">$permissions</span>); <span class="co"># works, oct.</span>

<span class="co"># rmdir</span>
<span class="fu">unlink</span> <span class="fu">glob</span> <span class="kw">&quot;</span><span class="dt">$temp_dir</span><span class="st">/* </span><span class="dt">$temp_dir</span><span class="st">/.*</span><span class="kw">&quot;</span>; <span class="co"># delete contents of $temp_dir</span>
<span class="fu">rmdir</span> <span class="dt">$temp_dir</span>; <span class="co"># delete now-empty directory</span>

<span class="co"># For a more robust solution, check out the `rmtree` function provided by</span>
<span class="co"># the File::Path module of the standard distribution.</span></code></pre></div>
</dd>
<dt>Modifying Permissions</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">chmod</span> <span class="bn">0755</span>, <span class="kw">&#39;</span><span class="st">fred</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">barney</span><span class="kw">&#39;</span>;</code></pre></div>
</dd>
<dt>Changing Ownership</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$user</span> = <span class="dv">1004</span>;
<span class="kw">my</span> <span class="dt">$group</span> = <span class="dv">100</span>;
<span class="fu">chown</span> <span class="dt">$user</span>, <span class="dt">$group</span>, <span class="fu">glob</span> <span class="kw">&#39;</span><span class="st">*.o</span><span class="kw">&#39;</span>;

<span class="fu">defined</span>(<span class="kw">my</span> <span class="dt">$user</span> = <span class="fu">getpwnam</span> <span class="kw">&#39;</span><span class="st">merlyn</span><span class="kw">&#39;</span>) <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&#39;</span><span class="st">bad user</span><span class="kw">&#39;</span>;
<span class="fu">defined</span>(<span class="kw">my</span> <span class="dt">$group</span> = <span class="fu">getgrnam</span> <span class="kw">&#39;</span><span class="st">users</span><span class="kw">&#39;</span>) <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&#39;</span><span class="st">bad group</span><span class="kw">&#39;</span>;
<span class="fu">chown</span> <span class="dt">$user</span>, <span class="dt">$group</span>, <span class="fu">glob</span> <span class="kw">&#39;</span><span class="st">/home/merlyn/*</span><span class="kw">&#39;</span>;</code></pre></div>
</dd>
<dt>Changing Timestamps</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$now</span> = <span class="fu">time</span>;
<span class="kw">my</span> <span class="dt">$ago</span> = <span class="dt">$now</span> - <span class="dv">24</span> <span class="kw">*</span> <span class="dv">60</span> <span class="kw">*</span> <span class="dv">60</span>;          <span class="co"># seconds per day</span>

<span class="co">#    atime  mtime</span>
<span class="fu">utime</span> <span class="dt">$now</span>, <span class="dt">$ago</span>, <span class="fu">glob</span> <span class="kw">&#39;</span><span class="st">*</span><span class="kw">&#39;</span>;             <span class="co"># atime: now, mtime: a day ago</span>
<span class="co"># The third timestamp (the ctime value) is always set to &quot;now&quot; whenever</span>
<span class="co"># anything alters a file, so there&#39;s no way to set it</span></code></pre></div>
</dd>
</dl>
<h2 id="strings-and-sorting">Strings and Sorting</h2>
<dl>
<dt>Finding a Substring with index</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$where</span> = <span class="fu">index</span>(<span class="dt">$big</span>, <span class="dt">$small</span>);
<span class="kw">my</span> <span class="dt">$stuff</span> = <span class="kw">&quot;</span><span class="st">Howdy world!</span><span class="kw">&quot;</span>;
<span class="kw">my</span> <span class="dt">$where1</span> = <span class="fu">index</span>(<span class="dt">$stuff</span>, <span class="kw">&quot;</span><span class="st">w</span><span class="kw">&quot;</span>);                 <span class="co"># $where1 gets 2</span>
<span class="kw">my</span> <span class="dt">$where2</span> = <span class="fu">index</span>(<span class="dt">$stuff</span>, <span class="kw">&quot;</span><span class="st">w</span><span class="kw">&quot;</span>, <span class="dt">$where1</span> + <span class="dv">1</span>);    <span class="co"># $where2 gets 6</span>
<span class="kw">my</span> <span class="dt">$where3</span> = <span class="fu">index</span>(<span class="dt">$stuff</span>, <span class="kw">&quot;</span><span class="st">w</span><span class="kw">&quot;</span>, <span class="dt">$where2</span> + <span class="dv">1</span>);    <span class="co"># $where3 gets &#8211;1</span>

<span class="co"># last occurrence</span>
<span class="kw">my</span> <span class="dt">$last_slash</span> = <span class="fu">rindex</span>(<span class="kw">&quot;</span><span class="st">/etc/passwd</span><span class="kw">&quot;</span>, <span class="kw">&quot;</span><span class="st">/</span><span class="kw">&quot;</span>);     <span class="co"># value is 4</span>
<span class="kw">my</span> <span class="dt">$fred</span> = <span class="kw">&quot;</span><span class="st">Yabba dabba doo!</span><span class="kw">&quot;</span>;
<span class="kw">my</span> <span class="dt">$where1</span> = <span class="fu">rindex</span>(<span class="dt">$fred</span>, <span class="kw">&quot;</span><span class="st">abba</span><span class="kw">&quot;</span>);              <span class="co"># $where1 gets 7</span>
<span class="kw">my</span> <span class="dt">$where2</span> = <span class="fu">rindex</span>(<span class="dt">$fred</span>, <span class="kw">&quot;</span><span class="st">abba</span><span class="kw">&quot;</span>, <span class="dt">$where1</span> - <span class="dv">1</span>); <span class="co"># $where2 gets 1</span>
<span class="kw">my</span> <span class="dt">$where3</span> = <span class="fu">rindex</span>(<span class="dt">$fred</span>, <span class="kw">&quot;</span><span class="st">abba</span><span class="kw">&quot;</span>, <span class="dt">$where2</span> - <span class="dv">1</span>); <span class="co"># $where3 gets &#8211;1</span></code></pre></div>
</dd>
<dt>Manipulating a Substring with substr</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$mineral</span> = <span class="fu">substr</span>(<span class="kw">&quot;</span><span class="st">Fred J. Flintstone</span><span class="kw">&quot;</span>, <span class="dv">8</span>, <span class="dv">5</span>); <span class="co"># gets &quot;Flint&quot;</span>
<span class="kw">my</span> <span class="dt">$rock</span> = <span class="fu">substr</span> <span class="kw">&quot;</span><span class="st">Fred J. Flintstone</span><span class="kw">&quot;</span>, <span class="dv">13</span>, <span class="dv">1000</span>; <span class="co"># gets &quot;stone&quot;</span>
<span class="kw">my</span> <span class="dt">$pebble</span> = <span class="fu">substr</span> <span class="kw">&quot;</span><span class="st">Fred J. Flintstone</span><span class="kw">&quot;</span>, <span class="dv">13</span>;     <span class="co"># gets &quot;stone&quot;</span>

<span class="kw">my</span> <span class="dt">$out</span> = <span class="fu">substr</span>(<span class="kw">&quot;</span><span class="st">some very long string</span><span class="kw">&quot;</span>, &#8211;<span class="dv">3</span>, <span class="dv">2</span>); <span class="co"># $out gets &quot;in&quot;</span>

<span class="kw">my</span> <span class="dt">$long</span> = <span class="kw">&quot;</span><span class="st">some very very long string</span><span class="kw">&quot;</span>;
<span class="kw">my</span> <span class="dt">$right</span> = <span class="fu">substr</span>(<span class="dt">$long</span>, <span class="fu">index</span>(<span class="dt">$long</span>, <span class="kw">&quot;</span><span class="st">l</span><span class="kw">&quot;</span>) );

<span class="kw">my</span> <span class="dt">$string</span> = <span class="kw">&quot;</span><span class="st">Hello, world!</span><span class="kw">&quot;</span>;
<span class="fu">substr</span>(<span class="dt">$string</span>, <span class="dv">0</span>, <span class="dv">5</span>) = <span class="kw">&quot;</span><span class="st">Goodbye</span><span class="kw">&quot;</span>;                <span class="co"># &quot;Goodbye, world!&quot;</span>

<span class="fu">substr</span>(<span class="dt">$string</span>, &#8211;<span class="dv">20</span>) =~ <span class="kw">s/</span><span class="ot">fred</span><span class="kw">/</span><span class="st">barney</span><span class="kw">/g</span>;</code></pre></div>
</dd>
<dt>Formatting Data with sprintf</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$date_tag</span> = <span class="fu">sprintf</span>
    <span class="kw">&quot;</span><span class="dt">%4d</span><span class="st">/</span><span class="dt">%02d</span><span class="st">/</span><span class="dt">%02d</span><span class="st"> </span><span class="dt">%2d</span><span class="st">:</span><span class="dt">%02d</span><span class="st">:</span><span class="dt">%02d</span><span class="kw">&quot;</span>,
    <span class="dt">$yr</span>, <span class="dt">$mo</span>, <span class="dt">$da</span>, <span class="dt">$h</span>, <span class="dt">$m</span>, <span class="dt">$s</span>;

<span class="kw">my</span> <span class="dt">$money</span> = <span class="fu">sprintf</span> <span class="kw">&quot;</span><span class="st">%.2f</span><span class="kw">&quot;</span>, <span class="fl">2.49997</span>;

<span class="kw">sub </span><span class="fu">big_money</span> {
    <span class="kw">my</span> <span class="dt">$number</span> = <span class="fu">sprintf</span> <span class="kw">&quot;</span><span class="st">%.2f</span><span class="kw">&quot;</span>, <span class="fu">shift</span> <span class="dt">@_</span>;
    <span class="co"># Add one comma each time through the do-nothing loop</span>
    <span class="dv">1</span> <span class="kw">while</span> <span class="dt">$number</span> =~ <span class="kw">s/</span><span class="ch">^(</span><span class="ot">-</span><span class="ch">?</span><span class="bn">\d</span><span class="ch">+)(</span><span class="bn">\d\d\d</span><span class="ch">)</span><span class="kw">/</span><span class="dt">$1</span><span class="st">,</span><span class="dt">$2</span><span class="kw">/</span>;
    <span class="co"># Put the dollar sign in the right place</span>
    <span class="dt">$number</span> =~ <span class="kw">s/</span><span class="ch">^(</span><span class="ot">-</span><span class="ch">?)</span><span class="kw">/</span><span class="dt">$1</span><span class="st">\$</span><span class="kw">/</span>;
    <span class="dt">$number</span>;
}</code></pre></div>
</dd>
<dt>Interpreting Non-Decimal Numerals</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">hex</span>(<span class="kw">&#39;</span><span class="st">DEADBEEF</span><span class="kw">&#39;</span>)             <span class="co"># 3_735_928_559 decimal</span>
<span class="fu">hex</span>(<span class="kw">&#39;</span><span class="st">OxDEADBEEF</span><span class="kw">&#39;</span>)           <span class="co"># 3_735_928_559 decimal</span>
<span class="fu">oct</span>(<span class="kw">&#39;</span><span class="st">0377</span><span class="kw">&#39;</span>)                 <span class="co"># 255 decimal</span>
<span class="fu">oct</span>(<span class="kw">&#39;</span><span class="st">377</span><span class="kw">&#39;</span>)                  <span class="co"># 255 decimal</span>
<span class="fu">oct</span>(<span class="kw">&#39;</span><span class="st">0xDEADBEEF</span><span class="kw">&#39;</span>)           <span class="co"># 3_735_928_559 decimal, saw leading 0x</span>
<span class="fu">oct</span>(<span class="kw">&#39;</span><span class="st">0b1101</span><span class="kw">&#39;</span>)               <span class="co"># 13 decimal, saw leading 0b</span>
<span class="fu">oct</span>(<span class="kw">&quot;</span><span class="st">0b</span><span class="dt">$bits</span><span class="kw">&quot;</span>)              <span class="co"># convert $bits from binary</span></code></pre></div>
</dd>
<dt>Advanced Sorting</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">sub </span><span class="fu">by_number</span> {
    <span class="co"># a sort subroutine, expect $a and $b</span>
    <span class="kw">if</span> (<span class="dt">$a</span> &lt; <span class="dt">$b</span>) { &#8211;<span class="dv">1</span> } <span class="kw">elsif</span> (<span class="dt">$a</span> &gt; <span class="dt">$b</span>) { <span class="dv">1</span> } <span class="kw">else</span> { <span class="dv">0</span> }
}
<span class="kw">my</span> <span class="dt">@result</span> = <span class="fu">sort</span> by_number <span class="dt">@some_numbers</span>;

<span class="co"># spaceship operator (`&lt;=&gt;`).  -1 ,  0 , or  1</span>
<span class="kw">sub </span><span class="fu">by_number</span> { <span class="dt">$a</span> &lt;=&gt; <span class="dt">$b</span> }

<span class="co"># cmp, for string</span>
<span class="kw">sub </span><span class="fu">by_code_point</span> { <span class="dt">$a</span> <span class="kw">cmp</span> <span class="dt">$b</span> }

<span class="kw">sub </span><span class="fu">case_insensitive</span> { <span class="kw">&quot;</span><span class="ch">\L</span><span class="dt">$a</span><span class="kw">&quot;</span> <span class="kw">cmp</span> <span class="kw">&quot;</span><span class="ch">\L</span><span class="dt">$b</span><span class="kw">&quot;</span> }

<span class="fu">use</span> <span class="fu">Unicode::Normalize</span>;
<span class="kw">sub </span><span class="fu">equivalents</span> { NFKD(<span class="dt">$a</span>) <span class="kw">cmp</span> NFKD(<span class="dt">$b</span>) }

<span class="co"># make sort routine &quot;inline&quot;</span>
<span class="kw">my</span> <span class="dt">@numbers</span> = <span class="fu">sort</span> { <span class="dt">$a</span> &lt;=&gt; <span class="dt">$b</span> } <span class="dt">@some_numbers</span>;</code></pre></div>
</dd>
<dt>Sorting a Hash by Value</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">sub </span><span class="fu">by_score</span> { <span class="dt">$score</span>{<span class="dt">$b</span>} &lt;=&gt; <span class="dt">$score</span>{<span class="dt">$a</span>} }
<span class="kw">my</span> <span class="dt">%score</span> = (<span class="kw">&quot;</span><span class="st">barney</span><span class="kw">&quot;</span> =&gt; <span class="dv">195</span>, <span class="kw">&quot;</span><span class="st">fred</span><span class="kw">&quot;</span> =&gt; <span class="dv">205</span>, <span class="kw">&quot;</span><span class="st">dino</span><span class="kw">&quot;</span> =&gt; <span class="dv">30</span>);
<span class="kw">my</span> <span class="dt">@winners</span> = <span class="fu">sort</span> by_score <span class="fu">keys</span> <span class="dt">%score</span>;</code></pre></div>
</dd>
<dt>Sorting by Multiple Keys</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">@winners</span> = <span class="fu">sort</span> by_score_and_name <span class="fu">keys</span> <span class="dt">%score</span>;
<span class="kw">sub </span><span class="fu">by_score_and_name</span> {
    <span class="dt">$score</span>{<span class="dt">$b</span>} &lt;=&gt; <span class="dt">$score</span>{<span class="dt">$a</span>} <span class="co"># by descending numeric score</span>
    <span class="kw">or</span>
    <span class="dt">$a</span> <span class="kw">cmp</span> <span class="dt">$b</span> <span class="co"># code point order by name</span>
}

<span class="dt">@patron_IDs</span> = <span class="fu">sort</span> {
    &amp;fines(<span class="dt">$b</span>) &lt;=&gt; &amp;fines(<span class="dt">$a</span>) <span class="kw">or</span>
    <span class="dt">$items</span>{<span class="dt">$b</span>} &lt;=&gt; <span class="dt">$items</span>{<span class="dt">$a</span>} <span class="kw">or</span>
    <span class="dt">$family_name</span>{<span class="dt">$a</span>} <span class="kw">cmp</span> <span class="dt">$family_name</span>{<span class="dt">$b</span>} <span class="kw">or</span>
    <span class="dt">$personal_name</span>{<span class="dt">$a</span>} <span class="kw">cmp</span> <span class="dt">$family_name</span>{<span class="dt">$b</span>} <span class="kw">or</span>
    <span class="dt">$a</span> &lt;=&gt; <span class="dt">$b</span>
} <span class="dt">@patron_IDs</span>;</code></pre></div>
</dd>
</dl>
<h2 id="smart-matching-and-given-when">Smart Matching and given-when</h2>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fl">5.010001</span>; <span class="co"># at least 5.10.1</span></code></pre></div>
<dl>
<dt>The Smart Match Operator</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$flag</span> = <span class="dv">0</span>;
<span class="kw">foreach</span> <span class="kw">my</span> <span class="dt">$key</span> ( <span class="fu">keys</span> <span class="dt">%names</span> ) {
    <span class="kw">next</span> <span class="kw">unless</span> <span class="dt">$key</span> =~ <span class="kw">/</span><span class="ot">Fred</span><span class="kw">/</span>;
    <span class="dt">$flag</span> = <span class="dt">$key</span>;
    <span class="kw">last</span>;
}

<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">I found a key matching &#39;Fred&#39;. It was </span><span class="dt">$flag</span><span class="ch">\n</span><span class="kw">&quot;</span> <span class="kw">if</span> <span class="dt">$flag</span>;</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fl">5.010001</span>;
say <span class="kw">&quot;</span><span class="st">I found a key matching &#39;Fred&#39;</span><span class="kw">&quot;</span> <span class="kw">if</span> <span class="dt">%names</span> ~~ <span class="kw">/</span><span class="ot">Fred</span><span class="kw">/</span>;
say <span class="kw">&quot;</span><span class="st">I found a key matching &#39;Fred&#39;</span><span class="kw">&quot;</span> <span class="kw">if</span> <span class="kw">/</span><span class="ot">Fred</span><span class="kw">/</span> ~~ <span class="dt">%names</span>; <span class="co"># same</span>

<span class="fu">use</span> <span class="fl">5.010001</span>;
say <span class="kw">&quot;</span><span class="st">The arrays have the same elements!</span><span class="kw">&quot;</span>
    <span class="kw">if</span> <span class="dt">@names1</span> ~~ <span class="dt">@names2</span>;</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fl">5.010001</span>;
<span class="kw">my</span> <span class="dt">@nums</span> = <span class="kw">qw(</span> 1 2 3 27 42 <span class="kw">)</span>;
<span class="kw">my</span> <span class="dt">$result</span> = max( <span class="dt">@nums</span> );
say <span class="kw">&quot;</span><span class="st">The result [</span><span class="dt">$result</span><span class="st">] is one of the input values (</span><span class="dt">@nums</span><span class="st">)</span><span class="kw">&quot;</span>
    <span class="kw">if</span> <span class="dt">@nums</span> ~~ <span class="dt">$result</span>;</code></pre></div>
</dd>
<dt>Smart Match Precedence</dt>
<dd><p><a href="http://perldoc.perl.org/perlsyn.html" class="uri">http://perldoc.perl.org/perlsyn.html</a></p>
<p>See smart match operations for pairs of operands.<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a></p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fl">5.010001</span>;
say <span class="kw">&quot;</span><span class="st">match number ~~ string</span><span class="kw">&quot;</span> <span class="kw">if</span> <span class="dv">4</span> ~~ <span class="kw">&#39;</span><span class="st">4abc</span><span class="kw">&#39;</span>;
say <span class="kw">&quot;</span><span class="st">match string ~~ number</span><span class="kw">&quot;</span> <span class="kw">if</span> <span class="kw">&#39;</span><span class="st">4abc</span><span class="kw">&#39;</span> ~~ <span class="dv">4</span>;</code></pre></div>
<dl>
<dt>You only get output for one of the smart matches:</dt>
<dd><code class="sourceCode perl">match string ~~ number</code>
</dd>
<dd>The first one is a string comparison even though it has a number on the lefthand side. The only entry in the precedence table with a Num on the lefthand side expects a &#8220;numish&#8221; operand on the righthand side. The <code>4abc</code> doesn&#8217;t look numish enough for Perl, so the smart match ends up at the final level where it has &#8220;Any&#8221; and &#8220;Any&#8221;. The operation there is a string comparison. The second one is a numeric comparison. It has &#8220;Any&#8221; on the lefthand side and &#8220;Num&#8221; on the righthand side. That&#8217;s a couple of levels above the comparison the first one triggered.
</dd>
</dl>
</dd>
<dt>The <code>given</code> Statement</dt>
<dd><p>It&#8217;s Perl&#8217;s equivalent to C&#8217;s <code>switch</code> statement, but as with most things Perly, it&#8217;s a bit more fancy so it gets a fancier name.</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fl">5.010001</span>;

<span class="kw">given</span> ( <span class="dt">$ARGV</span>[<span class="dv">0</span>] ) {
    <span class="kw">when</span> ( <span class="kw">&#39;</span><span class="st">Fred</span><span class="kw">&#39;</span> ) { say <span class="kw">&#39;</span><span class="st">Name is Fred</span><span class="kw">&#39;</span> }
    <span class="kw">when</span> ( <span class="kw">/</span><span class="ot">fred</span><span class="kw">/i</span> ) { say <span class="kw">&#39;</span><span class="st">Name has fred in it</span><span class="kw">&#39;</span> }
    <span class="kw">when</span> ( <span class="kw">/</span><span class="ch">\A</span><span class="ot">Fred</span><span class="kw">/</span> ) { say <span class="kw">&#39;</span><span class="st">Name starts with Fred</span><span class="kw">&#39;</span> }
    <span class="kw">default</span> { say <span class="kw">&quot;</span><span class="st">I don&#39;t see a Fred</span><span class="kw">&quot;</span> }
}</code></pre></div>
<p>In Perl parlance (<code>['p&#593;rl&#601;ns]</code>, &#35828;&#27861;, &#35821;&#35843;), <code>given</code> is a <strong>topicalizer</strong> because it makes its argument the topic, the fancy new name for <code>$_</code> in Perl 6.</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fl">5.010001</span>;
<span class="kw">given</span> ( <span class="dt">$ARGV</span>[<span class="dv">0</span>] ) {
    <span class="kw">when</span> ( <span class="kw">&#39;</span><span class="st">Fred</span><span class="kw">&#39;</span> ) { say <span class="kw">&#39;</span><span class="st">Name is Fred</span><span class="kw">&#39;</span>; <span class="kw">continue</span> }
    <span class="kw">when</span> ( <span class="kw">/</span><span class="ch">\A</span><span class="ot">Fred</span><span class="kw">/</span> ) { say <span class="kw">&#39;</span><span class="st">Name starts with Fred</span><span class="kw">&#39;</span>; <span class="kw">continue</span> }
    <span class="kw">when</span> ( <span class="kw">/</span><span class="ot">fred</span><span class="kw">/i</span> ) { say <span class="kw">&#39;</span><span class="st">Name has fred in it</span><span class="kw">&#39;</span>; }
    <span class="kw">default</span> { say <span class="kw">&quot;</span><span class="st">I don&#39;t see a Fred</span><span class="kw">&quot;</span> }
}</code></pre></div>
</dd>
<dt>Dumb Matching</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fl">5.010001</span>;
<span class="kw">given</span> ( <span class="dt">$ARGV</span>[<span class="dv">0</span>] ) {
    <span class="kw">when</span> ( <span class="dt">$_</span> <span class="kw">eq</span> <span class="kw">&#39;</span><span class="st">Fred</span><span class="kw">&#39;</span> ) { say <span class="kw">&#39;</span><span class="st">Name is Fred</span><span class="kw">&#39;</span>; <span class="kw">continue</span> }
    <span class="kw">when</span> ( <span class="dt">$_</span> =~ <span class="kw">/</span><span class="ch">\A</span><span class="ot">Fred</span><span class="kw">/</span> ) { say <span class="kw">&#39;</span><span class="st">Name starts with Fred</span><span class="kw">&#39;</span>; <span class="kw">continue</span> }
    <span class="kw">when</span> ( <span class="dt">$_</span> =~ <span class="kw">/</span><span class="ot">fred</span><span class="kw">/i</span> ) { say <span class="kw">&#39;</span><span class="st">Name has fred in it</span><span class="kw">&#39;</span>; }
    <span class="kw">default</span> { say <span class="kw">&quot;</span><span class="st">I don&#39;t see a Fred</span><span class="kw">&quot;</span> }
}</code></pre></div>
<p>You can even mix and match dumb and smart matching; the individual when expressions figure out their comparisons on their own:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fl">5.010001</span>;
<span class="kw">given</span> ( <span class="dt">$ARGV</span>[<span class="dv">0</span>] ) {
    <span class="kw">when</span> ( <span class="kw">&#39;</span><span class="st">Fred</span><span class="kw">&#39;</span> ) {                           <span class="co">#smart</span>
        say <span class="kw">&#39;</span><span class="st">Name is Fred</span><span class="kw">&#39;</span>; <span class="kw">continue</span> }
    <span class="kw">when</span> ( <span class="dt">$_</span> =~ <span class="kw">/</span><span class="ch">\A</span><span class="ot">Fred</span><span class="kw">/</span> ) {                   <span class="co">#dumb</span>
        say <span class="kw">&#39;</span><span class="st">Name starts with Fred</span><span class="kw">&#39;</span>; <span class="kw">continue</span> }
    <span class="kw">when</span> ( <span class="kw">/</span><span class="ot">fred</span><span class="kw">/i</span> ) {                          <span class="co">#smart</span>
        say <span class="kw">&#39;</span><span class="st">Name has fred in it</span><span class="kw">&#39;</span>; }
    <span class="kw">default</span> { say <span class="kw">&quot;</span><span class="st">I don&#39;t see a Fred</span><span class="kw">&quot;</span> }
}</code></pre></div>
<p>Negated expressions, including a negated regular expression, don&#8217;t use a smart match either. These cases are just like the control structure conditions you saw in previous chapters:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="co"># ???</span>
<span class="fu">use</span> <span class="fl">5.010001</span>;
<span class="kw">given</span>( <span class="dt">$ARGV</span>[<span class="dv">0</span>] ) {
    <span class="kw">when</span>( ! <span class="dt">$boolean</span> ) {                        <span class="co">#dumb</span>
        say <span class="kw">&#39;</span><span class="st">Name has fred in it</span><span class="kw">&#39;</span> }
    <span class="kw">when</span>( ! <span class="kw">/</span><span class="ot">fred</span><span class="kw">/i</span> ) {                         <span class="co">#dumb</span>
        say <span class="kw">&#39;</span><span class="st">Does not match Fred</span><span class="kw">&#39;</span> }
}</code></pre></div>
</dd>
<dt>Using <code>when</code> with Many Items</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fl">5.010001</span>;
<span class="kw">foreach</span> <span class="kw">my</span> <span class="dt">$name</span> ( <span class="dt">@names</span> ) {
    <span class="kw">given</span>( <span class="dt">$name</span> ) {
        ...
    }
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fl">5.010001</span>;
<span class="kw">foreach</span> ( <span class="dt">@names</span> ) { <span class="co"># don&#39;t use a named variable!</span>
    say <span class="kw">&quot;</span><span class="ch">\n</span><span class="st">Processing </span><span class="dt">$_</span><span class="kw">&quot;</span>;
    <span class="kw">when</span> ( <span class="kw">/</span><span class="ot">fred</span><span class="kw">/i</span> ) { say <span class="kw">&#39;</span><span class="st">Name has fred in it</span><span class="kw">&#39;</span>; <span class="kw">continue</span> }
    <span class="kw">when</span> ( <span class="kw">/</span><span class="ch">\A</span><span class="ot">Fred</span><span class="kw">/</span> ) { say <span class="kw">&#39;</span><span class="st">Name starts with Fred</span><span class="kw">&#39;</span>; <span class="kw">continue</span> }
    <span class="kw">when</span> ( <span class="kw">&#39;</span><span class="st">Fred</span><span class="kw">&#39;</span> ) { say <span class="kw">&#39;</span><span class="st">Name is Fred</span><span class="kw">&#39;</span>; }

    say <span class="kw">&quot;</span><span class="st">Moving on to default...</span><span class="kw">&quot;</span>;
    <span class="kw">default</span> { say <span class="kw">&quot;</span><span class="st">I don&#39;t see a Fred</span><span class="kw">&quot;</span> }
}</code></pre></div>
</dd>
</dl>
<h2 id="processing-management">Processing Management</h2>
<p>And like everything else in Perl, There&#8217;s More Than One Way To Do It, with lots of overlap, variations, and special features.</p>
<dl>
<dt>The system Function</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">system</span> <span class="kw">&#39;</span><span class="st">date</span><span class="kw">&#39;</span>;

<span class="fu">system</span> <span class="kw">&#39;</span><span class="st">ls -l  $HOME</span><span class="kw">&#39;</span>; <span class="co"># bad</span>
<span class="fu">system</span> <span class="kw">&#39;</span><span class="st">ls -l \$HOME</span><span class="kw">&#39;</span>; <span class="co"># good</span>

<span class="fu">system</span> <span class="kw">&quot;</span><span class="st">long_running_command with parameters &amp;</span><span class="kw">&quot;</span>;

<span class="co"># shell script</span>
<span class="fu">system</span> <span class="kw">&#39;</span><span class="st">for i in *; do echo == $i ==; cat $i; done</span><span class="kw">&#39;</span>;</code></pre></div>
</dd>
<dt>Avoiding the Shell</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">system</span> <span class="kw">&quot;</span><span class="st">tar cvf </span><span class="dt">$tarfile</span><span class="st"> </span><span class="dt">@dirs</span><span class="kw">&quot;</span>; <span class="co"># Oops!</span>

<span class="kw">my</span> <span class="dt">$tarfile</span> = <span class="kw">&#39;</span><span class="st">something*wicked.tar</span><span class="kw">&#39;</span>;
<span class="kw">my</span> <span class="dt">@dirs</span> = <span class="kw">qw(</span>fred|flintstone &lt;barney&amp;rubble&gt; betty <span class="kw">)</span>;
<span class="fu">system</span> <span class="kw">&#39;</span><span class="st">tar</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">cvf</span><span class="kw">&#39;</span>, <span class="dt">$tarfile</span>, <span class="dt">@dirs</span>;

<span class="kw">my</span> <span class="dt">@dirs</span> = <span class="kw">qw(</span> ; rm -rf / <span class="kw">)</span>;

<span class="co"># same</span>
<span class="fu">system</span> <span class="dt">$command_line</span>;
<span class="fu">system</span> <span class="kw">&#39;</span><span class="st">/bin/sh</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">-c</span><span class="kw">&#39;</span>, <span class="dt">$command_line</span>;

<span class="kw">unless</span> (<span class="fu">system</span> <span class="kw">&#39;</span><span class="st">date</span><span class="kw">&#39;</span>) {
    <span class="co"># Return was zero, meaning success</span>
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">We gave you a date, OK!</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

!<span class="fu">system</span> <span class="kw">&#39;</span><span class="st">rm -rf files_to_delete</span><span class="kw">&#39;</span> <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&#39;</span><span class="st">something went wrong</span><span class="kw">&#39;</span>;</code></pre></div>
</dd>
<dt>The Environment Variables</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="co"># don&#39;t want the `IFS` environment variable to be set when you run the</span>
<span class="co"># command, because that might cause `make` or some subcommand</span>
<span class="co"># do the wrong thing</span>
<span class="dt">$ENV</span>{<span class="kw">&#39;</span><span class="st">PATH</span><span class="kw">&#39;</span>} = <span class="kw">&quot;</span><span class="st">/home/rootbeer/bin:</span><span class="dt">$ENV</span><span class="st">{&#39;PATH&#39;}</span><span class="kw">&quot;</span>;
<span class="fu">delete</span> <span class="dt">$ENV</span>{<span class="kw">&#39;</span><span class="st">IFS</span><span class="kw">&#39;</span>};</code></pre></div>
</dd>
<dt>The <code>exec</code> Function</dt>
<dd><p>The <code>system</code> function creates a child process, which then scurries (<code>['sk&#605;i]</code>, &#24613;&#36305;) off to perform the requested action while Perl naps (&#25171;&#30457;&#20799;). The <code>exec</code> function causes the Perl process itself to perform the requested action. Think of it as more like a &#8220;goto&#8221; than a subroutine call.</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">chdir</span> <span class="kw">&#39;</span><span class="st">/tmp</span><span class="kw">&#39;</span> <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">Cannot chdir /tmp: </span><span class="dt">$!</span><span class="kw">&quot;</span>;
<span class="fu">exec</span> <span class="kw">&#39;</span><span class="st">bedrock</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">-o</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">args1</span><span class="kw">&#39;</span>, <span class="dt">@ARGV</span>;

<span class="dt">$ENV</span>{PATH} = <span class="kw">&#39;</span><span class="st">/bin:/usr/bin</span><span class="kw">&#39;</span>;
<span class="dt">$ENV</span>{DEBUG} = <span class="dv">1</span>;
<span class="dt">$ENV</span>{ROCK} = <span class="kw">&#39;</span><span class="st">granite</span><span class="kw">&#39;</span>;
<span class="fu">chdir</span> <span class="kw">&#39;</span><span class="st">/Users/fred</span><span class="kw">&#39;</span>;
<span class="fu">open</span> STDOUT, <span class="kw">&#39;</span><span class="st">&gt;</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">/tmp/granite.out</span><span class="kw">&#39;</span>;
<span class="fu">exec</span> <span class="kw">&#39;</span><span class="st">bedrock</span><span class="kw">&#39;</span>;</code></pre></div>
<p>Having said that, it&#8217;s actually quite rare to use exec , except in combination with fork (which you&#8217;ll see later). If you are puzzling over system versus <code>exec</code>, just pick <code>system</code>, and nearly all of the time you&#8217;ll be just fine. Except for handling the error when the requested command cannot be started:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">exec</span> <span class="kw">&#39;</span><span class="st">date</span><span class="kw">&#39;</span>;
<span class="fu">die</span> <span class="kw">&quot;</span><span class="st">date couldn&#39;t run: </span><span class="dt">$!</span><span class="kw">&quot;</span>;
<span class="kw">my</span> <span class="dt">$make_result</span> = <span class="fu">system</span> <span class="kw">&#39;</span><span class="st">make</span><span class="kw">&#39;</span>;</code></pre></div>
</dd>
<dt>Using Backquotes to Capture Output</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$now</span> = <span class="kw">`</span><span class="st">date</span><span class="kw">`</span>;               <span class="co"># grab the output of date</span>
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The time is now </span><span class="dt">$now</span><span class="kw">&quot;</span>;   <span class="co"># newline already present</span>

<span class="kw">my</span> <span class="dt">@functions</span> = <span class="kw">qw{</span> int rand sleep length hex eof not exit sqrt umask <span class="kw">}</span>;
<span class="kw">my</span> <span class="dt">%about</span>;
<span class="kw">foreach</span> (<span class="dt">@functions</span>) {
    <span class="dt">$about</span>{<span class="dt">$_</span>} = <span class="kw">`</span><span class="st">perldoc -t -f </span><span class="dt">$_</span><span class="kw">`</span>;
}

<span class="co"># the generalized quoting operator,  qx()</span>
<span class="kw">foreach</span> (<span class="dt">@functions</span>) {
    <span class="dt">$about</span>{<span class="dt">$_</span>} = <span class="kw">qx(</span><span class="st">perldoc -t -f </span><span class="dt">$_</span><span class="kw">)</span>;
}</code></pre></div>
<p>As with the other generalized quotes, you mainly use this when the stuff inside the quotes is also the default delimiter. If you wanted to have a literal backquote in your command, you can use the <code>qx()</code> mechanism to <strong>avoid the hassle of escaping the offending character</strong>. There&#8217;s another benefit to the generalized quoting, too. If you use the single quote as the delimiter, the quoting does not interpolate anything. If you want to use the shell&#8217;s process ID variable <code>$$</code> instead of Perl&#8217;s, you use <code>qx''</code> to avoid the interpolation: <code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$output</span> = <span class="kw">qx&#39;</span><span class="st">echo $$</span><span class="ch">&#39;</span><span class="st">;</span></code>.</p>
<p>Avoid using backquotes in a place where the value isn&#8217;t being captured.</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Starting the frobnitzigator:</span><span class="ch">\n</span><span class="kw">&quot;</span>;
<span class="kw">`</span><span class="st">frobnitz -enable</span><span class="kw">`</span>;             <span class="co"># please don&#39;t do this</span>
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Done!</span><span class="ch">\n</span><span class="kw">&quot;</span>;

<span class="kw">my</span> <span class="dt">$output_with_errors</span> = <span class="kw">`</span><span class="st">frobnitz -enable 2&gt;&amp;1</span><span class="kw">`</span>;
<span class="kw">my</span> <span class="dt">$result</span> = <span class="kw">`</span><span class="st">some_questionable_command arg arg argh &lt;/dev/null</span><span class="kw">`</span>;</code></pre></div>
</dd>
<dt>Using Backquotes in a List Context</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$who_text</span> = <span class="kw">`</span><span class="st">who</span><span class="kw">`</span>;
<span class="kw">my</span> <span class="dt">@who_lines</span> = <span class="fu">split</span> <span class="kw">/</span><span class="bn">\n</span><span class="kw">/</span>, <span class="dt">$who_text</span>;</code></pre></div>
<p>But in a list context, we automatically get the data broken up by lines:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">@who_lines</span> = <span class="kw">`</span><span class="st">who</span><span class="kw">`</span>;

<span class="kw">foreach</span> (<span class="kw">`</span><span class="st">who</span><span class="kw">`</span>) {
    <span class="kw">my</span>(<span class="dt">$user</span>, <span class="dt">$tty</span>, <span class="dt">$date</span>) = <span class="kw">/</span><span class="ch">(</span><span class="bn">\S</span><span class="ch">+)</span><span class="bn">\s</span><span class="ch">+(</span><span class="bn">\S</span><span class="ch">+)</span><span class="bn">\s</span><span class="ch">+(</span><span class="ot">.</span><span class="ch">*)</span><span class="kw">/</span>;
    <span class="dt">$ttys</span>{<span class="dt">$user</span>} .= <span class="kw">&quot;</span><span class="dt">$tty</span><span class="st"> at </span><span class="dt">$date</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
</dd>
<dt>External Processes with <code>IPC::System::Simple</code></dt>
<dd><p>There&#8217;s really not that much to say about this module because it is truly simple. You can use it to replace the built-in system with its own ** more robust** version:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fu">IPC::System</span>::<span class="fu">Simple</span> <span class="kw">qw(</span>system<span class="kw">)</span>;
<span class="kw">my</span> <span class="dt">$tarfile</span> = <span class="kw">&#39;</span><span class="st">something*wicked.tar</span><span class="kw">&#39;</span>;
<span class="kw">my</span> <span class="dt">@dirs</span> = <span class="kw">qw(</span>fred|flintstone &lt;barney&amp;rubble&gt; betty <span class="kw">)</span>;
<span class="fu">system</span> <span class="kw">&#39;</span><span class="st">tar</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">cvf</span><span class="kw">&#39;</span>, <span class="dt">$tarfile</span>, <span class="dt">@dirs</span>;</code></pre></div>
<p>It also provides a <code>systemx</code> that never uses the shell, so you should never have the problem of unintended shell actions: <code class="sourceCode perl">systemx <span class="kw">&#39;</span><span class="st">tar</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">cvf</span><span class="kw">&#39;</span>, <span class="dt">$tarfile</span>, <span class="dt">@dirs</span>;</code>.</p>
<p>If you want to capture the output, you change the <code>system</code> or <code>systemx</code> to <code>capture</code> or <code>capturex</code>, both of which work like backquotes (but better):</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">@output</span> = capturex <span class="kw">&#39;</span><span class="st">tar</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">cvf</span><span class="kw">&#39;</span>, <span class="dt">$tarfile</span>, <span class="dt">@dirs</span>;</code></pre></div>
</dd>
<dt>Processes as Filehandles</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">open</span> DATE, <span class="kw">&#39;</span><span class="st">date|</span><span class="kw">&#39;</span> <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">cannot pipe from date: </span><span class="dt">$!</span><span class="kw">&quot;</span>;
<span class="fu">open</span> MAIL, <span class="kw">&#39;</span><span class="st">|mail merlyn</span><span class="kw">&#39;</span> <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">cannot pipe to mail: </span><span class="dt">$!</span><span class="kw">&quot;</span>;

<span class="fu">open</span> <span class="kw">my</span> <span class="dt">$date_fh</span>, <span class="kw">&#39;</span><span class="st">-|</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">date</span><span class="kw">&#39;</span> <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">cannot pipe from date: </span><span class="dt">$!</span><span class="kw">&quot;</span>;
<span class="fu">open</span> <span class="kw">my</span> <span class="dt">$mail_fh</span>, <span class="kw">&#39;</span><span class="st">|-</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">mail</span><span class="kw">&#39;</span>, <span class="kw">&#39;</span><span class="st">merlyn</span><span class="kw">&#39;</span>
    <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">cannot pipe to mail: </span><span class="dt">$!</span><span class="kw">&quot;</span>;

<span class="kw">my</span> <span class="dt">$now</span> = &lt;<span class="dt">$date_fh</span>&gt;;

<span class="fu">close</span> <span class="dt">$mail_fh</span>;
<span class="fu">die</span> <span class="kw">&quot;</span><span class="st">mail: non-zero exit of </span><span class="dt">$?</span><span class="kw">&quot;</span> <span class="kw">if</span> <span class="dt">$?</span>;

<span class="fu">open</span> <span class="kw">my</span> <span class="dt">$find_fh</span>, <span class="kw">&#39;</span><span class="st">-|</span><span class="kw">&#39;</span>,
    <span class="kw">&#39;</span><span class="st">find</span><span class="kw">&#39;</span>, <span class="kw">qw(</span> / -atime +90 -size +1000 -print <span class="kw">)</span>
        <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">fork: </span><span class="dt">$!</span><span class="kw">&quot;</span>;

<span class="kw">while</span> (&lt;<span class="dt">$find_fh</span>&gt;) {
    <span class="fu">chomp</span>;
    <span class="fu">printf</span> <span class="kw">&quot;</span><span class="dt">%s</span><span class="st"> size </span><span class="dt">%dK</span><span class="st"> last accessed %.2f days ago</span><span class="ch">\n</span><span class="kw">&quot;</span>,
        <span class="dt">$_</span>, (<span class="dv">1023</span> + <span class="kw">-s</span> <span class="dt">$_</span>)/<span class="dv">1024</span>, <span class="kw">-A</span> <span class="dt">$_</span>;
}</code></pre></div>
</dd>
<dt>Getting Down and Dirty with Fork</dt>
<dd><p>Quick reimplementation of this: <code class="sourceCode perl"><span class="fu">system</span> <span class="kw">&#39;</span><span class="st">date</span><span class="kw">&#39;</span>;</code></p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">defined</span>(<span class="kw">my</span> <span class="dt">$pid</span> = <span class="fu">fork</span>) <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">Cannot fork: </span><span class="dt">$!</span><span class="kw">&quot;</span>;
<span class="kw">unless</span> (<span class="dt">$pid</span>) {
    <span class="co"># Child process is here</span>
    <span class="fu">exec</span> <span class="kw">&#39;</span><span class="st">date</span><span class="kw">&#39;</span>;
    <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">cannot exec date: </span><span class="dt">$!</span><span class="kw">&quot;</span>;
}
<span class="co"># Parent process is here</span>
<span class="fu">waitpid</span>(<span class="dt">$pid</span>, <span class="dv">0</span>);</code></pre></div>
</dd>
<dt>Sending and Receiving Signals</dt>
<dd><p>That&#8217;s easy enough if you know that <code>SIGINT</code> corresponds to the number 2:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">kill</span> <span class="dv">2</span>, <span class="dv">4201</span> <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">Cannot signal 4201 with SIGINT: </span><span class="dt">$!</span><span class="kw">&quot;</span>;

<span class="fu">kill</span> <span class="kw">&#39;</span><span class="st">INT</span><span class="kw">&#39;</span>, <span class="dv">4201</span> <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">Cannot signal 4201 with SIGINT: </span><span class="dt">$!</span><span class="kw">&quot;</span>;</code></pre></div>
<p>You can even use the <code>=&gt;</code> operator to automatically quote the signal name:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">kill</span> INT =&gt; <span class="dv">4201</span> <span class="kw">or</span> <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">Cannot signal 4201 with SIGINT: </span><span class="dt">$!</span><span class="kw">&quot;</span>;</code></pre></div>
</dd>
</dl>
<h2 id="some-advanced-perl-techniques">Some Advanced Perl Techniques</h2>
<p>What you&#8217;ve seen so far is the core of Perl, the part that you as a Perl user should understand. But there are many other techniques that, while not obligatory, are still valuable tools to have in your toolbox. We&#8217;ve gathered the most important of those for this chapter. This also segues into the continuation of this book, Intermediate Perl, which is your next step in Perl.</p>
<dl>
<dt>Slices</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span>(<span class="fu">undef</span>, <span class="dt">$card_num</span>, <span class="fu">undef</span>, <span class="fu">undef</span>, <span class="fu">undef</span>, <span class="dt">$count</span>) = <span class="fu">split</span> <span class="kw">/</span><span class="ot">:</span><span class="kw">/</span>;</code></pre></div>
<p>Perl can index into a list as if it were an array. This is a list slice. Here, since the mtime is item 9 in the list returned by <code>stat</code>, you can get it with a subscript:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$mtime</span> = (<span class="fu">stat</span> <span class="dt">$some_file</span>)[<span class="dv">9</span>];

<span class="kw">my</span> <span class="dt">$mtime</span> =  <span class="fu">stat</span>(<span class="dt">$some_file</span>)[<span class="dv">9</span>]; <span class="co"># Syntax error!</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$card_num</span>             = (<span class="fu">split</span> <span class="kw">/</span><span class="ot">:</span><span class="kw">/</span>)[<span class="dv">1</span>];
<span class="kw">my</span> <span class="dt">$count</span>                = (<span class="fu">split</span> <span class="kw">/</span><span class="ot">:</span><span class="kw">/</span>)[<span class="dv">5</span>];
<span class="kw">my</span>(<span class="dt">$card_num</span>, <span class="dt">$count</span>)    = (<span class="fu">split</span> <span class="kw">/</span><span class="ot">:</span><span class="kw">/</span>)[<span class="dv">1</span>, <span class="dv">5</span>];
<span class="kw">my</span>(<span class="dt">$first</span>, <span class="dt">$last</span>)        = (<span class="fu">sort</span> <span class="dt">@names</span>)[<span class="dv">0</span>, &#8211;<span class="dv">1</span>];</code></pre></div>
</dd>
<dt>Array Slice</dt>
<dd><div class="tzx-fright">
<div class="figure">
<img src="http://whudoc.qiniudn.com/array-slice.png" />

</div>
</div>
<p>That previous example could be made even simpler. When slicing elements from an array (as opposed to a list), the parentheses aren&#8217;t needed. So we could have done the slice like this:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">@numbers</span> = <span class="dt">@names</span>[ <span class="dv">9</span>, <span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span> ];</code></pre></div>
</dd>
<dt>Hash Slice</dt>
<dd><div class="tzx-fright">
<div class="figure">
<img src="http://whudoc.qiniudn.com/hash-slice.png" />

</div>
</div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">@names</span> = <span class="kw">qw{</span> zero one two three<span class="kw">}</span>;
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Bedrock </span><span class="dt">@names</span><span class="st">[ 2, 1, 0 ]</span><span class="ch">\n</span><span class="kw">&quot;</span>;</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">@players</span> = <span class="kw">qw/</span> barney fred dino <span class="kw">/</span>;
<span class="kw">my</span> <span class="dt">@bowling_scores</span> = (<span class="dv">195</span>, <span class="dv">205</span>, <span class="dv">30</span>);
<span class="dt">@score</span>{ <span class="dt">@players</span> } = <span class="dt">@bowling_scores</span>;

<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Tonight&#39;s players were: </span><span class="dt">@players</span><span class="ch">\n</span><span class="kw">&quot;</span>;
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Their scores were: </span><span class="dt">@score</span><span class="st">{</span><span class="dt">@players</span><span class="st">}</span><span class="ch">\n</span><span class="kw">&quot;</span>;</code></pre></div>
</dd>
<dt>Trapping Errors</dt>
<dd><p>See the third book in this series, Mastering Perl, for an in-depth examination of error handling in Perl.</p>
<p>With just basic Perl, you throw an exception with <code>die</code> and catch it with <code>eval</code>. You can inspect the value of <code>$@</code> to figure out what happened:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">eval</span> {
    ...;
    <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">An unexpected exception message</span><span class="kw">&quot;</span> <span class="kw">if</span> <span class="dt">$unexpected</span>;
    <span class="fu">die</span> <span class="kw">&quot;</span><span class="st">Bad denominator</span><span class="kw">&quot;</span> <span class="kw">if</span> <span class="dt">$dino</span> == <span class="dv">0</span>;
    <span class="dt">$barney</span> = <span class="dt">$fred</span> / <span class="dt">$dino</span>;
}

<span class="kw">if</span> ( <span class="dt">$@</span> =~ <span class="kw">/</span><span class="ot">unexpected</span><span class="kw">/</span> ) {
    ...;
}
<span class="kw">elsif</span>( <span class="dt">$@</span> =~ <span class="kw">/</span><span class="ot">denominator</span><span class="kw">/</span> ) {
    ...;
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fu">Try::Tiny</span>;
try {
    ...; <span class="co"># some code that might throw errors</span>
}
catch {
    ...; <span class="co"># some code to handle the error</span>
}
finally {
    ...;
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> autodie;
<span class="dt">$filename</span> = <span class="kw">&#39;</span><span class="st">/does/not/exist</span><span class="kw">&#39;</span>
<span class="fu">open</span> <span class="kw">my</span> <span class="dt">$fh</span>, <span class="kw">&#39;</span><span class="st">&gt;</span><span class="kw">&#39;</span>, <span class="dt">$filename</span>;            <span class="co"># still dies on error</span></code></pre></div>
<p>If this fails, you get the error message you might have chosen yourself: <code>Can't open '/does/not/exist' for writing: No such file or directory</code></p>
<p><code class="sourceCode perl"><span class="fu">use</span> autodie <span class="kw">qw(</span> open system :socket <span class="kw">)</span>;</code></p>
<p>You might combine <code>autodie</code> with <code>Try::Tiny</code>:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fl">5.010</span>;
<span class="fu">use</span> autodie;
<span class="fu">use</span> <span class="fu">Try::Tiny</span>;
try {
    <span class="fu">open</span> <span class="kw">my</span> <span class="dt">$fh</span>, <span class="kw">&#39;</span><span class="st">&gt;</span><span class="kw">&#39;</span>, <span class="dt">$filename</span>; <span class="co"># still dies on error</span>
}
catch {
    <span class="kw">when</span>( <span class="kw">&#39;</span><span class="st">open</span><span class="kw">&#39;</span> ) { say <span class="kw">&#39;</span><span class="st">Got an open error</span><span class="kw">&#39;</span> }
};</code></pre></div>
</dd>
<dt>Picking Items from a List with grep</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">@odd_numbers</span>;
<span class="kw">foreach</span> (<span class="dv">1</span>..<span class="dv">1000</span>) {
    <span class="fu">push</span> <span class="dt">@odd_numbers</span>, <span class="dt">$_</span> <span class="kw">if</span> <span class="dt">$_</span> % <span class="dv">2</span>;
}

<span class="kw">my</span> <span class="dt">@odd_numbers</span> = <span class="fu">grep</span> { <span class="dt">$_</span> % <span class="dv">2</span> } <span class="dv">1</span>..<span class="dv">1000</span>;

<span class="kw">my</span> <span class="dt">@matching_lines</span> = <span class="fu">grep</span> { <span class="kw">/</span><span class="ch">\b</span><span class="ot">fred</span><span class="ch">\b</span><span class="kw">/i</span> } &lt;<span class="dt">$fh</span>&gt;;
<span class="kw">my</span> <span class="dt">@matching_lines</span> = <span class="fu">grep</span> <span class="kw">/</span><span class="ch">\b</span><span class="ot">fred</span><span class="ch">\b</span><span class="kw">/i</span>, &lt;<span class="dt">$fh</span>&gt;;</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$line_count</span> = <span class="fu">grep</span> <span class="kw">/</span><span class="ch">\b</span><span class="ot">fred</span><span class="ch">\b</span><span class="kw">/i</span>, &lt;<span class="dt">$fh</span>&gt;;

<span class="kw">my</span> <span class="dt">@matching_lines</span> = <span class="fu">grep</span> <span class="kw">/</span><span class="ch">\b</span><span class="ot">fred</span><span class="ch">\b</span><span class="kw">/i</span>, &lt;<span class="dt">$fh</span>&gt;;
<span class="kw">my</span> <span class="dt">$line_count</span> = <span class="dt">@matching_lines</span>;</code></pre></div>
</dd>
<dt>Transforming Items from a List with map</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">@data</span> = (<span class="fl">4.75</span>, <span class="fl">1.5</span>, <span class="dv">2</span>, <span class="dv">1234</span>, <span class="fl">6.9456</span>, <span class="fl">12345678.9</span>, <span class="fl">29.95</span>);
<span class="kw">my</span> <span class="dt">@formatted_data</span> = <span class="fu">map</span> { &amp;big_money(<span class="dt">$_</span>) } <span class="dt">@data</span>;

<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The money numbers are:</span><span class="ch">\n</span><span class="kw">&quot;</span>,
    <span class="fu">map</span> { <span class="fu">sprintf</span>(<span class="kw">&quot;</span><span class="dt">%25s</span><span class="ch">\n</span><span class="kw">&quot;</span>, <span class="dt">$_</span>) } <span class="dt">@formatted_data</span>;

<span class="kw">my</span> <span class="dt">@data</span> = (<span class="fl">4.75</span>, <span class="fl">1.5</span>, <span class="dv">2</span>, <span class="dv">1234</span>, <span class="fl">6.9456</span>, <span class="fl">12345678.9</span>, <span class="fl">29.95</span>);
<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">The money numbers are:</span><span class="ch">\n</span><span class="kw">&quot;</span>,
    <span class="fu">map</span> { <span class="fu">sprintf</span>(<span class="kw">&quot;</span><span class="dt">%25s</span><span class="ch">\n</span><span class="kw">&quot;</span>, &amp;big_money(<span class="dt">$_</span>) ) } <span class="dt">@data</span>;

<span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Some powers of two are:</span><span class="ch">\n</span><span class="kw">&quot;</span>,
    <span class="fu">map</span> <span class="kw">&quot;</span><span class="ch">\t</span><span class="kw">&quot;</span> . ( <span class="dv">2</span> *<span class="kw">*</span> <span class="dt">$_</span> ) . <span class="kw">&quot;</span><span class="ch">\n</span><span class="kw">&quot;</span>, <span class="dv">0</span>..<span class="dv">15</span>;</code></pre></div>
</dd>
<dt>Fancier List Utilities</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$first_match</span>;
<span class="kw">foreach</span> (<span class="dt">@characters</span>) {
    <span class="kw">if</span> (<span class="kw">/</span><span class="ch">\b</span><span class="ot">Pebbles</span><span class="ch">\b</span><span class="kw">/i</span>) {
        <span class="dt">$first_match</span> = <span class="dt">$_</span>;
        <span class="kw">last</span>;
    }
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fu">List::Util</span> <span class="kw">qw(</span>first<span class="kw">)</span>;
<span class="kw">my</span> <span class="dt">$first_match</span> = first { <span class="kw">/</span><span class="ch">\b</span><span class="ot">Pebbles</span><span class="ch">\b</span><span class="kw">/i</span> } <span class="dt">@characters</span>;

<span class="fu">use</span> <span class="fu">List::Util</span> <span class="kw">qw(</span>sum<span class="kw">)</span>;
<span class="kw">my</span> <span class="dt">$total</span> = sum( <span class="dv">1</span>..<span class="dv">1000</span> ); <span class="co"># 500500</span>

<span class="fu">use</span> <span class="fu">List::Util</span> <span class="kw">qw(</span>max<span class="kw">)</span>;
<span class="kw">my</span> <span class="dt">$max</span> = max( <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">4</span>, <span class="dv">6</span> );

<span class="fu">use</span> <span class="fu">List::Util</span> <span class="kw">qw(</span>maxstr<span class="kw">)</span>;
<span class="kw">my</span> <span class="dt">$max</span> = maxstr( <span class="dt">@strings</span> );

<span class="fu">use</span> <span class="fu">List::Util</span> <span class="kw">qw(</span>shuffle<span class="kw">)</span>;
<span class="kw">my</span> <span class="dt">@shuffled</span> = shuffle(<span class="dv">1</span>..<span class="dv">1000</span>); <span class="co"># randomized order of elements</span>

<span class="fu">use</span> <span class="fu">List::MoreUtils</span> <span class="kw">qw(</span>none any all<span class="kw">)</span>;
<span class="kw">if</span> (none { <span class="dt">$_</span> &gt; <span class="dv">100</span> } <span class="dt">@numbers</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">No elements over 100</span><span class="ch">\n</span><span class="kw">&quot;</span>
} <span class="kw">elsif</span> (any { <span class="dt">$_</span> &gt; <span class="dv">50</span> } <span class="dt">@numbers</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Some elements over 50</span><span class="ch">\n</span><span class="kw">&quot;</span>;
} <span class="kw">elsif</span> (all { <span class="dt">$_</span> &lt; <span class="dv">10</span> } <span class="dt">@numbers</span>) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">All elements are less than 10</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
<p>If you want to deal with the list in groups of items, you can use the <code>natatime</code> (N at a time) to handle that for you:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fu">List::MoreUtils</span> <span class="kw">qw(</span>natatime<span class="kw">)</span>;
<span class="kw">my</span> <span class="dt">$iterator</span> = natatime <span class="dv">3</span>, <span class="dt">@array</span>;
<span class="kw">while</span>( <span class="kw">my</span> <span class="dt">@triad</span> = <span class="dt">$iterator</span>-&gt;() ) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Got </span><span class="dt">@triad</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}

<span class="fu">use</span> <span class="fu">List::MoreUtils</span> <span class="kw">qw(</span>mesh<span class="kw">)</span>;
<span class="kw">my</span> <span class="dt">@abc</span> = <span class="kw">&#39;</span><span class="st">a</span><span class="kw">&#39;</span> .. <span class="kw">&#39;</span><span class="st">z</span><span class="kw">&#39;</span>;
<span class="kw">my</span> <span class="dt">@numbers</span> = <span class="dv">1</span> .. <span class="dv">20</span>;
<span class="kw">my</span> <span class="dt">@dinosaurs</span> = <span class="kw">qw(</span> dino <span class="kw">)</span>;
<span class="kw">my</span> <span class="dt">@large_array</span> = mesh <span class="dt">@abc</span>, <span class="dt">@numbers</span>, <span class="dt">@dinosaurs</span>;</code></pre></div>
</dd>
</dl>
<hr />
<h2 id="a.-exercise-answers">A. Exercise Answers</h2>
<h2 id="b.-beyond-the-llama-l&#593;m&#601;-&#32654;&#27954;&#39548;">B. Beyond the Llama (<code>['l&#593;m&#601;]</code>, &#32654;&#27954;&#39548;)</h2>
<p>We don&#8217;t expect many readers to read every word of this appendix, but we hope you&#8217;ll at least <strong>skim the headings so that you&#8217;ll be prepared to fight back</strong> when someone tells you, &#8220;You just can&#8217;t use Perl for project X because Perl can&#8217;t do Y.&#8221;</p>
<p>The most important thing to keep in mind (so that we&#8217;re not repeating it in every paragraph) is that the most important part of what we&#8217;re not covering here is covered in Intermediate Perl, also known as &#8220;the Alpaca&#8221; (<code>[&#230;l'p&#230;k&#601;]</code>, &#32650;&#39548;).</p>
<p>After the Alpaca, you&#8217;ll be ready to move on to Mastering Perl, also know as &#8220;the Vicunas&#8221; (<code>[vi'kju:n&#601;]</code>, &#39558;&#39532;) It covers the everyday tasks that you&#8217;ll want to do while programming Perl, such as benchmarking and profiling, program configuration, and logging. It also goes through the work you&#8217;ll need to do to deal with code written by other people and how to integrate that into your own applications.</p>
<ul>
<li><a href="http://perldoc.perl.org/perl.html">perltoc</a></li>
<li><a href="http://perldoc.perl.org/perlfaq.html">perfaq</a></li>
<li><a href="http://perldoc.perl.org">perldoc</a></li>
</ul>
<p>RegExp</p>
<ul>
<li><a href="http://perldoc.perl.org/perlmod.html">perlmod</a></li>
<li><a href="http://perldoc.perl.org/perlmodlib.html">perlmodlib</a></li>
</ul>
<p>Other Operators and Functions</p>
<ul>
<li><a href="http://perldoc.perl.org/perlop.html">perlop</a></li>
<li><a href="http://perldoc.perl.org/perlfunc.html">perlfunc</a></li>
</ul>
<p>Transliteration with <code>tr///</code></p>
<dl>
<dt>Here Documents</dt>
<dd><p>Here documents are a useful form of multiline string quoting; see the perldata documentation.</p>
</dd>
</dl>
<p>Mathematics</p>
<ul>
<li>Advanced Math Functions</li>
<li>Imaginary and Complex Numbers</li>
<li>Large and High-Precision Numbers</li>
</ul>
<p>Lists and Arrays</p>
<ul>
<li>map and grep</li>
</ul>
<p>Bits and Pieces</p>
<p>Formats</p>
<p>Networking and IPC</p>
<ul>
<li>System V IPC</li>
<li>Sockets</li>
<li>Security</li>
</ul>
<p>Probably the most important of these is data-flow analysis, better known as taint checking.</p>
<ul>
<li><a href="http://perldoc.perl.org/perlsec.html">perlsec</a></li>
</ul>
<p>Debugging</p>
<ul>
<li><a href="http://perldoc.perl.org/perldebug.html">perldebug</a></li>
</ul>
<p>Command-Line Options</p>
<ul>
<li><a href="http://perldoc.perl.org/perlrun.html">perlrun</a></li>
</ul>
<p>Converting Other Languages to Perl</p>
<ul>
<li>sed, awk &#8211;a2p, s2p&#8211;&gt; perl</li>
</ul>
<p>C in perl: http://perldoc.perl.org/perlxs.html</p>
<p>find2perl /tmp -atime +14 -eval unlink &gt;Perl-program</p>
<p>Command-Line Options in Your Programs</p>
<p>Embedded Documentation</p>
<p>Perl&#8217;s own documentation is written in pod (plain-old documentation) format. You can embed this documentation in your own programs, and it can then be translated to text, HTML, or many other formats as needed. See the perlpod documentation. The Alpaca book covers this, too.</p>
<p>More Ways to Open Filehandles</p>
<p>There are other modes to use in opening a filehandle; see the perlopentut documenta- tion. The open built-in is so feature-full that it gets its own documentation page.</p>
<p>Threads and Forking</p>
<p>Perl now has support for threads. Although this is experimental (as of this writing), it can be a useful tool for some applications. Using fork (where it&#8217;s available) is better supported; see the perlfork and perlthrtut documentation.</p>
<p>Thank you, Larry!</p>
<h2 id="c.-a-unicode-primer">C. A Unicode Primer</h2>
<p>Unicode The Unicode Character Set (UCS) is an abstract mapping of characters to code points.</p>
<p>You use the NFKD subroutine (Normalization Form Kompatibility Decomposition).</p>
<p>Since we don&#8217;t actually read each letter in a word and instead recognize it as a whole, the ligature is a slight improvement in our pattern recognition. So, typographers combine the two graphemes.</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="kw">utf8</span>;
<span class="fu">use</span> <span class="fu">Unicode::Normalize</span>;
<span class="co"># U+FB01 - fi ligature</span>
<span class="co"># U+0065 U+0301 - decomposed &#233;</span>
<span class="co"># U+00E9 - composed &#233;</span>
<span class="fu">binmode</span> STDOUT, <span class="kw">&#39;</span><span class="st">:utf8</span><span class="kw">&#39;</span>;
<span class="kw">my</span> <span class="dt">$string</span> =
<span class="kw">&quot;</span><span class="st">Can you \x{FB01}nd my r\x{E9}sum\x{E9}?</span><span class="kw">&quot;</span>;
<span class="kw">if</span>( <span class="dt">$string</span> =~ <span class="kw">/</span><span class="ot">\x</span><span class="ch">{65}</span><span class="ot">\x</span><span class="ch">{301}</span><span class="kw">/</span> ) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Oops! Matched a decomposed &#233;</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}
<span class="kw">if</span>( <span class="dt">$string</span> =~ <span class="kw">/</span><span class="ot">\x{E9}</span><span class="kw">/</span> ) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Yay! Matched a composed &#233;</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}
<span class="kw">my</span> <span class="dt">$nfd</span> = NFD( <span class="dt">$string</span> );
<span class="kw">if</span>( <span class="dt">$nfd</span> =~ <span class="kw">/</span><span class="ot">\x{E9}</span><span class="kw">/</span> ) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Oops! Matched a composed &#233;</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}
<span class="kw">if</span>( <span class="dt">$nfd</span> =~ <span class="kw">/</span><span class="ot">fi</span><span class="kw">/</span> ) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Oops! Matched a decomposed fi</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}
<span class="kw">my</span> <span class="dt">$nfkd</span> = NFKD( <span class="dt">$string</span> );
<span class="kw">if</span>( <span class="dt">$string</span> =~ <span class="kw">/</span><span class="ot">fi</span><span class="kw">/</span> ) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Oops! Matched a decomposed fi</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}
<span class="kw">if</span>( <span class="dt">$nfkd</span> =~ <span class="kw">/</span><span class="ot">fi</span><span class="kw">/</span> ) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Yay! Matched a decomposed fi</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}
<span class="kw">if</span>( <span class="dt">$nfkd</span> =~ <span class="kw">/</span><span class="ot">\x</span><span class="ch">{65}</span><span class="ot">\x</span><span class="ch">{301}</span><span class="kw">/</span> ) {
    <span class="fu">print</span> <span class="kw">&quot;</span><span class="st">Yay! Matched a decomposed &#233;</span><span class="ch">\n</span><span class="kw">&quot;</span>;
}</code></pre></div>
<pre class="tzx-plain"><code>Yay! Matched a composed &#233;
Yay! Matched a decomposed fi
Yay! Matched a decomposed &#233;</code></pre>
<dl>
<dt>Fancier Characters by Name</dt>
<dd><p><code class="sourceCode perl"><span class="kw">my</span> <span class="dt">$string</span> = <span class="kw">&quot;</span><span class="st">\N{THAI CHARACTER KHOMUT}</span><span class="kw">&quot;</span>; <span class="co"># U+0E5B, &#3675;</span></code></p>
</dd>
</dl>
<p>If you want to set the encoding for all filehandles that you will open, you can use the open pragma. You can affect all input or all output filehandles:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fu">open</span> IN =&gt; <span class="kw">&#39;</span><span class="st">:encoding(UTF-8)</span><span class="kw">&#39;</span>;
<span class="fu">use</span> <span class="fu">open</span> OUT =&gt; <span class="kw">&#39;</span><span class="st">:encoding(UTF-8)</span><span class="kw">&#39;</span>;

<span class="fu">use</span> <span class="fu">open</span> IN =&gt; <span class="kw">&quot;</span><span class="st">:crlf</span><span class="kw">&quot;</span>, OUT =&gt; <span class="kw">&quot;</span><span class="st">:bytes</span><span class="kw">&quot;</span>;</code></pre></div>
<p>If you want to use the same encoding for both input and output, you can set them at the same time, either using IO or omitting it:</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fu">open</span> IO =&gt; <span class="kw">&quot;</span><span class="st">:encoding(iso&#8722;8859&#8722;1)</span><span class="kw">&quot;</span>;
<span class="fu">use</span> <span class="fu">open</span> <span class="kw">&#39;</span><span class="st">:encoding(UTF-8)</span><span class="kw">&#39;</span>;</code></pre></div>
<dl>
<dt>Dealing with Command-Line Arguments</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fu">I18N::Langinfo</span> <span class="kw">qw(</span>langinfo CODESET<span class="kw">)</span>;
<span class="fu">use</span> Encode <span class="kw">qw(</span>decode<span class="kw">)</span>;
<span class="kw">my</span> <span class="dt">$codeset</span> = langinfo(CODESET);
<span class="kw">foreach</span> <span class="kw">my</span> <span class="dt">$arg</span> ( <span class="dt">@ARGV</span> ) {
    <span class="fu">push</span> <span class="dt">@new_ARGV</span>, decode <span class="dt">$codeset</span>, <span class="dt">$_</span>;
}</code></pre></div>
</dd>
</dl>
<p>Further Reading</p>
<p>There are several parts of the Perl documentation that will help you with the Perl parts, including the perlunicode, perlunifaq, perluniintro, perluniprops, perlunitut documentation. Don&#8217;t forget to check the documentation for any of the Unicode modules that you use.</p>
<p>Symbols</p>
<p>&#26377;&#24847;&#24605;&#12290;</p>
<hr />
<p>Notes</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="dt">$hash</span>-&gt;{key}
<span class="dt">$list</span>-&gt;[<span class="dv">0</span>]
<span class="dt">$obj</span>-&gt;<span class="dt">method</span>()

<span class="co"># &#20043;&#22806;&#65292;&#36824;&#26377;&#19968;&#20010;&#31070;&#22855;&#30340;&#21151;&#33021;&#26469;&#23454;&#29616;autobox,&#20063;&#23601;&#26159;&#25152;&#35859;&#30340;&#183;&#19968;&#20999;&#30342;&#23545;&#35937;&#183;</span>
<span class="kw">my</span> <span class="dt">$len</span> = <span class="kw">sub </span>{ <span class="fu">length</span>(<span class="fu">shift</span>) };
<span class="kw">&quot;</span><span class="st">hello</span><span class="kw">&quot;</span>-&gt;<span class="dt">$len</span>();

<span class="dt">$x</span> = <span class="kw">&quot;</span><span class="st">I like dogs.</span><span class="kw">&quot;</span>;
<span class="dt">$y</span> = <span class="dt">$x</span> =~ <span class="kw">s/</span><span class="ot">dogs</span><span class="kw">/</span><span class="st">cats</span><span class="kw">/</span>r;
<span class="fu">print</span> <span class="kw">&quot;</span><span class="dt">$x</span><span class="st"> </span><span class="dt">$y</span><span class="ch">\n</span><span class="kw">&quot;</span>; <span class="co"># prints &quot;I like dogs. I like cats.&quot;</span>

<span class="co"># here doc</span>
<span class="kw">my</span> <span class="dt">$str</span> = <span class="kw">&lt;&lt;__;</span>
<span class="st">some string here</span>
<span class="st">bla blah</span>
<span class="kw">__</span>

<span class="kw">while</span>(&lt;<span class="dt">$fh</span>&gt;)
{
    <span class="kw">next</span> <span class="kw">if</span> <span class="dv">1</span>..<span class="dv">100</span>; <span class="co"># skip 1 ~ 100 line</span>
    ...
}

(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>) x <span class="dv">3</span> <span class="co"># (1,2,3,1,2,3,1,2,3)</span>

<span class="co"># goto</span>
LABEL:
<span class="kw">for</span> ( <span class="dt">@list_A</span>) {
    <span class="kw">for</span> ( <span class="dt">@list_B</span> ) {
       ...;
       <span class="kw">next</span> LABEL;
    }
}

<span class="kw">my</span> <span class="dt">$x</span> = <span class="dv">1</span>;
<span class="kw">my</span> <span class="dt">$y</span> = <span class="dv">2</span>;
<span class="fu">print</span> <span class="kw">&quot;</span><span class="dt">$x</span><span class="st"> + </span><span class="dt">$y</span><span class="st"> = </span><span class="dt">@</span><span class="st">{[ </span><span class="dt">$x</span><span class="st"> + </span><span class="dt">$y</span><span class="st"> ]}</span><span class="kw">&quot;</span></code></pre></div>
<p>Ideas</p>
<ul>
<li>autovivification</li>
<li>heredoc</li>
</ul>
<hr />
<dl>
<dt>basename</dt>
<dd><p><code>$0</code> is typically the name of your program, so how about this?</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> Cwd <span class="kw">&#39;</span><span class="st">abs_path</span><span class="kw">&#39;</span>;
<span class="fu">print</span> abs_path(<span class="dt">$0</span>);</code></pre></div>
<p>Small comment, on activestate perl on windows $0 typically contains backslashes and abs_path returned forward slashes, so a quick &#8220;tr ///\/;&#8221; was needed to fix it.</p>
<div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="fu">use</span> <span class="fu">File::Basename</span>;
<span class="kw">my</span> <span class="dt">$dirname</span> = dirname(<span class="kw">__FILE__</span>);</code></pre></div>
</dd>
<dt>rm, cp, mv</dt>
<dd><div class="sourceCode"><pre class="sourceCode perl"><code class="sourceCode perl"><span class="co"># rm</span>
<span class="fu">unlink</span> <span class="dt">$file</span>;
<span class="fu">unlink</span> <span class="dt">@files</span>;

<span class="co"># mv</span>
<span class="fu">rename</span> <span class="dt">$old_name</span>, <span class="dt">$new_name</span>;

<span class="fu">use</span> <span class="fu">File::Copy</span> <span class="kw">qw(</span>move<span class="kw">)</span>;
move <span class="dt">$old_name</span>, <span class="dt">$new_name</span>;

<span class="co"># cp</span>
<span class="fu">use</span> <span class="fu">File::Copy</span> <span class="kw">qw(</span>copy<span class="kw">)</span>;
copy <span class="dt">$old_file</span>, <span class="dt">$new_file</span>;</code></pre></div>
</dd>
</dl>
<p>trim first five lines</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">cat</span> filein.txt <span class="kw">|</span> <span class="kw">perl</span> -e <span class="st">&quot;while(&lt;&gt;){ next if 1..5; print; }&quot;</span> <span class="kw">&gt;</span> fileout.txt</code></pre></div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Smart match operations for pairs of operands</p>
<table>
<thead>
<tr class="header">
<th align="center">Example</th>
<th align="center">Type of match</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>%a ~~ %b</code></td>
<td align="center">hash keys identical</td>
</tr>
<tr class="even">
<td align="center"><code>%a ~~ @b</code> or <code>@a ~~ %b</code></td>
<td align="center">at least one key in <code>%a</code> is in <code>@b</code></td>
</tr>
<tr class="odd">
<td align="center"><code>%a ~~ /Fred/</code> or <code>/Fred/ ~~ %b</code></td>
<td align="center">at least one key matches pattern</td>
</tr>
<tr class="even">
<td align="center"><code>'Fred' ~~ %a</code></td>
<td align="center">exists <code>$a{Fred}</code></td>
</tr>
<tr class="odd">
<td align="center"><code>@a ~~ @b</code></td>
<td align="center">arrays are the same</td>
</tr>
<tr class="even">
<td align="center"><code>@a ~~ /Fred/</code></td>
<td align="center">at least one element in <code>@a</code> matches pattern</td>
</tr>
<tr class="odd">
<td align="center"><code>$name ~~ undef</code></td>
<td align="center"><code>$name</code> is not defined</td>
</tr>
<tr class="even">
<td align="center"><code>$name ~~ /Fred/</code></td>
<td align="center">pattern match</td>
</tr>
<tr class="odd">
<td align="center"><code>123 ~~ '123.0'</code></td>
<td align="center">numeric equality with &#8220;numish&#8221; string</td>
</tr>
<tr class="even">
<td align="center"><code>'Fred' ~~ 'Fred'</code></td>
<td align="center">string equality</td>
</tr>
<tr class="odd">
<td align="center"><code>123 ~~ 456</code></td>
<td align="center">numeric equality</td>
</tr>
</tbody>
</table>
<a href="#fnref1">&#8617;</a></li>
</ol>
</div>
</div>
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="blur-svg">
    <defs>
        <filter id="blur-filter">
            <feGaussianBlur stdDeviation="3"></feGaussianBlur>
        </filter>
    </defs>
</svg>
<script src="../lazyload.min.js"></script>
<script src="../jquery-3.0.0.min.js"></script>
<script src="../jquery.idTabs.min.js"></script>
<script src="../egg.min.js"></script>
<script src="../clipboard.min.js"></script>
<script src="../notes.js"></script>
</body>
</html>
